{"version":3,"sources":["dc.js"],"names":[],"mappings":"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","file":"dc-compiled.js","sourcesContent":["/*!\n *  dc 2.0.2\n *  http://dc-js.github.io/dc.js/\n *  Copyright 2012-2016 Nick Zhu & the dc.js Developers\n *  https://github.com/dc-js/dc.js/blob/master/AUTHORS\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n(function() { function _dc(d3, crossfilter) {\n'use strict';\n\n/**\n * The entire dc.js library is scoped under the **dc** name space. It does not introduce\n * anything else into the global name space.\n *\n * Most `dc` functions are designed to allow function chaining, meaning they return the current chart\n * instance whenever it is appropriate.  The getter forms of functions do not participate in function\n * chaining because they return values that are not the chart, although some,\n * such as {@link dc.baseMixin#svg .svg} and {@link dc.coordinateGridMixin#xAxis .xAxis},\n * return values that are themselves chainable d3 objects.\n * @namespace dc\n * @version 2.0.2\n * @example\n * // Example chaining\n * chart.width(300)\n *      .height(300)\n *      .filter('sunday');\n */\n/*jshint -W079*/\nvar dc = {\n    version: '2.0.2',\n    constants: {\n        CHART_CLASS: 'dc-chart',\n        DEBUG_GROUP_CLASS: 'debug',\n        STACK_CLASS: 'stack',\n        DESELECTED_CLASS: 'deselected',\n        SELECTED_CLASS: 'selected',\n        NODE_INDEX_NAME: '__index__',\n        GROUP_INDEX_NAME: '__group_index__',\n        DEFAULT_CHART_GROUP: '__default_chart_group__',\n        EVENT_DELAY: 40,\n        NEGLIGIBLE_NUMBER: 1e-10\n    },\n    _renderlet: null\n};\n/*jshint +W079*/\n\n/**\n * The dc.chartRegistry object maintains sets of all instantiated dc.js charts under named groups\n * and the default group.\n *\n * A chart group often corresponds to a crossfilter instance. It specifies\n * the set of charts which should be updated when a filter changes on one of the charts or when the\n * global functions {@link dc.filterAll dc.filterAll}, {@link dc.refocusAll dc.refocusAll},\n * {@link dc.renderAll dc.renderAll}, {@link dc.redrawAll dc.redrawAll}, or chart functions\n * {@link dc.baseMixin#renderGroup baseMixin.renderGroup},\n * {@link dc.baseMixin#redrawGroup baseMixin.redrawGroup} are called.\n *\n * @namespace chartRegistry\n * @memberof dc\n * @type {{has, register, deregister, clear, list}}\n */\ndc.chartRegistry = (function () {\n    // chartGroup:string => charts:array\n    var _chartMap = {};\n\n    function initializeChartGroup (group) {\n        if (!group) {\n            group = dc.constants.DEFAULT_CHART_GROUP;\n        }\n\n        if (!_chartMap[group]) {\n            _chartMap[group] = [];\n        }\n\n        return group;\n    }\n\n    return {\n        /**\n         * Determine if a given chart instance resides in any group in the registry.\n         * @method has\n         * @memberof dc.chartRegistry\n         * @param {Object} chart dc.js chart instance\n         * @returns {Boolean}\n         */\n        has: function (chart) {\n            for (var e in _chartMap) {\n                if (_chartMap[e].indexOf(chart) >= 0) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        /**\n         * Add given chart instance to the given group, creating the group if necessary.\n         * If no group is provided, the default group `dc.constants.DEFAULT_CHART_GROUP` will be used.\n         * @method register\n         * @memberof dc.chartRegistry\n         * @param {Object} chart dc.js chart instance\n         * @param {String} [group] Group name\n         */\n        register: function (chart, group) {\n            group = initializeChartGroup(group);\n            _chartMap[group].push(chart);\n        },\n\n        /**\n         * Remove given chart instance from the given group, creating the group if necessary.\n         * If no group is provided, the default group `dc.constants.DEFAULT_CHART_GROUP` will be used.\n         * @method deregister\n         * @memberof dc.chartRegistry\n         * @param {Object} chart dc.js chart instance\n         * @param {String} [group] Group name\n         */\n        deregister: function (chart, group) {\n            group = initializeChartGroup(group);\n            for (var i = 0; i < _chartMap[group].length; i++) {\n                if (_chartMap[group][i].anchorName() === chart.anchorName()) {\n                    _chartMap[group].splice(i, 1);\n                    break;\n                }\n            }\n        },\n\n        /**\n         * Clear given group if one is provided, otherwise clears all groups.\n         * @method clear\n         * @memberof dc.chartRegistry\n         * @param {String} group Group name\n         */\n        clear: function (group) {\n            if (group) {\n                delete _chartMap[group];\n            } else {\n                _chartMap = {};\n            }\n        },\n\n        /**\n         * Get an array of each chart instance in the given group.\n         * If no group is provided, the charts in the default group are returned.\n         * @method list\n         * @memberof dc.chartRegistry\n         * @param {String} [group] Group name\n         * @returns {Array<Object>}\n         */\n        list: function (group) {\n            group = initializeChartGroup(group);\n            return _chartMap[group];\n        }\n    };\n})();\n\n/**\n * Add given chart instance to the given group, creating the group if necessary.\n * If no group is provided, the default group `dc.constants.DEFAULT_CHART_GROUP` will be used.\n * @memberof dc\n * @method registerChart\n * @param {Object} chart dc.js chart instance\n * @param {String} [group] Group name\n */\ndc.registerChart = function (chart, group) {\n    dc.chartRegistry.register(chart, group);\n};\n\n/**\n * Remove given chart instance from the given group, creating the group if necessary.\n * If no group is provided, the default group `dc.constants.DEFAULT_CHART_GROUP` will be used.\n * @memberof dc\n * @method deregisterChart\n * @param {Object} chart dc.js chart instance\n * @param {String} [group] Group name\n */\ndc.deregisterChart = function (chart, group) {\n    dc.chartRegistry.deregister(chart, group);\n};\n\n/**\n * Determine if a given chart instance resides in any group in the registry.\n * @memberof dc\n * @method hasChart\n * @param {Object} chart dc.js chart instance\n * @returns {Boolean}\n */\ndc.hasChart = function (chart) {\n    return dc.chartRegistry.has(chart);\n};\n\n/**\n * Clear given group if one is provided, otherwise clears all groups.\n * @memberof dc\n * @method deregisterAllCharts\n * @param {String} group Group name\n */\ndc.deregisterAllCharts = function (group) {\n    dc.chartRegistry.clear(group);\n};\n\n/**\n * Clear all filters on all charts within the given chart group. If the chart group is not given then\n * only charts that belong to the default chart group will be reset.\n * @memberof dc\n * @method filterAll\n * @param {String} [group]\n */\ndc.filterAll = function (group) {\n    var charts = dc.chartRegistry.list(group);\n    for (var i = 0; i < charts.length; ++i) {\n        charts[i].filterAll();\n    }\n};\n\n/**\n * Reset zoom level / focus on all charts that belong to the given chart group. If the chart group is\n * not given then only charts that belong to the default chart group will be reset.\n * @memberof dc\n * @method refocusAll\n * @param {String} [group]\n */\ndc.refocusAll = function (group) {\n    var charts = dc.chartRegistry.list(group);\n    for (var i = 0; i < charts.length; ++i) {\n        if (charts[i].focus) {\n            charts[i].focus();\n        }\n    }\n};\n\n/**\n * Re-render all charts belong to the given chart group. If the chart group is not given then only\n * charts that belong to the default chart group will be re-rendered.\n * @memberof dc\n * @method renderAll\n * @param {String} [group]\n */\ndc.renderAll = function (group) {\n    var charts = dc.chartRegistry.list(group);\n    for (var i = 0; i < charts.length; ++i) {\n        charts[i].render();\n    }\n\n    if (dc._renderlet !== null) {\n        dc._renderlet(group);\n    }\n};\n\n/**\n * Redraw all charts belong to the given chart group. If the chart group is not given then only charts\n * that belong to the default chart group will be re-drawn. Redraw is different from re-render since\n * when redrawing dc tries to update the graphic incrementally, using transitions, instead of starting\n * from scratch.\n * @memberof dc\n * @method redrawAll\n * @param {String} [group]\n */\ndc.redrawAll = function (group) {\n    var charts = dc.chartRegistry.list(group);\n    for (var i = 0; i < charts.length; ++i) {\n        charts[i].redraw();\n    }\n\n    if (dc._renderlet !== null) {\n        dc._renderlet(group);\n    }\n};\n\n/**\n * If this boolean is set truthy, all transitions will be disabled, and changes to the charts will happen\n * immediately.\n * @memberof dc\n * @member disableTransitions\n * @type {Boolean}\n * @default false\n */\ndc.disableTransitions = false;\n\n/**\n * Start a transition on a selection if transitions are globally enabled\n * ({@link dc.disableTransitions} is false) and the duration is greater than zero; otherwise return\n * the selection. Since most operations are the same on a d3 selection and a d3 transition, this\n * allows a common code path for both cases.\n * @memberof dc\n * @method transition\n * @param {d3.selection} selection - the selection to be transitioned\n * @param {Number|Function} [duration=250] - the duration of the transition in milliseconds, a\n * function returning the duration, or 0 for no transition\n * @param {Number|Function} [delay] - the delay of the transition in milliseconds, or a function\n * returning the delay, or 0 for no delay\n * @param {String} [name] - the name of the transition (if concurrent transitions on the same\n * elements are needed)\n * @returns {d3.transition|d3.selection}\n */\ndc.transition = function (selection, duration, delay, name) {\n    if (dc.disableTransitions || duration <= 0) {\n        return selection;\n    }\n\n    var s = selection.transition(name);\n\n    if (duration >= 0 || duration !== undefined) {\n        s = s.duration(duration);\n    }\n    if (delay >= 0 || delay !== undefined) {\n        s = s.delay(delay);\n    }\n\n    return s;\n};\n\n/* somewhat silly, but to avoid duplicating logic */\ndc.optionalTransition = function (enable, duration, delay, name) {\n    if (enable) {\n        return function (selection) {\n            return dc.transition(selection, duration, delay, name);\n        };\n    } else {\n        return function (selection) {\n            return selection;\n        };\n    }\n};\n\n// See http://stackoverflow.com/a/20773846\ndc.afterTransition = function (transition, callback) {\n    if (transition.empty() || !transition.duration) {\n        callback.call(transition);\n    } else {\n        var n = 0;\n        transition\n            .each(function () { ++n; })\n            .each('end', function () {\n                if (!--n) {\n                    callback.call(transition);\n                }\n            });\n    }\n};\n\n/**\n * @namespace units\n * @memberof dc\n * @type {{}}\n */\ndc.units = {};\n\n/**\n * The default value for {@link dc.coordinateGridMixin#xUnits .xUnits} for the\n * {@link dc.coordinateGridMixin Coordinate Grid Chart} and should\n * be used when the x values are a sequence of integers.\n * It is a function that counts the number of integers in the range supplied in its start and end parameters.\n * @method integers\n * @memberof dc.units\n * @see {@link dc.coordinateGridMixin#xUnits coordinateGridMixin.xUnits}\n * @example\n * chart.xUnits(dc.units.integers) // already the default\n * @param {Number} start\n * @param {Number} end\n * @returns {Number}\n */\ndc.units.integers = function (start, end) {\n    return Math.abs(end - start);\n};\n\n/**\n * This argument can be passed to the {@link dc.coordinateGridMixin#xUnits .xUnits} function of the to\n * specify ordinal units for the x axis. Usually this parameter is used in combination with passing\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md d3.scale.ordinal} to\n * {@link dc.coordinateGridMixin#x .x}.\n * It just returns the domain passed to it, which for ordinal charts is an array of all values.\n * @method ordinal\n * @memberof dc.units\n * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md d3.scale.ordinal}\n * @see {@link dc.coordinateGridMixin#xUnits coordinateGridMixin.xUnits}\n * @see {@link dc.coordinateGridMixin#x coordinateGridMixin.x}\n * @example\n * chart.xUnits(dc.units.ordinal)\n *      .x(d3.scale.ordinal())\n * @param {*} start\n * @param {*} end\n * @param {Array<String>} domain\n * @returns {Array<String>}\n */\ndc.units.ordinal = function (start, end, domain) {\n    return domain;\n};\n\n/**\n * @namespace fp\n * @memberof dc.units\n * @type {{}}\n */\ndc.units.fp = {};\n/**\n * This function generates an argument for the {@link dc.coordinateGridMixin Coordinate Grid Chart}\n * {@link dc.coordinateGridMixin#xUnits .xUnits} function specifying that the x values are floating-point\n * numbers with the given precision.\n * The returned function determines how many values at the given precision will fit into the range\n * supplied in its start and end parameters.\n * @method precision\n * @memberof dc.units.fp\n * @see {@link dc.coordinateGridMixin#xUnits coordinateGridMixin.xUnits}\n * @example\n * // specify values (and ticks) every 0.1 units\n * chart.xUnits(dc.units.fp.precision(0.1)\n * // there are 500 units between 0.5 and 1 if the precision is 0.001\n * var thousandths = dc.units.fp.precision(0.001);\n * thousandths(0.5, 1.0) // returns 500\n * @param {Number} precision\n * @returns {Function} start-end unit function\n */\ndc.units.fp.precision = function (precision) {\n    var _f = function (s, e) {\n        var d = Math.abs((e - s) / _f.resolution);\n        if (dc.utils.isNegligible(d - Math.floor(d))) {\n            return Math.floor(d);\n        } else {\n            return Math.ceil(d);\n        }\n    };\n    _f.resolution = precision;\n    return _f;\n};\n\ndc.round = {};\ndc.round.floor = function (n) {\n    return Math.floor(n);\n};\ndc.round.ceil = function (n) {\n    return Math.ceil(n);\n};\ndc.round.round = function (n) {\n    return Math.round(n);\n};\n\ndc.override = function (obj, functionName, newFunction) {\n    var existingFunction = obj[functionName];\n    obj['_' + functionName] = existingFunction;\n    obj[functionName] = newFunction;\n};\n\ndc.renderlet = function (_) {\n    if (!arguments.length) {\n        return dc._renderlet;\n    }\n    dc._renderlet = _;\n    return dc;\n};\n\ndc.instanceOfChart = function (o) {\n    return o instanceof Object && o.__dcFlag__ && true;\n};\n\ndc.errors = {};\n\ndc.errors.Exception = function (msg) {\n    var _msg = msg || 'Unexpected internal error';\n\n    this.message = _msg;\n\n    this.toString = function () {\n        return _msg;\n    };\n    this.stack = (new Error()).stack;\n};\ndc.errors.Exception.prototype = Object.create(Error.prototype);\ndc.errors.Exception.prototype.constructor = dc.errors.Exception;\n\ndc.errors.InvalidStateException = function () {\n    dc.errors.Exception.apply(this, arguments);\n};\n\ndc.errors.InvalidStateException.prototype = Object.create(dc.errors.Exception.prototype);\ndc.errors.InvalidStateException.prototype.constructor = dc.errors.InvalidStateException;\n\ndc.errors.BadArgumentException = function () {\n    dc.errors.Exception.apply(this, arguments);\n};\n\ndc.errors.BadArgumentException.prototype = Object.create(dc.errors.Exception.prototype);\ndc.errors.BadArgumentException.prototype.constructor = dc.errors.BadArgumentException;\n\n/**\n * The default date format for dc.js\n * @name dateFormat\n * @memberof dc\n * @type {Function}\n * @default d3.time.format('%m/%d/%Y')\n */\ndc.dateFormat = d3.time.format('%m/%d/%Y');\n\n/**\n * @namespace printers\n * @memberof dc\n * @type {{}}\n */\ndc.printers = {};\n\n/**\n * Converts a list of filters into a readable string.\n * @method filters\n * @memberof dc.printers\n * @param {Array<dc.filters>} filters\n * @returns {String}\n */\ndc.printers.filters = function (filters) {\n    var s = '';\n\n    for (var i = 0; i < filters.length; ++i) {\n        if (i > 0) {\n            s += ', ';\n        }\n        s += dc.printers.filter(filters[i]);\n    }\n\n    return s;\n};\n\n/**\n * Converts a filter into a readable string.\n * @method filter\n * @memberof dc.printers\n * @param {dc.filters|any|Array<any>} filter\n * @returns {String}\n */\ndc.printers.filter = function (filter) {\n    var s = '';\n\n    if (typeof filter !== 'undefined' && filter !== null) {\n        if (filter instanceof Array) {\n            if (filter.length >= 2) {\n                s = '[' + dc.utils.printSingleValue(filter[0]) + ' -> ' + dc.utils.printSingleValue(filter[1]) + ']';\n            } else if (filter.length >= 1) {\n                s = dc.utils.printSingleValue(filter[0]);\n            }\n        } else {\n            s = dc.utils.printSingleValue(filter);\n        }\n    }\n\n    return s;\n};\n\n/**\n * Returns a function that given a string property name, can be used to pluck the property off an object.  A function\n * can be passed as the second argument to also alter the data being returned.\n *\n * This can be a useful shorthand method to create accessor functions.\n * @method pluck\n * @memberof dc\n * @example\n * var xPluck = dc.pluck('x');\n * var objA = {x: 1};\n * xPluck(objA) // 1\n * @example\n * var xPosition = dc.pluck('x', function (x, i) {\n *     // `this` is the original datum,\n *     // `x` is the x property of the datum,\n *     // `i` is the position in the array\n *     return this.radius + x;\n * });\n * dc.selectAll('.circle').data(...).x(xPosition);\n * @param {String} n\n * @param {Function} [f]\n * @returns {Function}\n */\ndc.pluck = function (n, f) {\n    if (!f) {\n        return function (d) { return d[n]; };\n    }\n    return function (d, i) { return f.call(d, d[n], i); };\n};\n\n/**\n * @namespace utils\n * @memberof dc\n * @type {{}}\n */\ndc.utils = {};\n\n/**\n * Print a single value filter.\n * @method printSingleValue\n * @memberof dc.utils\n * @param {any} filter\n * @returns {String}\n */\ndc.utils.printSingleValue = function (filter) {\n    var s = '' + filter;\n\n    if (filter instanceof Date) {\n        s = dc.dateFormat(filter);\n    } else if (typeof(filter) === 'string') {\n        s = filter;\n    } else if (dc.utils.isFloat(filter)) {\n        s = dc.utils.printSingleValue.fformat(filter);\n    } else if (dc.utils.isInteger(filter)) {\n        s = Math.round(filter);\n    }\n\n    return s;\n};\ndc.utils.printSingleValue.fformat = d3.format('.2f');\n\n/**\n * Arbitrary add one value to another.\n * @method add\n * @memberof dc.utils\n * @todo\n * These assume than any string r is a percentage (whether or not it includes %).\n * They also generate strange results if l is a string.\n * @param {String|Date|Number} l the value to modify\n * @param {Number} r the amount by which to modify the value\n * @param {String} [t] if `l` is a `Date`, the\n * [interval](https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Intervals.md#interval) in\n * the `d3.time` namespace\n * @returns {String|Date|Number}\n */\ndc.utils.add = function (l, r, t) {\n    if (typeof r === 'string') {\n        r = r.replace('%', '');\n    }\n\n    if (l instanceof Date) {\n        if (typeof r === 'string') {\n            r = +r;\n        }\n        if (t === 'millis') {\n            return new Date(l.getTime() + r);\n        }\n        t = t || 'day';\n        return d3.time[t].offset(l, r);\n    } else if (typeof r === 'string') {\n        var percentage = (+r / 100);\n        return l > 0 ? l * (1 + percentage) : l * (1 - percentage);\n    } else {\n        return l + r;\n    }\n};\n\n/**\n * Arbitrary subtract one value from another.\n * @method subtract\n * @memberof dc.utils\n * @todo\n * These assume than any string r is a percentage (whether or not it includes %).\n * They also generate strange results if l is a string.\n * @param {String|Date|Number} l the value to modify\n * @param {Number} r the amount by which to modify the value\n * @param {String} [t] if `l` is a `Date`, the\n * [interval](https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Intervals.md#interval) in\n * the `d3.time` namespace\n * @returns {String|Date|Number}\n */\ndc.utils.subtract = function (l, r, t) {\n    if (typeof r === 'string') {\n        r = r.replace('%', '');\n    }\n\n    if (l instanceof Date) {\n        if (typeof r === 'string') {\n            r = +r;\n        }\n        if (t === 'millis') {\n            return new Date(l.getTime() - r);\n        }\n        t = t || 'day';\n        return d3.time[t].offset(l, -r);\n    } else if (typeof r === 'string') {\n        var percentage = (+r / 100);\n        return l < 0 ? l * (1 + percentage) : l * (1 - percentage);\n    } else {\n        return l - r;\n    }\n};\n\n/**\n * Is the value a number?\n * @method isNumber\n * @memberof dc.utils\n * @param {any} n\n * @returns {Boolean}\n */\ndc.utils.isNumber = function (n) {\n    return n === +n;\n};\n\n/**\n * Is the value a float?\n * @method isFloat\n * @memberof dc.utils\n * @param {any} n\n * @returns {Boolean}\n */\ndc.utils.isFloat = function (n) {\n    return n === +n && n !== (n | 0);\n};\n\n/**\n * Is the value an integer?\n * @method isInteger\n * @memberof dc.utils\n * @param {any} n\n * @returns {Boolean}\n */\ndc.utils.isInteger = function (n) {\n    return n === +n && n === (n | 0);\n};\n\n/**\n * Is the value very close to zero?\n * @method isNegligible\n * @memberof dc.utils\n * @param {any} n\n * @returns {Boolean}\n */\ndc.utils.isNegligible = function (n) {\n    return !dc.utils.isNumber(n) || (n < dc.constants.NEGLIGIBLE_NUMBER && n > -dc.constants.NEGLIGIBLE_NUMBER);\n};\n\n/**\n * Ensure the value is no greater or less than the min/max values.  If it is return the boundary value.\n * @method clamp\n * @memberof dc.utils\n * @param {any} val\n * @param {any} min\n * @param {any} max\n * @returns {any}\n */\ndc.utils.clamp = function (val, min, max) {\n    return val < min ? min : (val > max ? max : val);\n};\n\n/**\n * Using a simple static counter, provide a unique integer id.\n * @method uniqueId\n * @memberof dc.utils\n * @returns {Number}\n */\nvar _idCounter = 0;\ndc.utils.uniqueId = function () {\n    return ++_idCounter;\n};\n\n/**\n * Convert a name to an ID.\n * @method nameToId\n * @memberof dc.utils\n * @param {String} name\n * @returns {String}\n */\ndc.utils.nameToId = function (name) {\n    return name.toLowerCase().replace(/[\\s]/g, '_').replace(/[\\.']/g, '');\n};\n\n/**\n * Append or select an item on a parent element.\n * @method appendOrSelect\n * @memberof dc.utils\n * @param {d3.selection} parent\n * @param {String} selector\n * @param {String} tag\n * @returns {d3.selection}\n */\ndc.utils.appendOrSelect = function (parent, selector, tag) {\n    tag = tag || selector;\n    var element = parent.select(selector);\n    if (element.empty()) {\n        element = parent.append(tag);\n    }\n    return element;\n};\n\n/**\n * Return the number if the value is a number; else 0.\n * @method safeNumber\n * @memberof dc.utils\n * @param {Number|any} n\n * @returns {Number}\n */\ndc.utils.safeNumber = function (n) { return dc.utils.isNumber(+n) ? +n : 0;};\n\ndc.logger = {};\n\ndc.logger.enableDebugLog = false;\n\ndc.logger.warn = function (msg) {\n    if (console) {\n        if (console.warn) {\n            console.warn(msg);\n        } else if (console.log) {\n            console.log(msg);\n        }\n    }\n\n    return dc.logger;\n};\n\ndc.logger.debug = function (msg) {\n    if (dc.logger.enableDebugLog && console) {\n        if (console.debug) {\n            console.debug(msg);\n        } else if (console.log) {\n            console.log(msg);\n        }\n    }\n\n    return dc.logger;\n};\n\ndc.logger.deprecate = function (fn, msg) {\n    // Allow logging of deprecation\n    var warned = false;\n    function deprecated () {\n        if (!warned) {\n            dc.logger.warn(msg);\n            warned = true;\n        }\n        return fn.apply(this, arguments);\n    }\n    return deprecated;\n};\n\ndc.events = {\n    current: null\n};\n\n/**\n * This function triggers a throttled event function with a specified delay (in milli-seconds).  Events\n * that are triggered repetitively due to user interaction such brush dragging might flood the library\n * and invoke more renders than can be executed in time. Using this function to wrap your event\n * function allows the library to smooth out the rendering by throttling events and only responding to\n * the most recent event.\n * @name events.trigger\n * @memberof dc\n * @example\n * chart.on('renderlet', function(chart) {\n *     // smooth the rendering through event throttling\n *     dc.events.trigger(function(){\n *         // focus some other chart to the range selected by user on this chart\n *         someOtherChart.focus(chart.filter());\n *     });\n * })\n * @param {Function} closure\n * @param {Number} [delay]\n */\ndc.events.trigger = function (closure, delay) {\n    if (!delay) {\n        closure();\n        return;\n    }\n\n    dc.events.current = closure;\n\n    setTimeout(function () {\n        if (closure === dc.events.current) {\n            closure();\n        }\n    }, delay);\n};\n\n/**\n * The dc.js filters are functions which are passed into crossfilter to chose which records will be\n * accumulated to produce values for the charts.  In the crossfilter model, any filters applied on one\n * dimension will affect all the other dimensions but not that one.  dc always applies a filter\n * function to the dimension; the function combines multiple filters and if any of them accept a\n * record, it is filtered in.\n *\n * These filter constructors are used as appropriate by the various charts to implement brushing.  We\n * mention below which chart uses which filter.  In some cases, many instances of a filter will be added.\n *\n * Each of the dc.js filters is an object with the following properties:\n * * `isFiltered` - a function that returns true if a value is within the filter\n * * `filterType` - a string identifying the filter, here the name of the constructor\n *\n * Currently these filter objects are also arrays, but this is not a requirement. Custom filters\n * can be used as long as they have the properties above.\n * @namespace filters\n * @memberof dc\n * @type {{}}\n */\ndc.filters = {};\n\n/**\n * RangedFilter is a filter which accepts keys between `low` and `high`.  It is used to implement X\n * axis brushing for the {@link dc.coordinateGridMixin coordinate grid charts}.\n *\n * Its `filterType` is 'RangedFilter'\n * @name RangedFilter\n * @memberof dc.filters\n * @param {Number} low\n * @param {Number} high\n * @returns {Array<Number>}\n * @constructor\n */\ndc.filters.RangedFilter = function (low, high) {\n    var range = new Array(low, high);\n    range.isFiltered = function (value) {\n        return value >= this[0] && value < this[1];\n    };\n    range.filterType = 'RangedFilter';\n\n    return range;\n};\n\n/**\n * TwoDimensionalFilter is a filter which accepts a single two-dimensional value.  It is used by the\n * {@link dc.heatMap heat map chart} to include particular cells as they are clicked.  (Rows and columns are\n * filtered by filtering all the cells in the row or column.)\n *\n * Its `filterType` is 'TwoDimensionalFilter'\n * @name TwoDimensionalFilter\n * @memberof dc.filters\n * @param {Array<Number>} filter\n * @returns {Array<Number>}\n * @constructor\n */\ndc.filters.TwoDimensionalFilter = function (filter) {\n    if (filter === null) { return null; }\n\n    var f = filter;\n    f.isFiltered = function (value) {\n        return value.length && value.length === f.length &&\n               value[0] === f[0] && value[1] === f[1];\n    };\n    f.filterType = 'TwoDimensionalFilter';\n\n    return f;\n};\n\n/**\n * The RangedTwoDimensionalFilter allows filtering all values which fit within a rectangular\n * region. It is used by the {@link dc.scatterPlot scatter plot} to implement rectangular brushing.\n *\n * It takes two two-dimensional points in the form `[[x1,y1],[x2,y2]]`, and normalizes them so that\n * `x1 <= x2` and `y1 <= y2`. It then returns a filter which accepts any points which are in the\n * rectangular range including the lower values but excluding the higher values.\n *\n * If an array of two values are given to the RangedTwoDimensionalFilter, it interprets the values as\n * two x coordinates `x1` and `x2` and returns a filter which accepts any points for which `x1 <= x <\n * x2`.\n *\n * Its `filterType` is 'RangedTwoDimensionalFilter'\n * @name RangedTwoDimensionalFilter\n * @memberof dc.filters\n * @param {Array<Array<Number>>} filter\n * @returns {Array<Array<Number>>}\n * @constructor\n */\ndc.filters.RangedTwoDimensionalFilter = function (filter) {\n    if (filter === null) { return null; }\n\n    var f = filter;\n    var fromBottomLeft;\n\n    if (f[0] instanceof Array) {\n        fromBottomLeft = [\n            [Math.min(filter[0][0], filter[1][0]), Math.min(filter[0][1], filter[1][1])],\n            [Math.max(filter[0][0], filter[1][0]), Math.max(filter[0][1], filter[1][1])]\n        ];\n    } else {\n        fromBottomLeft = [[filter[0], -Infinity], [filter[1], Infinity]];\n    }\n\n    f.isFiltered = function (value) {\n        var x, y;\n\n        if (value instanceof Array) {\n            x = value[0];\n            y = value[1];\n        } else {\n            x = value;\n            y = fromBottomLeft[0][1];\n        }\n\n        return x >= fromBottomLeft[0][0] && x < fromBottomLeft[1][0] &&\n               y >= fromBottomLeft[0][1] && y < fromBottomLeft[1][1];\n    };\n    f.filterType = 'RangedTwoDimensionalFilter';\n\n    return f;\n};\n\n/**\n * `dc.baseMixin` is an abstract functional object representing a basic `dc` chart object\n * for all chart and widget implementations. Methods from the {@link #dc.baseMixin dc.baseMixin} are inherited\n * and available on all chart implementations in the `dc` library.\n * @name baseMixin\n * @memberof dc\n * @mixin\n * @param {Object} _chart\n * @returns {dc.baseMixin}\n */\ndc.baseMixin = function (_chart) {\n    _chart.__dcFlag__ = dc.utils.uniqueId();\n\n    var _dimension;\n    var _group;\n\n    var _anchor;\n    var _root;\n    var _svg;\n    var _isChild;\n\n    var _minWidth = 200;\n    var _defaultWidthCalc = function (element) {\n        var width = element && element.getBoundingClientRect && element.getBoundingClientRect().width;\n        return (width && width > _minWidth) ? width : _minWidth;\n    };\n    var _widthCalc = _defaultWidthCalc;\n\n    var _minHeight = 200;\n    var _defaultHeightCalc = function (element) {\n        var height = element && element.getBoundingClientRect && element.getBoundingClientRect().height;\n        return (height && height > _minHeight) ? height : _minHeight;\n    };\n    var _heightCalc = _defaultHeightCalc;\n    var _width, _height;\n\n    var _keyAccessor = dc.pluck('key');\n    var _valueAccessor = dc.pluck('value');\n    var _label = dc.pluck('key');\n\n    var _ordering = dc.pluck('key');\n    var _orderSort;\n\n    var _renderLabel = false;\n\n    var _title = function (d) {\n        return _chart.keyAccessor()(d) + ': ' + _chart.valueAccessor()(d);\n    };\n    var _renderTitle = true;\n    var _controlsUseVisibility = false;\n\n    var _transitionDuration = 750;\n\n    var _transitionDelay = 0;\n\n    var _filterPrinter = dc.printers.filters;\n\n    var _mandatoryAttributes = ['dimension', 'group'];\n\n    var _chartGroup = dc.constants.DEFAULT_CHART_GROUP;\n\n    var _listeners = d3.dispatch(\n        'preRender',\n        'postRender',\n        'preRedraw',\n        'postRedraw',\n        'filtered',\n        'zoomed',\n        'renderlet',\n        'pretransition');\n\n    var _legend;\n    var _commitHandler;\n\n    var _filters = [];\n    var _filterHandler = function (dimension, filters) {\n        if (filters.length === 0) {\n            dimension.filter(null);\n        } else if (filters.length === 1 && !filters[0].isFiltered) {\n            // single value and not a function-based filter\n            dimension.filterExact(filters[0]);\n        } else if (filters.length === 1 && filters[0].filterType === 'RangedFilter') {\n            // single range-based filter\n            dimension.filterRange(filters[0]);\n        } else {\n            dimension.filterFunction(function (d) {\n                for (var i = 0; i < filters.length; i++) {\n                    var filter = filters[i];\n                    if (filter.isFiltered && filter.isFiltered(d)) {\n                        return true;\n                    } else if (filter <= d && filter >= d) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n        }\n        return filters;\n    };\n\n    var _data = function (group) {\n        return group.all();\n    };\n\n    /**\n     * Set or get the height attribute of a chart. The height is applied to the SVGElement generated by\n     * the chart when rendered (or re-rendered). If a value is given, then it will be used to calculate\n     * the new height and the chart returned for method chaining.  The value can either be a numeric, a\n     * function, or falsy. If no value is specified then the value of the current height attribute will\n     * be returned.\n     *\n     * By default, without an explicit height being given, the chart will select the width of its\n     * anchor element. If that isn't possible it defaults to 200 (provided by the\n     * {@link dc.baseMixin#minHeight minHeight} property). Setting the value falsy will return\n     * the chart to the default behavior.\n     * @method height\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link dc.baseMixin#minHeight minHeight}\n     * @example\n     * // Default height\n     * chart.height(function (element) {\n     *     var height = element && element.getBoundingClientRect && element.getBoundingClientRect().height;\n     *     return (height && height > chart.minHeight()) ? height : chart.minHeight();\n     * });\n     *\n     * chart.height(250); // Set the chart's height to 250px;\n     * chart.height(function(anchor) { return doSomethingWith(anchor); }); // set the chart's height with a function\n     * chart.height(null); // reset the height to the default auto calculation\n     * @param {Number|Function} [height]\n     * @returns {Number|dc.baseMixin}\n     */\n    _chart.height = function (height) {\n        if (!arguments.length) {\n            if (!dc.utils.isNumber(_height)) {\n                // only calculate once\n                _height = _heightCalc(_root.node());\n            }\n            return _height;\n        }\n        _heightCalc = d3.functor(height || _defaultHeightCalc);\n        _height = undefined;\n        return _chart;\n    };\n\n    /**\n     * Set or get the width attribute of a chart.\n     * @method width\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link dc.baseMixin#height height}\n     * @see {@link dc.baseMixin#minWidth minWidth}\n     * @example\n     * // Default width\n     * chart.width(function (element) {\n     *     var width = element && element.getBoundingClientRect && element.getBoundingClientRect().width;\n     *     return (width && width > chart.minWidth()) ? width : chart.minWidth();\n     * });\n     * @param {Number|Function} [width]\n     * @returns {Number|dc.baseMixin}\n     */\n    _chart.width = function (width) {\n        if (!arguments.length) {\n            if (!dc.utils.isNumber(_width)) {\n                // only calculate once\n                _width = _widthCalc(_root.node());\n            }\n            return _width;\n        }\n        _widthCalc = d3.functor(width || _defaultWidthCalc);\n        _width = undefined;\n        return _chart;\n    };\n\n    /**\n     * Set or get the minimum width attribute of a chart. This only has effect when used with the default\n     * {@link dc.baseMixin#width width} function.\n     * @method minWidth\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link dc.baseMixin#width width}\n     * @param {Number} [minWidth=200]\n     * @returns {Number|dc.baseMixin}\n     */\n    _chart.minWidth = function (minWidth) {\n        if (!arguments.length) {\n            return _minWidth;\n        }\n        _minWidth = minWidth;\n        return _chart;\n    };\n\n    /**\n     * Set or get the minimum height attribute of a chart. This only has effect when used with the default\n     * {@link dc.baseMixin#height height} function.\n     * @method minHeight\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link dc.baseMixin#height height}\n     * @param {Number} [minHeight=200]\n     * @returns {Number|dc.baseMixin}\n     */\n    _chart.minHeight = function (minHeight) {\n        if (!arguments.length) {\n            return _minHeight;\n        }\n        _minHeight = minHeight;\n        return _chart;\n    };\n\n    /**\n     * **mandatory**\n     *\n     * Set or get the dimension attribute of a chart. In `dc`, a dimension can be any valid\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension crossfilter dimension}\n     *\n     * If a value is given, then it will be used as the new dimension. If no value is specified then\n     * the current dimension will be returned.\n     * @method dimension\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension crossfilter.dimension}\n     * @example\n     * var index = crossfilter([]);\n     * var dimension = index.dimension(dc.pluck('key'));\n     * chart.dimension(dimension);\n     * @param {crossfilter.dimension} [dimension]\n     * @returns {crossfilter.dimension|dc.baseMixin}\n     */\n    _chart.dimension = function (dimension) {\n        if (!arguments.length) {\n            return _dimension;\n        }\n        _dimension = dimension;\n        _chart.expireCache();\n        return _chart;\n    };\n\n    /**\n     * Set the data callback or retrieve the chart's data set. The data callback is passed the chart's\n     * group and by default will return\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_all group.all}.\n     * This behavior may be modified to, for instance, return only the top 5 groups.\n     * @method data\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // Default data function\n     * chart.data(function (group) { return group.all(); });\n     *\n     * chart.data(function (group) { return group.top(5); });\n     * @param {Function} [callback]\n     * @returns {*|dc.baseMixin}\n     */\n    _chart.data = function (callback) {\n        if (!arguments.length) {\n            return _data.call(_chart, _group);\n        }\n        _data = d3.functor(callback);\n        _chart.expireCache();\n        return _chart;\n    };\n\n    /**\n     * **mandatory**\n     *\n     * Set or get the group attribute of a chart. In `dc` a group is a\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group-map-reduce crossfilter group}.\n     * Usually the group should be created from the particular dimension associated with the same chart. If a value is\n     * given, then it will be used as the new group.\n     *\n     * If no value specified then the current group will be returned.\n     * If `name` is specified then it will be used to generate legend label.\n     * @method group\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group-map-reduce crossfilter.group}\n     * @example\n     * var index = crossfilter([]);\n     * var dimension = index.dimension(dc.pluck('key'));\n     * chart.dimension(dimension);\n     * chart.group(dimension.group(crossfilter.reduceSum()));\n     * @param {crossfilter.group} [group]\n     * @param {String} [name]\n     * @returns {crossfilter.group|dc.baseMixin}\n     */\n    _chart.group = function (group, name) {\n        if (!arguments.length) {\n            return _group;\n        }\n        _group = group;\n        _chart._groupName = name;\n        _chart.expireCache();\n        return _chart;\n    };\n\n    /**\n     * Get or set an accessor to order ordinal dimensions.  The chart uses\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#quicksort_by crossfilter.quicksort.by}\n     * to sort elements; this accessor returns the value to order on.\n     * @method ordering\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#quicksort_by crossfilter.quicksort.by}\n     * @example\n     * // Default ordering accessor\n     * _chart.ordering(dc.pluck('key'));\n     * @param {Function} [orderFunction]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.ordering = function (orderFunction) {\n        if (!arguments.length) {\n            return _ordering;\n        }\n        _ordering = orderFunction;\n        _orderSort = crossfilter.quicksort.by(_ordering);\n        _chart.expireCache();\n        return _chart;\n    };\n\n    _chart._computeOrderedGroups = function (data) {\n        var dataCopy = data.slice(0);\n\n        if (dataCopy.length <= 1) {\n            return dataCopy;\n        }\n\n        if (!_orderSort) {\n            _orderSort = crossfilter.quicksort.by(_ordering);\n        }\n\n        return _orderSort(dataCopy, 0, dataCopy.length);\n    };\n\n    /**\n     * Clear all filters associated with this chart. The same effect can be achieved by calling\n     * {@link dc.baseMixin#filter chart.filter(null)}.\n     * @method filterAll\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.filterAll = function () {\n        return _chart.filter(null);\n    };\n\n    /**\n     * Execute d3 single selection in the chart's scope using the given selector and return the d3\n     * selection.\n     *\n     * This function is **not chainable** since it does not return a chart instance; however the d3\n     * selection result can be chained to d3 function calls.\n     * @method select\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#d3_select d3.select}\n     * @example\n     * // Has the same effect as d3.select('#chart-id').select(selector)\n     * chart.select(selector)\n     * @returns {d3.selection}\n     */\n    _chart.select = function (s) {\n        return _root.select(s);\n    };\n\n    /**\n     * Execute in scope d3 selectAll using the given selector and return d3 selection result.\n     *\n     * This function is **not chainable** since it does not return a chart instance; however the d3\n     * selection result can be chained to d3 function calls.\n     * @method selectAll\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#d3_selectAll d3.selectAll}\n     * @example\n     * // Has the same effect as d3.select('#chart-id').selectAll(selector)\n     * chart.selectAll(selector)\n     * @returns {d3.selection}\n     */\n    _chart.selectAll = function (s) {\n        return _root ? _root.selectAll(s) : null;\n    };\n\n    /**\n     * Set the root SVGElement to either be an existing chart's root; or any valid [d3 single\n     * selector](https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements) specifying a dom\n     * block element such as a div; or a dom element or d3 selection. Optionally registers the chart\n     * within the chartGroup. This class is called internally on chart initialization, but be called\n     * again to relocate the chart. However, it will orphan any previously created SVGElements.\n     * @method anchor\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {anchorChart|anchorSelector|anchorNode} [parent]\n     * @param {String} [chartGroup]\n     * @returns {String|node|d3.selection|dc.baseMixin}\n     */\n    _chart.anchor = function (parent, chartGroup) {\n        if (!arguments.length) {\n            return _anchor;\n        }\n        if (dc.instanceOfChart(parent)) {\n            _anchor = parent.anchor();\n            _root = parent.root();\n            _isChild = true;\n        } else if (parent) {\n            if (parent.select && parent.classed) { // detect d3 selection\n                _anchor = parent.node();\n            } else {\n                _anchor = parent;\n            }\n            _root = d3.select(_anchor);\n            _root.classed(dc.constants.CHART_CLASS, true);\n            dc.registerChart(_chart, chartGroup);\n            _isChild = false;\n        } else {\n            throw new dc.errors.BadArgumentException('parent must be defined');\n        }\n        _chartGroup = chartGroup;\n        return _chart;\n    };\n\n    /**\n     * Returns the DOM id for the chart's anchored location.\n     * @method anchorName\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {String}\n     */\n    _chart.anchorName = function () {\n        var a = _chart.anchor();\n        if (a && a.id) {\n            return a.id;\n        }\n        if (a && a.replace) {\n            return a.replace('#', '');\n        }\n        return 'dc-chart' + _chart.chartID();\n    };\n\n    /**\n     * Returns the root element where a chart resides. Usually it will be the parent div element where\n     * the SVGElement was created. You can also pass in a new root element however this is usually handled by\n     * dc internally. Resetting the root element on a chart outside of dc internals may have\n     * unexpected consequences.\n     * @method root\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement HTMLElement}\n     * @param {HTMLElement} [rootElement]\n     * @returns {HTMLElement|dc.baseMixin}\n     */\n    _chart.root = function (rootElement) {\n        if (!arguments.length) {\n            return _root;\n        }\n        _root = rootElement;\n        return _chart;\n    };\n\n    /**\n     * Returns the top SVGElement for this specific chart. You can also pass in a new SVGElement,\n     * however this is usually handled by dc internally. Resetting the SVGElement on a chart outside\n     * of dc internals may have unexpected consequences.\n     * @method svg\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/SVGElement SVGElement}\n     * @param {SVGElement|d3.selection} [svgElement]\n     * @returns {SVGElement|d3.selection|dc.baseMixin}\n     */\n    _chart.svg = function (svgElement) {\n        if (!arguments.length) {\n            return _svg;\n        }\n        _svg = svgElement;\n        return _chart;\n    };\n\n    /**\n     * Remove the chart's SVGElements from the dom and recreate the container SVGElement.\n     * @method resetSvg\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/SVGElement SVGElement}\n     * @returns {SVGElement}\n     */\n    _chart.resetSvg = function () {\n        _chart.select('svg').remove();\n        return generateSvg();\n    };\n\n    function sizeSvg () {\n        if (_svg) {\n            _svg\n                .attr('width', _chart.width())\n                .attr('height', _chart.height());\n        }\n    }\n\n    function generateSvg () {\n        _svg = _chart.root().append('svg');\n        sizeSvg();\n        return _svg;\n    }\n\n    /**\n     * Set or get the filter printer function. The filter printer function is used to generate human\n     * friendly text for filter value(s) associated with the chart instance. The text will get shown\n     * in the `.filter element; see {@link dc.baseMixin#turnOnControls turnOnControls}.\n     *\n     * By default dc charts use a default filter printer {@link dc.printers.filters dc.printers.filters}\n     * that provides simple printing support for both single value and ranged filters.\n     * @method filterPrinter\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // for a chart with an ordinal brush, print the filters in upper case\n     * chart.filterPrinter(function(filters) {\n     *   return filters.map(function(f) { return f.toUpperCase(); }).join(', ');\n     * });\n     * // for a chart with a range brush, print the filter as start and extent\n     * chart.filterPrinter(function(filters) {\n     *   return 'start ' + dc.utils.printSingleValue(filters[0][0]) +\n     *     ' extent ' + dc.utils.printSingleValue(filters[0][1] - filters[0][0]);\n     * });\n     * @param {Function} [filterPrinterFunction=dc.printers.filters]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.filterPrinter = function (filterPrinterFunction) {\n        if (!arguments.length) {\n            return _filterPrinter;\n        }\n        _filterPrinter = filterPrinterFunction;\n        return _chart;\n    };\n\n    /**\n     * If set, use the `visibility` attribute instead of the `display` attribute for showing/hiding\n     * chart reset and filter controls, for less disruption to the layout.\n     * @method controlsUseVisibility\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {Boolean} [controlsUseVisibility=false]\n     * @returns {Boolean|dc.baseMixin}\n     **/\n    _chart.controlsUseVisibility = function (_) {\n        if (!arguments.length) {\n            return _controlsUseVisibility;\n        }\n        _controlsUseVisibility = _;\n        return _chart;\n    };\n\n    /**\n     * Turn on optional control elements within the root element. dc currently supports the\n     * following html control elements.\n     * * root.selectAll('.reset') - elements are turned on if the chart has an active filter. This type\n     * of control element is usually used to store a reset link to allow user to reset filter on a\n     * certain chart. This element will be turned off automatically if the filter is cleared.\n     * * root.selectAll('.filter') elements are turned on if the chart has an active filter. The text\n     * content of this element is then replaced with the current filter value using the filter printer\n     * function. This type of element will be turned off automatically if the filter is cleared.\n     * @method turnOnControls\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.turnOnControls = function () {\n        if (_root) {\n            var attribute = _chart.controlsUseVisibility() ? 'visibility' : 'display';\n            _chart.selectAll('.reset').style(attribute, null);\n            _chart.selectAll('.filter').text(_filterPrinter(_chart.filters())).style(attribute, null);\n        }\n        return _chart;\n    };\n\n    /**\n     * Turn off optional control elements within the root element.\n     * @method turnOffControls\n     * @memberof dc.baseMixin\n     * @see {@link dc.baseMixin#turnOnControls turnOnControls}\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.turnOffControls = function () {\n        if (_root) {\n            var attribute = _chart.controlsUseVisibility() ? 'visibility' : 'display';\n            var value = _chart.controlsUseVisibility() ? 'hidden' : 'none';\n            _chart.selectAll('.reset').style(attribute, value);\n            _chart.selectAll('.filter').style(attribute, value).text(_chart.filter());\n        }\n        return _chart;\n    };\n\n    /**\n     * Set or get the animation transition duration (in milliseconds) for this chart instance.\n     * @method transitionDuration\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {Number} [duration=750]\n     * @returns {Number|dc.baseMixin}\n     */\n    _chart.transitionDuration = function (duration) {\n        if (!arguments.length) {\n            return _transitionDuration;\n        }\n        _transitionDuration = duration;\n        return _chart;\n    };\n\n    /**\n     * Set or get the animation transition delay (in milliseconds) for this chart instance.\n     * @method transitionDelay\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {Number} [delay=0]\n     * @returns {Number|dc.baseMixin}\n     */\n    _chart.transitionDelay = function (delay) {\n        if (!arguments.length) {\n            return _transitionDelay;\n        }\n        _transitionDelay = delay;\n        return _chart;\n    };\n\n    _chart._mandatoryAttributes = function (_) {\n        if (!arguments.length) {\n            return _mandatoryAttributes;\n        }\n        _mandatoryAttributes = _;\n        return _chart;\n    };\n\n    function checkForMandatoryAttributes (a) {\n        if (!_chart[a] || !_chart[a]()) {\n            throw new dc.errors.InvalidStateException('Mandatory attribute chart.' + a +\n                ' is missing on chart[#' + _chart.anchorName() + ']');\n        }\n    }\n\n    /**\n     * Invoking this method will force the chart to re-render everything from scratch. Generally it\n     * should only be used to render the chart for the first time on the page or if you want to make\n     * sure everything is redrawn from scratch instead of relying on the default incremental redrawing\n     * behaviour.\n     * @method render\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.render = function () {\n        _height = _width = undefined; // force recalculate\n        _listeners.preRender(_chart);\n\n        if (_mandatoryAttributes) {\n            _mandatoryAttributes.forEach(checkForMandatoryAttributes);\n        }\n\n        var result = _chart._doRender();\n\n        if (_legend) {\n            _legend.render();\n        }\n\n        _chart._activateRenderlets('postRender');\n\n        return result;\n    };\n\n    _chart._activateRenderlets = function (event) {\n        _listeners.pretransition(_chart);\n        if (_chart.transitionDuration() > 0 && _svg) {\n            _svg.transition().duration(_chart.transitionDuration()).delay(_chart.transitionDelay())\n                .each('end', function () {\n                    _listeners.renderlet(_chart);\n                    if (event) {\n                        _listeners[event](_chart);\n                    }\n                });\n        } else {\n            _listeners.renderlet(_chart);\n            if (event) {\n                _listeners[event](_chart);\n            }\n        }\n    };\n\n    /**\n     * Calling redraw will cause the chart to re-render data changes incrementally. If there is no\n     * change in the underlying data dimension then calling this method will have no effect on the\n     * chart. Most chart interaction in dc will automatically trigger this method through internal\n     * events (in particular {@link dc.redrawAll dc.redrawAll}); therefore, you only need to\n     * manually invoke this function if data is manipulated outside of dc's control (for example if\n     * data is loaded in the background using\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#crossfilter_add crossfilter.add}).\n     * @method redraw\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.redraw = function () {\n        sizeSvg();\n        _listeners.preRedraw(_chart);\n\n        var result = _chart._doRedraw();\n\n        if (_legend) {\n            _legend.render();\n        }\n\n        _chart._activateRenderlets('postRedraw');\n\n        return result;\n    };\n\n    /**\n     * Gets/sets the commit handler. If the chart has a commit handler, the handler will be called when\n     * the chart's filters have changed, in order to send the filter data asynchronously to a server.\n     *\n     * Unlike other functions in dc.js, the commit handler is asynchronous. It takes two arguments:\n     * a flag indicating whether this is a render (true) or a redraw (false), and a callback to be\n     * triggered once the commit is filtered. The callback has the standard node.js continuation signature\n     * with error first and result second.\n     * @method commitHandler\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.commitHandler = function (commitHandler) {\n        if (!arguments.length) {\n            return _commitHandler;\n        }\n        _commitHandler = commitHandler;\n        return _chart;\n    };\n\n    /**\n     * Redraws all charts in the same group as this chart, typically in reaction to a filter\n     * change. If the chart has a {@link dc.baseMixin.commitFilter commitHandler}, it will\n     * be executed and waited for.\n     * @method redrawGroup\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.redrawGroup = function () {\n        if (_commitHandler) {\n            _commitHandler(false, function (error, result) {\n                if (error) {\n                    console.log(error);\n                } else {\n                    dc.redrawAll(_chart.chartGroup());\n                }\n            });\n        } else {\n            dc.redrawAll(_chart.chartGroup());\n        }\n        return _chart;\n    };\n\n    /**\n     * Renders all charts in the same group as this chart. If the chart has a\n     * {@link dc.baseMixin.commitFilter commitHandler}, it will be executed and waited for\n     * @method renderGroup\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.renderGroup = function () {\n        if (_commitHandler) {\n            _commitHandler(false, function (error, result) {\n                if (error) {\n                    console.log(error);\n                } else {\n                    dc.renderAll(_chart.chartGroup());\n                }\n            });\n        } else {\n            dc.renderAll(_chart.chartGroup());\n        }\n        return _chart;\n    };\n\n    _chart._invokeFilteredListener = function (f) {\n        if (f !== undefined) {\n            _listeners.filtered(_chart, f);\n        }\n    };\n\n    _chart._invokeZoomedListener = function () {\n        _listeners.zoomed(_chart);\n    };\n\n    var _hasFilterHandler = function (filters, filter) {\n        if (filter === null || typeof(filter) === 'undefined') {\n            return filters.length > 0;\n        }\n        return filters.some(function (f) {\n            return filter <= f && filter >= f;\n        });\n    };\n\n    /**\n     * Set or get the has filter handler. The has filter handler is a function that checks to see if\n     * the chart's current filters include a specific filter.  Using a custom has filter handler allows\n     * you to change the way filters are checked for and replaced.\n     * @method hasFilterHandler\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default has filter handler\n     * chart.hasFilterHandler(function (filters, filter) {\n     *     if (filter === null || typeof(filter) === 'undefined') {\n     *         return filters.length > 0;\n     *     }\n     *     return filters.some(function (f) {\n     *         return filter <= f && filter >= f;\n     *     });\n     * });\n     *\n     * // custom filter handler (no-op)\n     * chart.hasFilterHandler(function(filters, filter) {\n     *     return false;\n     * });\n     * @param {Function} [hasFilterHandler]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.hasFilterHandler = function (hasFilterHandler) {\n        if (!arguments.length) {\n            return _hasFilterHandler;\n        }\n        _hasFilterHandler = hasFilterHandler;\n        return _chart;\n    };\n\n    /**\n     * Check whether any active filter or a specific filter is associated with particular chart instance.\n     * This function is **not chainable**.\n     * @method hasFilter\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link dc.baseMixin#hasFilterHandler hasFilterHandler}\n     * @param {*} [filter]\n     * @returns {Boolean}\n     */\n    _chart.hasFilter = function (filter) {\n        return _hasFilterHandler(_filters, filter);\n    };\n\n    var _removeFilterHandler = function (filters, filter) {\n        for (var i = 0; i < filters.length; i++) {\n            if (filters[i] <= filter && filters[i] >= filter) {\n                filters.splice(i, 1);\n                break;\n            }\n        }\n        return filters;\n    };\n\n    /**\n     * Set or get the remove filter handler. The remove filter handler is a function that removes a\n     * filter from the chart's current filters. Using a custom remove filter handler allows you to\n     * change how filters are removed or perform additional work when removing a filter, e.g. when\n     * using a filter server other than crossfilter.\n     *\n     * Any changes should modify the `filters` array argument and return that array.\n     * @method removeFilterHandler\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default remove filter handler\n     * chart.removeFilterHandler(function (filters, filter) {\n     *     for (var i = 0; i < filters.length; i++) {\n     *         if (filters[i] <= filter && filters[i] >= filter) {\n     *             filters.splice(i, 1);\n     *             break;\n     *         }\n     *     }\n     *     return filters;\n     * });\n     *\n     * // custom filter handler (no-op)\n     * chart.removeFilterHandler(function(filters, filter) {\n     *     return filters;\n     * });\n     * @param {Function} [removeFilterHandler]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.removeFilterHandler = function (removeFilterHandler) {\n        if (!arguments.length) {\n            return _removeFilterHandler;\n        }\n        _removeFilterHandler = removeFilterHandler;\n        return _chart;\n    };\n\n    var _addFilterHandler = function (filters, filter) {\n        filters.push(filter);\n        return filters;\n    };\n\n    /**\n     * Set or get the add filter handler. The add filter handler is a function that adds a filter to\n     * the chart's filter list. Using a custom add filter handler allows you to change the way filters\n     * are added or perform additional work when adding a filter, e.g. when using a filter server other\n     * than crossfilter.\n     *\n     * Any changes should modify the `filters` array argument and return that array.\n     * @method addFilterHandler\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default add filter handler\n     * chart.addFilterHandler(function (filters, filter) {\n     *     filters.push(filter);\n     *     return filters;\n     * });\n     *\n     * // custom filter handler (no-op)\n     * chart.addFilterHandler(function(filters, filter) {\n     *     return filters;\n     * });\n     * @param {Function} [addFilterHandler]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.addFilterHandler = function (addFilterHandler) {\n        if (!arguments.length) {\n            return _addFilterHandler;\n        }\n        _addFilterHandler = addFilterHandler;\n        return _chart;\n    };\n\n    var _resetFilterHandler = function (filters) {\n        return [];\n    };\n\n    /**\n     * Set or get the reset filter handler. The reset filter handler is a function that resets the\n     * chart's filter list by returning a new list. Using a custom reset filter handler allows you to\n     * change the way filters are reset, or perform additional work when resetting the filters,\n     * e.g. when using a filter server other than crossfilter.\n     *\n     * This function should return an array.\n     * @method resetFilterHandler\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default remove filter handler\n     * function (filters) {\n     *     return [];\n     * }\n     *\n     * // custom filter handler (no-op)\n     * chart.resetFilterHandler(function(filters) {\n     *     return filters;\n     * });\n     * @param {Function} [resetFilterHandler]\n     * @returns {dc.baseMixin}\n     */\n    _chart.resetFilterHandler = function (resetFilterHandler) {\n        if (!arguments.length) {\n            return _resetFilterHandler;\n        }\n        _resetFilterHandler = resetFilterHandler;\n        return _chart;\n    };\n\n    function applyFilters () {\n        if (_chart.dimension() && _chart.dimension().filter) {\n            var fs = _filterHandler(_chart.dimension(), _filters);\n            _filters = fs ? fs : _filters;\n        }\n    }\n\n    /**\n     * Replace the chart filter. This is equivalent to calling `chart.filter(null).filter(filter)`\n     * but more efficient because the filter is only applied once.\n     *\n     * @method replaceFilter\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {*} [filter]\n     * @returns {dc.baseMixin}\n     **/\n    _chart.replaceFilter = function (filter) {\n        _filters = _resetFilterHandler(_filters);\n        _chart.filter(filter);\n    };\n\n    /**\n     * Filter the chart by the given parameter, or return the current filter if no input parameter\n     * is given.\n     *\n     * The filter parameter can take one of these forms:\n     * * A single value: the value will be toggled (added if it is not present in the current\n     * filters, removed if it is present)\n     * * An array containing a single array of values (`[[value,value,value]]`): each value is\n     * toggled\n     * * When appropriate for the chart, a {@link dc.filters dc filter object} such as\n     *   * {@link dc.filters.RangedFilter `dc.filters.RangedFilter`} for the\n     * {@link dc.coordinateGridMixin dc.coordinateGridMixin} charts\n     *   * {@link dc.filters.TwoDimensionalFilter `dc.filters.TwoDimensionalFilter`} for the\n     * {@link dc.heatMap heat map}\n     *   * {@link dc.filters.RangedTwoDimensionalFilter `dc.filters.RangedTwoDimensionalFilter`}\n     * for the {@link dc.scatterPlot scatter plot}\n     * * `null`: the filter will be reset using the\n     * {@link dc.baseMixin#resetFilterHandler resetFilterHandler}\n     *\n     * Note that this is always a toggle (even when it doesn't make sense for the filter type). If\n     * you wish to replace the current filter, either call `chart.filter(null)` first - or it's more\n     * efficient to call {@link dc.baseMixin#replaceFilter `chart.replaceFilter(filter)`} instead.\n     *\n     * Each toggle is executed by checking if the value is already present using the\n     * {@link dc.baseMixin#hasFilterHandler hasFilterHandler}; if it is not present, it is added\n     * using the {@link dc.baseMixin#addFilterHandler addFilterHandler}; if it is already present,\n     * it is removed using the {@link dc.baseMixin#removeFilterHandler removeFilterHandler}.\n     *\n     * Once the filters array has been updated, the filters are applied to the\n     * crossfilter dimension, using the {@link dc.baseMixin#filterHandler filterHandler}.\n     *\n     * Once you have set the filters, call {@link dc.baseMixin#redrawGroup `chart.redrawGroup()`}\n     * (or {@link dc.redrawAll `dc.redrawAll()`}) to redraw the chart's group.\n     * @method filter\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link dc.baseMixin#addFilterHandler addFilterHandler}\n     * @see {@link dc.baseMixin#removeFilterHandler removeFilterHandler}\n     * @see {@link dc.baseMixin#resetFilterHandler resetFilterHandler}\n     * @see {@link dc.baseMixin#filterHandler filterHandler}\n     * @example\n     * // filter by a single string\n     * chart.filter('Sunday');\n     * // filter by a single age\n     * chart.filter(18);\n     * // filter by a set of states\n     * chart.filter([['MA', 'TX', 'ND', 'WA']]);\n     * // filter by range -- note the use of dc.filters.RangedFilter, which is different\n     * // from the syntax for filtering a crossfilter dimension directly, dimension.filter([15,20])\n     * chart.filter(dc.filters.RangedFilter(15,20));\n     * @param {*} [filter]\n     * @returns {dc.baseMixin}\n     */\n    _chart.filter = function (filter) {\n        if (!arguments.length) {\n            return _filters.length > 0 ? _filters[0] : null;\n        }\n        if (filter instanceof Array && filter[0] instanceof Array && !filter.isFiltered) {\n            filter[0].forEach(function (d) {\n                if (_chart.hasFilter(d)) {\n                    _removeFilterHandler(_filters, d);\n                } else {\n                    _addFilterHandler(_filters, d);\n                }\n            });\n        } else if (filter === null) {\n            _filters = _resetFilterHandler(_filters);\n        } else {\n            if (_chart.hasFilter(filter)) {\n                _removeFilterHandler(_filters, filter);\n            } else {\n                _addFilterHandler(_filters, filter);\n            }\n        }\n        applyFilters();\n        _chart._invokeFilteredListener(filter);\n\n        if (_root !== null && _chart.hasFilter()) {\n            _chart.turnOnControls();\n        } else {\n            _chart.turnOffControls();\n        }\n\n        return _chart;\n    };\n\n    /**\n     * Returns all current filters. This method does not perform defensive cloning of the internal\n     * filter array before returning, therefore any modification of the returned array will effect the\n     * chart's internal filter storage.\n     * @method filters\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {Array<*>}\n     */\n    _chart.filters = function () {\n        return _filters;\n    };\n\n    _chart.highlightSelected = function (e) {\n        d3.select(e).classed(dc.constants.SELECTED_CLASS, true);\n        d3.select(e).classed(dc.constants.DESELECTED_CLASS, false);\n    };\n\n    _chart.fadeDeselected = function (e) {\n        d3.select(e).classed(dc.constants.SELECTED_CLASS, false);\n        d3.select(e).classed(dc.constants.DESELECTED_CLASS, true);\n    };\n\n    _chart.resetHighlight = function (e) {\n        d3.select(e).classed(dc.constants.SELECTED_CLASS, false);\n        d3.select(e).classed(dc.constants.DESELECTED_CLASS, false);\n    };\n\n    /**\n     * This function is passed to d3 as the onClick handler for each chart. The default behavior is to\n     * filter on the clicked datum (passed to the callback) and redraw the chart group.\n     * @method onClick\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {*} datum\n     */\n    _chart.onClick = function (datum) {\n        var filter = _chart.keyAccessor()(datum);\n        dc.events.trigger(function () {\n            _chart.filter(filter);\n            _chart.redrawGroup();\n        });\n    };\n\n    /**\n     * Set or get the filter handler. The filter handler is a function that performs the filter action\n     * on a specific dimension. Using a custom filter handler allows you to perform additional logic\n     * before or after filtering.\n     * @method filterHandler\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#dimension_filter crossfilter.dimension.filter}\n     * @example\n     * // the default filter handler handles all possible cases for the charts in dc.js\n     * // you can replace it with something more specialized for your own chart\n     * chart.filterHandler(function (dimension, filters) {\n     *     if (filters.length === 0) {\n     *         // the empty case (no filtering)\n     *         dimension.filter(null);\n     *     } else if (filters.length === 1 && !filters[0].isFiltered) {\n     *         // single value and not a function-based filter\n     *         dimension.filterExact(filters[0]);\n     *     } else if (filters.length === 1 && filters[0].filterType === 'RangedFilter') {\n     *         // single range-based filter\n     *         dimension.filterRange(filters[0]);\n     *     } else {\n     *         // an array of values, or an array of filter objects\n     *         dimension.filterFunction(function (d) {\n     *             for (var i = 0; i < filters.length; i++) {\n     *                 var filter = filters[i];\n     *                 if (filter.isFiltered && filter.isFiltered(d)) {\n     *                     return true;\n     *                 } else if (filter <= d && filter >= d) {\n     *                     return true;\n     *                 }\n     *             }\n     *             return false;\n     *         });\n     *     }\n     *     return filters;\n     * });\n     *\n     * // custom filter handler\n     * chart.filterHandler(function(dimension, filter){\n     *     var newFilter = filter + 10;\n     *     dimension.filter(newFilter);\n     *     return newFilter; // set the actual filter value to the new value\n     * });\n     * @param {Function} [filterHandler]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.filterHandler = function (filterHandler) {\n        if (!arguments.length) {\n            return _filterHandler;\n        }\n        _filterHandler = filterHandler;\n        return _chart;\n    };\n\n    // abstract function stub\n    _chart._doRender = function () {\n        // do nothing in base, should be overridden by sub-function\n        return _chart;\n    };\n\n    _chart._doRedraw = function () {\n        // do nothing in base, should be overridden by sub-function\n        return _chart;\n    };\n\n    _chart.legendables = function () {\n        // do nothing in base, should be overridden by sub-function\n        return [];\n    };\n\n    _chart.legendHighlight = function () {\n        // do nothing in base, should be overridden by sub-function\n    };\n\n    _chart.legendReset = function () {\n        // do nothing in base, should be overridden by sub-function\n    };\n\n    _chart.legendToggle = function () {\n        // do nothing in base, should be overriden by sub-function\n    };\n\n    _chart.isLegendableHidden = function () {\n        // do nothing in base, should be overridden by sub-function\n        return false;\n    };\n\n    /**\n     * Set or get the key accessor function. The key accessor function is used to retrieve the key\n     * value from the crossfilter group. Key values are used differently in different charts, for\n     * example keys correspond to slices in a pie chart and x axis positions in a grid coordinate chart.\n     * @method keyAccessor\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default key accessor\n     * chart.keyAccessor(function(d) { return d.key; });\n     * // custom key accessor for a multi-value crossfilter reduction\n     * chart.keyAccessor(function(p) { return p.value.absGain; });\n     * @param {Function} [keyAccessor]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.keyAccessor = function (keyAccessor) {\n        if (!arguments.length) {\n            return _keyAccessor;\n        }\n        _keyAccessor = keyAccessor;\n        return _chart;\n    };\n\n    /**\n     * Set or get the value accessor function. The value accessor function is used to retrieve the\n     * value from the crossfilter group. Group values are used differently in different charts, for\n     * example values correspond to slice sizes in a pie chart and y axis positions in a grid\n     * coordinate chart.\n     * @method valueAccessor\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default value accessor\n     * chart.valueAccessor(function(d) { return d.value; });\n     * // custom value accessor for a multi-value crossfilter reduction\n     * chart.valueAccessor(function(p) { return p.value.percentageGain; });\n     * @param {Function} [valueAccessor]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.valueAccessor = function (valueAccessor) {\n        if (!arguments.length) {\n            return _valueAccessor;\n        }\n        _valueAccessor = valueAccessor;\n        return _chart;\n    };\n\n    /**\n     * Set or get the label function. The chart class will use this function to render labels for each\n     * child element in the chart, e.g. slices in a pie chart or bubbles in a bubble chart. Not every\n     * chart supports the label function, for example line chart does not use this function\n     * at all. By default, enables labels; pass false for the second parameter if this is not desired.\n     * @method label\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default label function just return the key\n     * chart.label(function(d) { return d.key; });\n     * // label function has access to the standard d3 data binding and can get quite complicated\n     * chart.label(function(d) { return d.data.key + '(' + Math.floor(d.data.value / all.value() * 100) + '%)'; });\n     * @param {Function} [labelFunction]\n     * @param {Boolean} [enableLabels=true]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.label = function (labelFunction, enableLabels) {\n        if (!arguments.length) {\n            return _label;\n        }\n        _label = labelFunction;\n        if ((enableLabels === undefined) || enableLabels) {\n            _renderLabel = true;\n        }\n        return _chart;\n    };\n\n    /**\n     * Turn on/off label rendering\n     * @method renderLabel\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {Boolean} [renderLabel=false]\n     * @returns {Boolean|dc.baseMixin}\n     */\n    _chart.renderLabel = function (renderLabel) {\n        if (!arguments.length) {\n            return _renderLabel;\n        }\n        _renderLabel = renderLabel;\n        return _chart;\n    };\n\n    /**\n     * Set or get the title function. The chart class will use this function to render the SVGElement title\n     * (usually interpreted by browser as tooltips) for each child element in the chart, e.g. a slice\n     * in a pie chart or a bubble in a bubble chart. Almost every chart supports the title function;\n     * however in grid coordinate charts you need to turn off the brush in order to see titles, because\n     * otherwise the brush layer will block tooltip triggering.\n     * @method title\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * // default title function shows \"key: value\"\n     * chart.title(function(d) { return d.key + ': ' + d.value; });\n     * // title function has access to the standard d3 data binding and can get quite complicated\n     * chart.title(function(p) {\n     *    return p.key.getFullYear()\n     *        + '\\n'\n     *        + 'Index Gain: ' + numberFormat(p.value.absGain) + '\\n'\n     *        + 'Index Gain in Percentage: ' + numberFormat(p.value.percentageGain) + '%\\n'\n     *        + 'Fluctuation / Index Ratio: ' + numberFormat(p.value.fluctuationPercentage) + '%';\n     * });\n     * @param {Function} [titleFunction]\n     * @returns {Function|dc.baseMixin}\n     */\n    _chart.title = function (titleFunction) {\n        if (!arguments.length) {\n            return _title;\n        }\n        _title = titleFunction;\n        return _chart;\n    };\n\n    /**\n     * Turn on/off title rendering, or return the state of the render title flag if no arguments are\n     * given.\n     * @method renderTitle\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {Boolean} [renderTitle=true]\n     * @returns {Boolean|dc.baseMixin}\n     */\n    _chart.renderTitle = function (renderTitle) {\n        if (!arguments.length) {\n            return _renderTitle;\n        }\n        _renderTitle = renderTitle;\n        return _chart;\n    };\n\n    /**\n     * A renderlet is similar to an event listener on rendering event. Multiple renderlets can be added\n     * to an individual chart.  Each time a chart is rerendered or redrawn the renderlets are invoked\n     * right after the chart finishes its transitions, giving you a way to modify the SVGElements.\n     * Renderlet functions take the chart instance as the only input parameter and you can\n     * use the dc API or use raw d3 to achieve pretty much any effect.\n     *\n     * Use {@link dc.baseMixin#on on} with a 'renderlet' prefix.\n     * Generates a random key for the renderlet, which makes it hard to remove.\n     * @method renderlet\n     * @memberof dc.baseMixin\n     * @instance\n     * @deprecated\n     * @example\n     * // do this instead of .renderlet(function(chart) { ... })\n     * chart.on(\"renderlet\", function(chart){\n     *     // mix of dc API and d3 manipulation\n     *     chart.select('g.y').style('display', 'none');\n     *     // its a closure so you can also access other chart variable available in the closure scope\n     *     moveChart.filter(chart.filter());\n     * });\n     * @param {Function} renderletFunction\n     * @returns {dc.baseMixin}\n     */\n    _chart.renderlet = dc.logger.deprecate(function (renderletFunction) {\n        _chart.on('renderlet.' + dc.utils.uniqueId(), renderletFunction);\n        return _chart;\n    }, 'chart.renderlet has been deprecated.  Please use chart.on(\"renderlet.<renderletKey>\", renderletFunction)');\n\n    /**\n     * Get or set the chart group to which this chart belongs. Chart groups are rendered or redrawn\n     * together since it is expected they share the same underlying crossfilter data set.\n     * @method chartGroup\n     * @memberof dc.baseMixin\n     * @instance\n     * @param {String} [chartGroup]\n     * @returns {String|dc.baseMixin}\n     */\n    _chart.chartGroup = function (chartGroup) {\n        if (!arguments.length) {\n            return _chartGroup;\n        }\n        if (!_isChild) {\n            dc.deregisterChart(_chart, _chartGroup);\n        }\n        _chartGroup = chartGroup;\n        if (!_isChild) {\n            dc.registerChart(_chart, _chartGroup);\n        }\n        return _chart;\n    };\n\n    /**\n     * Expire the internal chart cache. dc charts cache some data internally on a per chart basis to\n     * speed up rendering and avoid unnecessary calculation; however it might be useful to clear the\n     * cache if you have changed state which will affect rendering.  For example, if you invoke\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#crossfilter_add crossfilter.add}\n     * function or reset group or dimension after rendering, it is a good idea to\n     * clear the cache to make sure charts are rendered properly.\n     * @method expireCache\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {dc.baseMixin}\n     */\n    _chart.expireCache = function () {\n        // do nothing in base, should be overridden by sub-function\n        return _chart;\n    };\n\n    /**\n     * Attach a dc.legend widget to this chart. The legend widget will automatically draw legend labels\n     * based on the color setting and names associated with each group.\n     * @method legend\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * chart.legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))\n     * @param {dc.legend} [legend]\n     * @returns {dc.legend|dc.baseMixin}\n     */\n    _chart.legend = function (legend) {\n        if (!arguments.length) {\n            return _legend;\n        }\n        _legend = legend;\n        _legend.parent(_chart);\n        return _chart;\n    };\n\n    /**\n     * Returns the internal numeric ID of the chart.\n     * @method chartID\n     * @memberof dc.baseMixin\n     * @instance\n     * @returns {String}\n     */\n    _chart.chartID = function () {\n        return _chart.__dcFlag__;\n    };\n\n    /**\n     * Set chart options using a configuration object. Each key in the object will cause the method of\n     * the same name to be called with the value to set that attribute for the chart.\n     * @method options\n     * @memberof dc.baseMixin\n     * @instance\n     * @example\n     * chart.options({dimension: myDimension, group: myGroup});\n     * @param {{}} opts\n     * @returns {dc.baseMixin}\n     */\n    _chart.options = function (opts) {\n        var applyOptions = [\n            'anchor',\n            'group',\n            'xAxisLabel',\n            'yAxisLabel',\n            'stack',\n            'title',\n            'point',\n            'getColor',\n            'overlayGeoJson'\n        ];\n\n        for (var o in opts) {\n            if (typeof(_chart[o]) === 'function') {\n                if (opts[o] instanceof Array && applyOptions.indexOf(o) !== -1) {\n                    _chart[o].apply(_chart, opts[o]);\n                } else {\n                    _chart[o].call(_chart, opts[o]);\n                }\n            } else {\n                dc.logger.debug('Not a valid option setter name: ' + o);\n            }\n        }\n        return _chart;\n    };\n\n    /**\n     * All dc chart instance supports the following listeners.\n     * Supports the following events:\n     * * `renderlet` - This listener function will be invoked after transitions after redraw and render. Replaces the\n     * deprecated {@link dc.baseMixin#renderlet renderlet} method.\n     * * `pretransition` - Like `.on('renderlet', ...)` but the event is fired before transitions start.\n     * * `preRender` - This listener function will be invoked before chart rendering.\n     * * `postRender` - This listener function will be invoked after chart finish rendering including\n     * all renderlets' logic.\n     * * `preRedraw` - This listener function will be invoked before chart redrawing.\n     * * `postRedraw` - This listener function will be invoked after chart finish redrawing\n     * including all renderlets' logic.\n     * * `filtered` - This listener function will be invoked after a filter is applied, added or removed.\n     * * `zoomed` - This listener function will be invoked after a zoom is triggered.\n     * @method on\n     * @memberof dc.baseMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Internals.md#dispatch_on d3.dispatch.on}\n     * @example\n     * .on('renderlet', function(chart, filter){...})\n     * .on('pretransition', function(chart, filter){...})\n     * .on('preRender', function(chart){...})\n     * .on('postRender', function(chart){...})\n     * .on('preRedraw', function(chart){...})\n     * .on('postRedraw', function(chart){...})\n     * .on('filtered', function(chart, filter){...})\n     * .on('zoomed', function(chart, filter){...})\n     * @param {String} event\n     * @param {Function} listener\n     * @returns {dc.baseMixin}\n     */\n    _chart.on = function (event, listener) {\n        _listeners.on(event, listener);\n        return _chart;\n    };\n\n    return _chart;\n};\n\n/**\n * Margin is a mixin that provides margin utility functions for both the Row Chart and Coordinate Grid\n * Charts.\n * @name marginMixin\n * @memberof dc\n * @mixin\n * @param {Object} _chart\n * @returns {dc.marginMixin}\n */\ndc.marginMixin = function (_chart) {\n    var _margin = {top: 10, right: 50, bottom: 30, left: 30};\n\n    /**\n     * Get or set the margins for a particular coordinate grid chart instance. The margins is stored as\n     * an associative Javascript array.\n     * @method margins\n     * @memberof dc.marginMixin\n     * @instance\n     * @example\n     * var leftMargin = chart.margins().left; // 30 by default\n     * chart.margins().left = 50;\n     * leftMargin = chart.margins().left; // now 50\n     * @param {{top: Number, right: Number, left: Number, bottom: Number}} [margins={top: 10, right: 50, bottom: 30, left: 30}]\n     * @returns {{top: Number, right: Number, left: Number, bottom: Number}|dc.marginMixin}\n     */\n    _chart.margins = function (margins) {\n        if (!arguments.length) {\n            return _margin;\n        }\n        _margin = margins;\n        return _chart;\n    };\n\n    _chart.effectiveWidth = function () {\n        return _chart.width() - _chart.margins().left - _chart.margins().right;\n    };\n\n    _chart.effectiveHeight = function () {\n        return _chart.height() - _chart.margins().top - _chart.margins().bottom;\n    };\n\n    return _chart;\n};\n\n/**\n * The Color Mixin is an abstract chart functional class providing universal coloring support\n * as a mix-in for any concrete chart implementation.\n * @name colorMixin\n * @memberof dc\n * @mixin\n * @param {Object} _chart\n * @returns {dc.colorMixin}\n */\ndc.colorMixin = function (_chart) {\n    var _colors = d3.scale.category20c();\n    var _defaultAccessor = true;\n\n    var _colorAccessor = function (d) { return _chart.keyAccessor()(d); };\n\n    /**\n     * Retrieve current color scale or set a new color scale. This methods accepts any function that\n     * operates like a d3 scale.\n     * @method colors\n     * @memberof dc.colorMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Scales.md d3.scale}\n     * @example\n     * // alternate categorical scale\n     * chart.colors(d3.scale.category20b());\n     * // ordinal scale\n     * chart.colors(d3.scale.ordinal().range(['red','green','blue']));\n     * // convenience method, the same as above\n     * chart.ordinalColors(['red','green','blue']);\n     * // set a linear scale\n     * chart.linearColors([\"#4575b4\", \"#ffffbf\", \"#a50026\"]);\n     * @param {d3.scale} [colorScale=d3.scale.category20c()]\n     * @returns {d3.scale|dc.colorMixin}\n     */\n    _chart.colors = function (colorScale) {\n        if (!arguments.length) {\n            return _colors;\n        }\n        if (colorScale instanceof Array) {\n            _colors = d3.scale.quantize().range(colorScale); // deprecated legacy support, note: this fails for ordinal domains\n        } else {\n            _colors = d3.functor(colorScale);\n        }\n        return _chart;\n    };\n\n    /**\n     * Convenience method to set the color scale to\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md#ordinal d3.scale.ordinal} with\n     * range `r`.\n     * @method ordinalColors\n     * @memberof dc.colorMixin\n     * @instance\n     * @param {Array<String>} r\n     * @returns {dc.colorMixin}\n     */\n    _chart.ordinalColors = function (r) {\n        return _chart.colors(d3.scale.ordinal().range(r));\n    };\n\n    /**\n     * Convenience method to set the color scale to an Hcl interpolated linear scale with range `r`.\n     * @method linearColors\n     * @memberof dc.colorMixin\n     * @instance\n     * @param {Array<Number>} r\n     * @returns {dc.colorMixin}\n     */\n    _chart.linearColors = function (r) {\n        return _chart.colors(d3.scale.linear()\n                             .range(r)\n                             .interpolate(d3.interpolateHcl));\n    };\n\n    /**\n     * Set or the get color accessor function. This function will be used to map a data point in a\n     * crossfilter group to a color value on the color scale. The default function uses the key\n     * accessor.\n     * @method colorAccessor\n     * @memberof dc.colorMixin\n     * @instance\n     * @example\n     * // default index based color accessor\n     * .colorAccessor(function (d, i){return i;})\n     * // color accessor for a multi-value crossfilter reduction\n     * .colorAccessor(function (d){return d.value.absGain;})\n     * @param {Function} [colorAccessor]\n     * @returns {Function|dc.colorMixin}\n     */\n    _chart.colorAccessor = function (colorAccessor) {\n        if (!arguments.length) {\n            return _colorAccessor;\n        }\n        _colorAccessor = colorAccessor;\n        _defaultAccessor = false;\n        return _chart;\n    };\n\n    // what is this?\n    _chart.defaultColorAccessor = function () {\n        return _defaultAccessor;\n    };\n\n    /**\n     * Set or get the current domain for the color mapping function. The domain must be supplied as an\n     * array.\n     *\n     * Note: previously this method accepted a callback function. Instead you may use a custom scale\n     * set by {@link dc.colorMixin#colors .colors}.\n     * @method colorDomain\n     * @memberof dc.colorMixin\n     * @instance\n     * @param {Array<String>} [domain]\n     * @returns {Array<String>|dc.colorMixin}\n     */\n    _chart.colorDomain = function (domain) {\n        if (!arguments.length) {\n            return _colors.domain();\n        }\n        _colors.domain(domain);\n        return _chart;\n    };\n\n    /**\n     * Set the domain by determining the min and max values as retrieved by\n     * {@link dc.colorMixin#colorAccessor .colorAccessor} over the chart's dataset.\n     * @method calculateColorDomain\n     * @memberof dc.colorMixin\n     * @instance\n     * @returns {dc.colorMixin}\n     */\n    _chart.calculateColorDomain = function () {\n        var newDomain = [d3.min(_chart.data(), _chart.colorAccessor()),\n                         d3.max(_chart.data(), _chart.colorAccessor())];\n        _colors.domain(newDomain);\n        return _chart;\n    };\n\n    /**\n     * Get the color for the datum d and counter i. This is used internally by charts to retrieve a color.\n     * @method getColor\n     * @memberof dc.colorMixin\n     * @instance\n     * @param {*} d\n     * @param {Number} [i]\n     * @returns {String}\n     */\n    _chart.getColor = function (d, i) {\n        return _colors(_colorAccessor.call(this, d, i));\n    };\n\n    /**\n     * **Deprecated.** Get/set the color calculator. This actually replaces the\n     * {@link dc.colorMixin#getColor getColor} method!\n     *\n     * This is not recommended, since using a {@link dc.colorMixin#colorAccessor colorAccessor} and\n     * color scale ({@link dc.colorMixin#colors .colors}) is more powerful and idiomatic d3.\n     * @method colorCalculator\n     * @memberof dc.colorMixin\n     * @instance\n     * @param {*} [colorCalculator]\n     * @returns {Function|dc.colorMixin}\n     */\n    _chart.colorCalculator = dc.logger.deprecate(function (colorCalculator) {\n        if (!arguments.length) {\n            return _chart.getColor;\n        }\n        _chart.getColor = colorCalculator;\n        return _chart;\n    }, 'colorMixin.colorCalculator has been deprecated. Please colorMixin.colors and colorMixin.colorAccessor instead');\n\n    return _chart;\n};\n\n/**\n * Coordinate Grid is an abstract base chart designed to support a number of coordinate grid based\n * concrete chart types, e.g. bar chart, line chart, and bubble chart.\n * @name coordinateGridMixin\n * @memberof dc\n * @mixin\n * @mixes dc.colorMixin\n * @mixes dc.marginMixin\n * @mixes dc.baseMixin\n * @param {Object} _chart\n * @returns {dc.coordinateGridMixin}\n */\ndc.coordinateGridMixin = function (_chart) {\n    var GRID_LINE_CLASS = 'grid-line';\n    var HORIZONTAL_CLASS = 'horizontal';\n    var VERTICAL_CLASS = 'vertical';\n    var Y_AXIS_LABEL_CLASS = 'y-axis-label';\n    var X_AXIS_LABEL_CLASS = 'x-axis-label';\n    var DEFAULT_AXIS_LABEL_PADDING = 12;\n\n    _chart = dc.colorMixin(dc.marginMixin(dc.baseMixin(_chart)));\n\n    _chart.colors(d3.scale.category10());\n    _chart._mandatoryAttributes().push('x');\n    var _parent;\n    var _g;\n    var _chartBodyG;\n\n    var _x;\n    var _xOriginalDomain;\n    var _xAxis = d3.svg.axis().orient('bottom');\n    var _xUnits = dc.units.integers;\n    var _xAxisPadding = 0;\n    var _xAxisPaddingUnit = 'day';\n    var _xElasticity = false;\n    var _xAxisLabel;\n    var _xAxisLabelPadding = 0;\n    var _lastXDomain;\n\n    var _y;\n    var _yAxis = d3.svg.axis().orient('left');\n    var _yAxisPadding = 0;\n    var _yElasticity = false;\n    var _yAxisLabel;\n    var _yAxisLabelPadding = 0;\n\n    var _brush = d3.svg.brush();\n    var _brushOn = true;\n    var _round;\n\n    var _renderHorizontalGridLine = false;\n    var _renderVerticalGridLine = false;\n\n    var _refocused = false, _resizing = false;\n    var _unitCount;\n\n    var _zoomScale = [1, Infinity];\n    var _zoomOutRestrict = true;\n\n    var _zoom = d3.behavior.zoom().on('zoom', zoomHandler);\n    var _nullZoom = d3.behavior.zoom().on('zoom', null);\n    var _hasBeenMouseZoomable = false;\n\n    var _rangeChart;\n    var _focusChart;\n\n    var _mouseZoomable = false;\n    var _clipPadding = 0;\n\n    var _outerRangeBandPadding = 0.5;\n    var _rangeBandPadding = 0;\n\n    var _useRightYAxis = false;\n\n    /**\n     * When changing the domain of the x or y scale, it is necessary to tell the chart to recalculate\n     * and redraw the axes. (`.rescale()` is called automatically when the x or y scale is replaced\n     * with {@link dc.coordinateGridMixin+x .x()} or {@link dc.coordinateGridMixin#y .y()}, and has\n     * no effect on elastic scales.)\n     * @method rescale\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {dc.coordinateGridMixin}\n     */\n    _chart.rescale = function () {\n        _unitCount = undefined;\n        _resizing = true;\n        return _chart;\n    };\n\n    _chart.resizing = function () {\n        return _resizing;\n    };\n\n    /**\n     * Get or set the range selection chart associated with this instance. Setting the range selection\n     * chart using this function will automatically update its selection brush when the current chart\n     * zooms in. In return the given range chart will also automatically attach this chart as its focus\n     * chart hence zoom in when range brush updates.\n     *\n     * Usually the range and focus charts will share a dimension. The range chart will set the zoom\n     * boundaries for the focus chart, so its dimension values must be compatible with the domain of\n     * the focus chart.\n     *\n     * See the [Nasdaq 100 Index](http://dc-js.github.com/dc.js/) example for this effect in action.\n     * @method rangeChart\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {dc.coordinateGridMixin} [rangeChart]\n     * @returns {dc.coordinateGridMixin}\n     */\n    _chart.rangeChart = function (rangeChart) {\n        if (!arguments.length) {\n            return _rangeChart;\n        }\n        _rangeChart = rangeChart;\n        _rangeChart.focusChart(_chart);\n        return _chart;\n    };\n\n    /**\n     * Get or set the scale extent for mouse zooms.\n     * @method zoomScale\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Array<Number|Date>} [extent=[1, Infinity]]\n     * @returns {Array<Number|Date>|dc.coordinateGridMixin}\n     */\n    _chart.zoomScale = function (extent) {\n        if (!arguments.length) {\n            return _zoomScale;\n        }\n        _zoomScale = extent;\n        return _chart;\n    };\n\n    /**\n     * Get or set the zoom restriction for the chart. If true limits the zoom to origional domain of the chart.\n     * @method zoomOutRestrict\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [zoomOutRestrict=true]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.zoomOutRestrict = function (zoomOutRestrict) {\n        if (!arguments.length) {\n            return _zoomOutRestrict;\n        }\n        _zoomScale[0] = zoomOutRestrict ? 1 : 0;\n        _zoomOutRestrict = zoomOutRestrict;\n        return _chart;\n    };\n\n    _chart._generateG = function (parent) {\n        if (parent === undefined) {\n            _parent = _chart.svg();\n        } else {\n            _parent = parent;\n        }\n\n        var href = window.location.href.split('#')[0];\n\n        _g = _parent.append('g');\n\n        _chartBodyG = _g.append('g').attr('class', 'chart-body')\n            .attr('transform', 'translate(' + _chart.margins().left + ', ' + _chart.margins().top + ')')\n            .attr('clip-path', 'url(' + href + '#' + getClipPathId() + ')');\n\n        return _g;\n    };\n\n    /**\n     * Get or set the root g element. This method is usually used to retrieve the g element in order to\n     * overlay custom svg drawing programatically. **Caution**: The root g element is usually generated\n     * by dc.js internals, and resetting it might produce unpredictable result.\n     * @method g\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {SVGElement} [gElement]\n     * @returns {SVGElement|dc.coordinateGridMixin}\n     */\n    _chart.g = function (gElement) {\n        if (!arguments.length) {\n            return _g;\n        }\n        _g = gElement;\n        return _chart;\n    };\n\n    /**\n     * Set or get mouse zoom capability flag (default: false). When turned on the chart will be\n     * zoomable using the mouse wheel. If the range selector chart is attached zooming will also update\n     * the range selection brush on the associated range selector chart.\n     * @method mouseZoomable\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [mouseZoomable=false]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.mouseZoomable = function (mouseZoomable) {\n        if (!arguments.length) {\n            return _mouseZoomable;\n        }\n        _mouseZoomable = mouseZoomable;\n        return _chart;\n    };\n\n    /**\n     * Retrieve the svg group for the chart body.\n     * @method chartBodyG\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {SVGElement} [chartBodyG]\n     * @returns {SVGElement}\n     */\n    _chart.chartBodyG = function (chartBodyG) {\n        if (!arguments.length) {\n            return _chartBodyG;\n        }\n        _chartBodyG = chartBodyG;\n        return _chart;\n    };\n\n    /**\n     * **mandatory**\n     *\n     * Get or set the x scale. The x scale can be any d3\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Quantitative-Scales.md quantitive scale} or\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md ordinal scale}.\n     * @method x\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Scales.md d3.scale}\n     * @example\n     * // set x to a linear scale\n     * chart.x(d3.scale.linear().domain([-2500, 2500]))\n     * // set x to a time scale to generate histogram\n     * chart.x(d3.time.scale().domain([new Date(1985, 0, 1), new Date(2012, 11, 31)]))\n     * @param {d3.scale} [xScale]\n     * @returns {d3.scale|dc.coordinateGridMixin}\n     */\n    _chart.x = function (xScale) {\n        if (!arguments.length) {\n            return _x;\n        }\n        _x = xScale;\n        _xOriginalDomain = _x.domain();\n        _chart.rescale();\n        return _chart;\n    };\n\n    _chart.xOriginalDomain = function () {\n        return _xOriginalDomain;\n    };\n\n    /**\n     * Set or get the xUnits function. The coordinate grid chart uses the xUnits function to calculate\n     * the number of data projections on x axis such as the number of bars for a bar chart or the\n     * number of dots for a line chart. This function is expected to return a Javascript array of all\n     * data points on x axis, or the number of points on the axis. [d3 time range functions\n     * d3.time.days, d3.time.months, and\n     * d3.time.years](https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Intervals.md#aliases) are all valid xUnits\n     * function. dc.js also provides a few units function, see the {@link dc.units Units Namespace} for\n     * a list of built-in units functions.\n     * @method xUnits\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @todo Add docs for utilities\n     * @example\n     * // set x units to count days\n     * chart.xUnits(d3.time.days);\n     * // set x units to count months\n     * chart.xUnits(d3.time.months);\n     *\n     * // A custom xUnits function can be used as long as it follows the following interface:\n     * // units in integer\n     * function(start, end, xDomain) {\n     *      // simply calculates how many integers in the domain\n     *      return Math.abs(end - start);\n     * };\n     *\n     * // fixed units\n     * function(start, end, xDomain) {\n     *      // be aware using fixed units will disable the focus/zoom ability on the chart\n     *      return 1000;\n     * @param {Function} [xUnits=dc.units.integers]\n     * @returns {Function|dc.coordinateGridMixin}\n     */\n    _chart.xUnits = function (xUnits) {\n        if (!arguments.length) {\n            return _xUnits;\n        }\n        _xUnits = xUnits;\n        return _chart;\n    };\n\n    /**\n     * Set or get the x axis used by a particular coordinate grid chart instance. This function is most\n     * useful when x axis customization is required. The x axis in dc.js is an instance of a\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis d3 axis object};\n     * therefore it supports any valid d3 axis manipulation.\n     *\n     * **Caution**: The x axis is usually generated internally by dc; resetting it may cause\n     * unexpected results. Note also that when used as a getter, this function is not chainable:\n     * it returns the axis, not the chart,\n     * {@link https://github.com/dc-js/dc.js/wiki/FAQ#why-does-everything-break-after-a-call-to-xaxis-or-yaxis\n     * so attempting to call chart functions after calling `.xAxis()` will fail}.\n     * @method xAxis\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis d3.svg.axis}\n     * @example\n     * // customize x axis tick format\n     * chart.xAxis().tickFormat(function(v) {return v + '%';});\n     * // customize x axis tick values\n     * chart.xAxis().tickValues([0, 100, 200, 300]);\n     * @param {d3.svg.axis} [xAxis=d3.svg.axis().orient('bottom')]\n     * @returns {d3.svg.axis|dc.coordinateGridMixin}\n     */\n    _chart.xAxis = function (xAxis) {\n        if (!arguments.length) {\n            return _xAxis;\n        }\n        _xAxis = xAxis;\n        return _chart;\n    };\n\n    /**\n     * Turn on/off elastic x axis behavior. If x axis elasticity is turned on, then the grid chart will\n     * attempt to recalculate the x axis range whenever a redraw event is triggered.\n     * @method elasticX\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [elasticX=false]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.elasticX = function (elasticX) {\n        if (!arguments.length) {\n            return _xElasticity;\n        }\n        _xElasticity = elasticX;\n        return _chart;\n    };\n\n    /**\n     * Set or get x axis padding for the elastic x axis. The padding will be added to both end of the x\n     * axis if elasticX is turned on; otherwise it is ignored.\n     *\n     * Padding can be an integer or percentage in string (e.g. '10%'). Padding can be applied to\n     * number or date x axes.  When padding a date axis, an integer represents number of units being padded\n     * and a percentage string will be treated the same as an integer. The unit will be determined by the\n     * xAxisPaddingUnit variable.\n     * @method xAxisPadding\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Number|String} [padding=0]\n     * @returns {Number|String|dc.coordinateGridMixin}\n     */\n    _chart.xAxisPadding = function (padding) {\n        if (!arguments.length) {\n            return _xAxisPadding;\n        }\n        _xAxisPadding = padding;\n        return _chart;\n    };\n\n    /**\n     * Set or get x axis padding unit for the elastic x axis. The padding unit will determine which unit to\n     * use when applying xAxis padding if elasticX is turned on and if x-axis uses a time dimension;\n     * otherwise it is ignored.\n     *\n     * Padding unit is a string that will be used when the padding is calculated. Available parameters are\n     * the available d3 time intervals; see\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Intervals.md#interval d3.time.interval}.\n     * @method xAxisPaddingUnit\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {String} [unit='days']\n     * @returns {String|dc.coordinateGridMixin}\n     */\n    _chart.xAxisPaddingUnit = function (unit) {\n        if (!arguments.length) {\n            return _xAxisPaddingUnit;\n        }\n        _xAxisPaddingUnit = unit;\n        return _chart;\n    };\n\n    /**\n     * Returns the number of units displayed on the x axis using the unit measure configured by\n     * {@link dc.coordinateGridMixin#xUnits xUnits}.\n     * @method xUnitCount\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {Number}\n     */\n    _chart.xUnitCount = function () {\n        if (_unitCount === undefined) {\n            var units = _chart.xUnits()(_chart.x().domain()[0], _chart.x().domain()[1], _chart.x().domain());\n\n            if (units instanceof Array) {\n                _unitCount = units.length;\n            } else {\n                _unitCount = units;\n            }\n        }\n\n        return _unitCount;\n    };\n\n    /**\n     * Gets or sets whether the chart should be drawn with a right axis instead of a left axis. When\n     * used with a chart in a composite chart, allows both left and right Y axes to be shown on a\n     * chart.\n     * @method useRightYAxis\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [useRightYAxis=false]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.useRightYAxis = function (useRightYAxis) {\n        if (!arguments.length) {\n            return _useRightYAxis;\n        }\n        _useRightYAxis = useRightYAxis;\n        return _chart;\n    };\n\n    /**\n     * Returns true if the chart is using ordinal xUnits ({@link dc.units.ordinal dc.units.ordinal}, or false\n     * otherwise. Most charts behave differently with ordinal data and use the result of this method to\n     * trigger the appropriate logic.\n     * @method isOrdinal\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {Boolean}\n     */\n    _chart.isOrdinal = function () {\n        return _chart.xUnits() === dc.units.ordinal;\n    };\n\n    _chart._useOuterPadding = function () {\n        return true;\n    };\n\n    _chart._ordinalXDomain = function () {\n        var groups = _chart._computeOrderedGroups(_chart.data());\n        return groups.map(_chart.keyAccessor());\n    };\n\n    function compareDomains (d1, d2) {\n        return !d1 || !d2 || d1.length !== d2.length ||\n            d1.some(function (elem, i) { return (elem && d2[i]) ? elem.toString() !== d2[i].toString() : elem === d2[i]; });\n    }\n\n    function prepareXAxis (g, render) {\n        if (!_chart.isOrdinal()) {\n            if (_chart.elasticX()) {\n                _x.domain([_chart.xAxisMin(), _chart.xAxisMax()]);\n            }\n        } else { // _chart.isOrdinal()\n            if (_chart.elasticX() || _x.domain().length === 0) {\n                _x.domain(_chart._ordinalXDomain());\n            }\n        }\n\n        // has the domain changed?\n        var xdom = _x.domain();\n        if (render || compareDomains(_lastXDomain, xdom)) {\n            _chart.rescale();\n        }\n        _lastXDomain = xdom;\n\n        // please can't we always use rangeBands for bar charts?\n        if (_chart.isOrdinal()) {\n            _x.rangeBands([0, _chart.xAxisLength()], _rangeBandPadding,\n                          _chart._useOuterPadding() ? _outerRangeBandPadding : 0);\n        } else {\n            _x.range([0, _chart.xAxisLength()]);\n        }\n\n        _xAxis = _xAxis.scale(_chart.x());\n\n        renderVerticalGridLines(g);\n    }\n\n    _chart.renderXAxis = function (g) {\n        var axisXG = g.select('g.x');\n\n        if (axisXG.empty()) {\n            axisXG = g.append('g')\n                .attr('class', 'axis x')\n                .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart._xAxisY() + ')');\n        }\n\n        var axisXLab = g.select('text.' + X_AXIS_LABEL_CLASS);\n        if (axisXLab.empty() && _chart.xAxisLabel()) {\n            axisXLab = g.append('text')\n                .attr('class', X_AXIS_LABEL_CLASS)\n                .attr('transform', 'translate(' + (_chart.margins().left + _chart.xAxisLength() / 2) + ',' +\n                      (_chart.height() - _xAxisLabelPadding) + ')')\n                .attr('text-anchor', 'middle');\n        }\n        if (_chart.xAxisLabel() && axisXLab.text() !== _chart.xAxisLabel()) {\n            axisXLab.text(_chart.xAxisLabel());\n        }\n\n        dc.transition(axisXG, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart._xAxisY() + ')')\n            .call(_xAxis);\n        dc.transition(axisXLab, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', 'translate(' + (_chart.margins().left + _chart.xAxisLength() / 2) + ',' +\n                  (_chart.height() - _xAxisLabelPadding) + ')');\n    };\n\n    function renderVerticalGridLines (g) {\n        var gridLineG = g.select('g.' + VERTICAL_CLASS);\n\n        if (_renderVerticalGridLine) {\n            if (gridLineG.empty()) {\n                gridLineG = g.insert('g', ':first-child')\n                    .attr('class', GRID_LINE_CLASS + ' ' + VERTICAL_CLASS)\n                    .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart.margins().top + ')');\n            }\n\n            var ticks = _xAxis.tickValues() ? _xAxis.tickValues() :\n                    (typeof _x.ticks === 'function' ? _x.ticks(_xAxis.ticks()[0]) : _x.domain());\n\n            var lines = gridLineG.selectAll('line')\n                .data(ticks);\n\n            // enter\n            var linesGEnter = lines.enter()\n                .append('line')\n                .attr('x1', function (d) {\n                    return _x(d);\n                })\n                .attr('y1', _chart._xAxisY() - _chart.margins().top)\n                .attr('x2', function (d) {\n                    return _x(d);\n                })\n                .attr('y2', 0)\n                .attr('opacity', 0);\n            dc.transition(linesGEnter, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('opacity', 1);\n\n            // update\n            dc.transition(lines, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('x1', function (d) {\n                    return _x(d);\n                })\n                .attr('y1', _chart._xAxisY() - _chart.margins().top)\n                .attr('x2', function (d) {\n                    return _x(d);\n                })\n                .attr('y2', 0);\n\n            // exit\n            lines.exit().remove();\n        } else {\n            gridLineG.selectAll('line').remove();\n        }\n    }\n\n    _chart._xAxisY = function () {\n        return (_chart.height() - _chart.margins().bottom);\n    };\n\n    _chart.xAxisLength = function () {\n        return _chart.effectiveWidth();\n    };\n\n    /**\n     * Set or get the x axis label. If setting the label, you may optionally include additional padding to\n     * the margin to make room for the label. By default the padded is set to 12 to accomodate the text height.\n     * @method xAxisLabel\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {String} [labelText]\n     * @param {Number} [padding=12]\n     * @returns {String}\n     */\n    _chart.xAxisLabel = function (labelText, padding) {\n        if (!arguments.length) {\n            return _xAxisLabel;\n        }\n        _xAxisLabel = labelText;\n        _chart.margins().bottom -= _xAxisLabelPadding;\n        _xAxisLabelPadding = (padding === undefined) ? DEFAULT_AXIS_LABEL_PADDING : padding;\n        _chart.margins().bottom += _xAxisLabelPadding;\n        return _chart;\n    };\n\n    _chart._prepareYAxis = function (g) {\n        if (_y === undefined || _chart.elasticY()) {\n            if (_y === undefined) {\n                _y = d3.scale.linear();\n            }\n            var min = _chart.yAxisMin() || 0,\n                max = _chart.yAxisMax() || 0;\n            _y.domain([min, max]).rangeRound([_chart.yAxisHeight(), 0]);\n        }\n\n        _y.range([_chart.yAxisHeight(), 0]);\n        _yAxis = _yAxis.scale(_y);\n\n        if (_useRightYAxis) {\n            _yAxis.orient('right');\n        }\n\n        _chart._renderHorizontalGridLinesForAxis(g, _y, _yAxis);\n    };\n\n    _chart.renderYAxisLabel = function (axisClass, text, rotation, labelXPosition) {\n        labelXPosition = labelXPosition || _yAxisLabelPadding;\n\n        var axisYLab = _chart.g().select('text.' + Y_AXIS_LABEL_CLASS + '.' + axisClass + '-label');\n        var labelYPosition = (_chart.margins().top + _chart.yAxisHeight() / 2);\n        if (axisYLab.empty() && text) {\n            axisYLab = _chart.g().append('text')\n                .attr('transform', 'translate(' + labelXPosition + ',' + labelYPosition + '),rotate(' + rotation + ')')\n                .attr('class', Y_AXIS_LABEL_CLASS + ' ' + axisClass + '-label')\n                .attr('text-anchor', 'middle')\n                .text(text);\n        }\n        if (text && axisYLab.text() !== text) {\n            axisYLab.text(text);\n        }\n        dc.transition(axisYLab, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', 'translate(' + labelXPosition + ',' + labelYPosition + '),rotate(' + rotation + ')');\n    };\n\n    _chart.renderYAxisAt = function (axisClass, axis, position) {\n        var axisYG = _chart.g().select('g.' + axisClass);\n        if (axisYG.empty()) {\n            axisYG = _chart.g().append('g')\n                .attr('class', 'axis ' + axisClass)\n                .attr('transform', 'translate(' + position + ',' + _chart.margins().top + ')');\n        }\n\n        dc.transition(axisYG, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', 'translate(' + position + ',' + _chart.margins().top + ')')\n            .call(axis);\n    };\n\n    _chart.renderYAxis = function () {\n        var axisPosition = _useRightYAxis ? (_chart.width() - _chart.margins().right) : _chart._yAxisX();\n        _chart.renderYAxisAt('y', _yAxis, axisPosition);\n        var labelPosition = _useRightYAxis ? (_chart.width() - _yAxisLabelPadding) : _yAxisLabelPadding;\n        var rotation = _useRightYAxis ? 90 : -90;\n        _chart.renderYAxisLabel('y', _chart.yAxisLabel(), rotation, labelPosition);\n    };\n\n    _chart._renderHorizontalGridLinesForAxis = function (g, scale, axis) {\n        var gridLineG = g.select('g.' + HORIZONTAL_CLASS);\n\n        if (_renderHorizontalGridLine) {\n            var ticks = axis.tickValues() ? axis.tickValues() : scale.ticks(axis.ticks()[0]);\n\n            if (gridLineG.empty()) {\n                gridLineG = g.insert('g', ':first-child')\n                    .attr('class', GRID_LINE_CLASS + ' ' + HORIZONTAL_CLASS)\n                    .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart.margins().top + ')');\n            }\n\n            var lines = gridLineG.selectAll('line')\n                .data(ticks);\n\n            // enter\n            var linesGEnter = lines.enter()\n                .append('line')\n                .attr('x1', 1)\n                .attr('y1', function (d) {\n                    return scale(d);\n                })\n                .attr('x2', _chart.xAxisLength())\n                .attr('y2', function (d) {\n                    return scale(d);\n                })\n                .attr('opacity', 0);\n            dc.transition(linesGEnter, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('opacity', 1);\n\n            // update\n            dc.transition(lines, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('x1', 1)\n                .attr('y1', function (d) {\n                    return scale(d);\n                })\n                .attr('x2', _chart.xAxisLength())\n                .attr('y2', function (d) {\n                    return scale(d);\n                });\n\n            // exit\n            lines.exit().remove();\n        } else {\n            gridLineG.selectAll('line').remove();\n        }\n    };\n\n    _chart._yAxisX = function () {\n        return _chart.useRightYAxis() ? _chart.width() - _chart.margins().right : _chart.margins().left;\n    };\n\n    /**\n     * Set or get the y axis label. If setting the label, you may optionally include additional padding\n     * to the margin to make room for the label. By default the padding is set to 12 to accommodate the\n     * text height.\n     * @method yAxisLabel\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {String} [labelText]\n     * @param {Number} [padding=12]\n     * @returns {String|dc.coordinateGridMixin}\n     */\n    _chart.yAxisLabel = function (labelText, padding) {\n        if (!arguments.length) {\n            return _yAxisLabel;\n        }\n        _yAxisLabel = labelText;\n        _chart.margins().left -= _yAxisLabelPadding;\n        _yAxisLabelPadding = (padding === undefined) ? DEFAULT_AXIS_LABEL_PADDING : padding;\n        _chart.margins().left += _yAxisLabelPadding;\n        return _chart;\n    };\n\n    /**\n     * Get or set the y scale. The y scale is typically automatically determined by the chart implementation.\n     * @method y\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Scales.md d3.scale}\n     * @param {d3.scale} [yScale]\n     * @returns {d3.scale|dc.coordinateGridMixin}\n     */\n    _chart.y = function (yScale) {\n        if (!arguments.length) {\n            return _y;\n        }\n        _y = yScale;\n        _chart.rescale();\n        return _chart;\n    };\n\n    /**\n     * Set or get the y axis used by the coordinate grid chart instance. This function is most useful\n     * when y axis customization is required. The y axis in dc.js is simply an instance of a [d3 axis\n     * object](https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis); therefore it supports any\n     * valid d3 axis manipulation.\n     *\n     * **Caution**: The y axis is usually generated internally by dc; resetting it may cause\n     * unexpected results.  Note also that when used as a getter, this function is not chainable: it\n     * returns the axis, not the chart,\n     * {@link https://github.com/dc-js/dc.js/wiki/FAQ#why-does-everything-break-after-a-call-to-xaxis-or-yaxis\n     * so attempting to call chart functions after calling `.yAxis()` will fail}.\n     * @method yAxis\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis d3.svg.axis}\n     * @example\n     * // customize y axis tick format\n     * chart.yAxis().tickFormat(function(v) {return v + '%';});\n     * // customize y axis tick values\n     * chart.yAxis().tickValues([0, 100, 200, 300]);\n     * @param {d3.svg.axis} [yAxis=d3.svg.axis().orient('left')]\n     * @returns {d3.svg.axis|dc.coordinateGridMixin}\n     */\n    _chart.yAxis = function (yAxis) {\n        if (!arguments.length) {\n            return _yAxis;\n        }\n        _yAxis = yAxis;\n        return _chart;\n    };\n\n    /**\n     * Turn on/off elastic y axis behavior. If y axis elasticity is turned on, then the grid chart will\n     * attempt to recalculate the y axis range whenever a redraw event is triggered.\n     * @method elasticY\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [elasticY=false]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.elasticY = function (elasticY) {\n        if (!arguments.length) {\n            return _yElasticity;\n        }\n        _yElasticity = elasticY;\n        return _chart;\n    };\n\n    /**\n     * Turn on/off horizontal grid lines.\n     * @method renderHorizontalGridLines\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [renderHorizontalGridLines=false]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.renderHorizontalGridLines = function (renderHorizontalGridLines) {\n        if (!arguments.length) {\n            return _renderHorizontalGridLine;\n        }\n        _renderHorizontalGridLine = renderHorizontalGridLines;\n        return _chart;\n    };\n\n    /**\n     * Turn on/off vertical grid lines.\n     * @method renderVerticalGridLines\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [renderVerticalGridLines=false]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.renderVerticalGridLines = function (renderVerticalGridLines) {\n        if (!arguments.length) {\n            return _renderVerticalGridLine;\n        }\n        _renderVerticalGridLine = renderVerticalGridLines;\n        return _chart;\n    };\n\n    /**\n     * Calculates the minimum x value to display in the chart. Includes xAxisPadding if set.\n     * @method xAxisMin\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {*}\n     */\n    _chart.xAxisMin = function () {\n        var min = d3.min(_chart.data(), function (e) {\n            return _chart.keyAccessor()(e);\n        });\n        return dc.utils.subtract(min, _xAxisPadding, _xAxisPaddingUnit);\n    };\n\n    /**\n     * Calculates the maximum x value to display in the chart. Includes xAxisPadding if set.\n     * @method xAxisMax\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {*}\n     */\n    _chart.xAxisMax = function () {\n        var max = d3.max(_chart.data(), function (e) {\n            return _chart.keyAccessor()(e);\n        });\n        return dc.utils.add(max, _xAxisPadding, _xAxisPaddingUnit);\n    };\n\n    /**\n     * Calculates the minimum y value to display in the chart. Includes yAxisPadding if set.\n     * @method yAxisMin\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {*}\n     */\n    _chart.yAxisMin = function () {\n        var min = d3.min(_chart.data(), function (e) {\n            return _chart.valueAccessor()(e);\n        });\n        return dc.utils.subtract(min, _yAxisPadding);\n    };\n\n    /**\n     * Calculates the maximum y value to display in the chart. Includes yAxisPadding if set.\n     * @method yAxisMax\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @returns {*}\n     */\n    _chart.yAxisMax = function () {\n        var max = d3.max(_chart.data(), function (e) {\n            return _chart.valueAccessor()(e);\n        });\n        return dc.utils.add(max, _yAxisPadding);\n    };\n\n    /**\n     * Set or get y axis padding for the elastic y axis. The padding will be added to the top and\n     * bottom of the y axis if elasticY is turned on; otherwise it is ignored.\n     *\n     * Padding can be an integer or percentage in string (e.g. '10%'). Padding can be applied to\n     * number or date axes. When padding a date axis, an integer represents number of days being padded\n     * and a percentage string will be treated the same as an integer.\n     * @method yAxisPadding\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Number|String} [padding=0]\n     * @returns {Number|dc.coordinateGridMixin}\n     */\n    _chart.yAxisPadding = function (padding) {\n        if (!arguments.length) {\n            return _yAxisPadding;\n        }\n        _yAxisPadding = padding;\n        return _chart;\n    };\n\n    _chart.yAxisHeight = function () {\n        return _chart.effectiveHeight();\n    };\n\n    /**\n     * Set or get the rounding function used to quantize the selection when brushing is enabled.\n     * @method round\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @example\n     * // set x unit round to by month, this will make sure range selection brush will\n     * // select whole months\n     * chart.round(d3.time.month.round);\n     * @param {Function} [round]\n     * @returns {Function|dc.coordinateGridMixin}\n     */\n    _chart.round = function (round) {\n        if (!arguments.length) {\n            return _round;\n        }\n        _round = round;\n        return _chart;\n    };\n\n    _chart._rangeBandPadding = function (_) {\n        if (!arguments.length) {\n            return _rangeBandPadding;\n        }\n        _rangeBandPadding = _;\n        return _chart;\n    };\n\n    _chart._outerRangeBandPadding = function (_) {\n        if (!arguments.length) {\n            return _outerRangeBandPadding;\n        }\n        _outerRangeBandPadding = _;\n        return _chart;\n    };\n\n    dc.override(_chart, 'filter', function (_) {\n        if (!arguments.length) {\n            return _chart._filter();\n        }\n\n        _chart._filter(_);\n\n        if (_) {\n            _chart.brush().extent(_);\n        } else {\n            _chart.brush().clear();\n        }\n\n        return _chart;\n    });\n\n    _chart.brush = function (_) {\n        if (!arguments.length) {\n            return _brush;\n        }\n        _brush = _;\n        return _chart;\n    };\n\n    function brushHeight () {\n        return _chart._xAxisY() - _chart.margins().top;\n    }\n\n    _chart.renderBrush = function (g) {\n        if (_brushOn) {\n            _brush.on('brush', _chart._brushing);\n            _brush.on('brushstart', _chart._disableMouseZoom);\n            _brush.on('brushend', configureMouseZoom);\n\n            var gBrush = g.append('g')\n                .attr('class', 'brush')\n                .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart.margins().top + ')')\n                .call(_brush.x(_chart.x()));\n            _chart.setBrushY(gBrush, false);\n            _chart.setHandlePaths(gBrush);\n\n            if (_chart.hasFilter()) {\n                _chart.redrawBrush(g, false);\n            }\n        }\n    };\n\n    _chart.setHandlePaths = function (gBrush) {\n        gBrush.selectAll('.resize').append('path').attr('d', _chart.resizeHandlePath);\n    };\n\n    _chart.setBrushY = function (gBrush) {\n        gBrush.selectAll('rect')\n            .attr('height', brushHeight());\n        gBrush.selectAll('.resize path')\n            .attr('d', _chart.resizeHandlePath);\n    };\n\n    _chart.extendBrush = function () {\n        var extent = _brush.extent();\n        if (_chart.round()) {\n            extent[0] = extent.map(_chart.round())[0];\n            extent[1] = extent.map(_chart.round())[1];\n\n            _g.select('.brush')\n                .call(_brush.extent(extent));\n        }\n        return extent;\n    };\n\n    _chart.brushIsEmpty = function (extent) {\n        return _brush.empty() || !extent || extent[1] <= extent[0];\n    };\n\n    _chart._brushing = function () {\n        var extent = _chart.extendBrush();\n\n        _chart.redrawBrush(_g, false);\n\n        if (_chart.brushIsEmpty(extent)) {\n            dc.events.trigger(function () {\n                _chart.filter(null);\n                _chart.redrawGroup();\n            }, dc.constants.EVENT_DELAY);\n        } else {\n            var rangedFilter = dc.filters.RangedFilter(extent[0], extent[1]);\n\n            dc.events.trigger(function () {\n                _chart.replaceFilter(rangedFilter);\n                _chart.redrawGroup();\n            }, dc.constants.EVENT_DELAY);\n        }\n    };\n\n    _chart.redrawBrush = function (g, doTransition) {\n        if (_brushOn) {\n            if (_chart.filter() && _chart.brush().empty()) {\n                _chart.brush().extent(_chart.filter());\n            }\n\n            var gBrush = dc.optionalTransition(doTransition, _chart.transitionDuration(), _chart.transitionDelay())(g.select('g.brush'));\n            _chart.setBrushY(gBrush);\n            gBrush.call(_chart.brush()\n                      .x(_chart.x())\n                      .extent(_chart.brush().extent()));\n        }\n\n        _chart.fadeDeselectedArea();\n    };\n\n    _chart.fadeDeselectedArea = function () {\n        // do nothing, sub-chart should override this function\n    };\n\n    // borrowed from Crossfilter example\n    _chart.resizeHandlePath = function (d) {\n        var e = +(d === 'e'), x = e ? 1 : -1, y = brushHeight() / 3;\n        return 'M' + (0.5 * x) + ',' + y +\n            'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6) +\n            'V' + (2 * y - 6) +\n            'A6,6 0 0 ' + e + ' ' + (0.5 * x) + ',' + (2 * y) +\n            'Z' +\n            'M' + (2.5 * x) + ',' + (y + 8) +\n            'V' + (2 * y - 8) +\n            'M' + (4.5 * x) + ',' + (y + 8) +\n            'V' + (2 * y - 8);\n    };\n\n    function getClipPathId () {\n        return _chart.anchorName().replace(/[ .#=\\[\\]\"]/g, '-') + '-clip';\n    }\n\n    /**\n     * Get or set the padding in pixels for the clip path. Once set padding will be applied evenly to\n     * the top, left, right, and bottom when the clip path is generated. If set to zero, the clip area\n     * will be exactly the chart body area minus the margins.\n     * @method clipPadding\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Number} [padding=5]\n     * @returns {Number|dc.coordinateGridMixin}\n     */\n    _chart.clipPadding = function (padding) {\n        if (!arguments.length) {\n            return _clipPadding;\n        }\n        _clipPadding = padding;\n        return _chart;\n    };\n\n    function generateClipPath () {\n        var defs = dc.utils.appendOrSelect(_parent, 'defs');\n        // cannot select <clippath> elements; bug in WebKit, must select by id\n        // https://groups.google.com/forum/#!topic/d3-js/6EpAzQ2gU9I\n        var id = getClipPathId();\n        var chartBodyClip = dc.utils.appendOrSelect(defs, '#' + id, 'clipPath').attr('id', id);\n\n        var padding = _clipPadding * 2;\n\n        dc.utils.appendOrSelect(chartBodyClip, 'rect')\n            .attr('width', _chart.xAxisLength() + padding)\n            .attr('height', _chart.yAxisHeight() + padding)\n            .attr('transform', 'translate(-' + _clipPadding + ', -' + _clipPadding + ')');\n    }\n\n    _chart._preprocessData = function () {};\n\n    _chart._doRender = function () {\n        _chart.resetSvg();\n\n        _chart._preprocessData();\n\n        _chart._generateG();\n        generateClipPath();\n\n        drawChart(true);\n\n        configureMouseZoom();\n\n        return _chart;\n    };\n\n    _chart._doRedraw = function () {\n        _chart._preprocessData();\n\n        drawChart(false);\n        generateClipPath();\n\n        return _chart;\n    };\n\n    function drawChart (render) {\n        if (_chart.isOrdinal()) {\n            _brushOn = false;\n        }\n\n        prepareXAxis(_chart.g(), render);\n        _chart._prepareYAxis(_chart.g());\n\n        _chart.plotData();\n\n        if (_chart.elasticX() || _resizing || render) {\n            _chart.renderXAxis(_chart.g());\n        }\n\n        if (_chart.elasticY() || _resizing || render) {\n            _chart.renderYAxis(_chart.g());\n        }\n\n        if (render) {\n            _chart.renderBrush(_chart.g(), false);\n        } else {\n            _chart.redrawBrush(_chart.g(), _resizing);\n        }\n        _chart.fadeDeselectedArea();\n        _resizing = false;\n    }\n\n    function configureMouseZoom () {\n        if (_mouseZoomable) {\n            _chart._enableMouseZoom();\n        } else if (_hasBeenMouseZoomable) {\n            _chart._disableMouseZoom();\n        }\n    }\n\n    _chart._enableMouseZoom = function () {\n        _hasBeenMouseZoomable = true;\n        _zoom.x(_chart.x())\n            .scaleExtent(_zoomScale)\n            .size([_chart.width(), _chart.height()])\n            .duration(_chart.transitionDuration());\n        _chart.root().call(_zoom);\n    };\n\n    _chart._disableMouseZoom = function () {\n        _chart.root().call(_nullZoom);\n    };\n\n    function zoomHandler () {\n        _refocused = true;\n        if (_zoomOutRestrict) {\n            var constraint = _xOriginalDomain;\n            if (_rangeChart) {\n                constraint = intersectExtents(constraint, _rangeChart.x().domain());\n            }\n            var constrained = constrainExtent(_chart.x().domain(), constraint);\n            if (constrained) {\n                _chart.x().domain(constrained);\n            }\n        }\n\n        var domain = _chart.x().domain();\n        var domFilter = dc.filters.RangedFilter(domain[0], domain[1]);\n\n        _chart.replaceFilter(domFilter);\n        _chart.rescale();\n        _chart.redraw();\n\n        if (_rangeChart && !rangesEqual(_chart.filter(), _rangeChart.filter())) {\n            dc.events.trigger(function () {\n                _rangeChart.replaceFilter(domFilter);\n                _rangeChart.redraw();\n            });\n        }\n\n        _chart._invokeZoomedListener();\n\n        dc.events.trigger(function () {\n            _chart.redrawGroup();\n        }, dc.constants.EVENT_DELAY);\n\n        _refocused = !rangesEqual(domain, _xOriginalDomain);\n    }\n\n    function intersectExtents (ext1, ext2) {\n        if (ext1[0] > ext2[1] || ext1[1] < ext2[0]) {\n            console.warn('could not intersect extents');\n        }\n        return [Math.max(ext1[0], ext2[0]), Math.min(ext1[1], ext2[1])];\n    }\n\n    function constrainExtent (extent, constraint) {\n        var size = extent[1] - extent[0];\n        if (extent[0] < constraint[0]) {\n            return [constraint[0], Math.min(constraint[1], dc.utils.add(constraint[0], size, 'millis'))];\n        } else if (extent[1] > constraint[1]) {\n            return [Math.max(constraint[0], dc.utils.subtract(constraint[1], size, 'millis')), constraint[1]];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Zoom this chart to focus on the given range. The given range should be an array containing only\n     * 2 elements (`[start, end]`) defining a range in the x domain. If the range is not given or set\n     * to null, then the zoom will be reset. _For focus to work elasticX has to be turned off;\n     * otherwise focus will be ignored.\n     * @method focus\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @example\n     * chart.on('renderlet', function(chart) {\n     *     // smooth the rendering through event throttling\n     *     dc.events.trigger(function(){\n     *          // focus some other chart to the range selected by user on this chart\n     *          someOtherChart.focus(chart.filter());\n     *     });\n     * })\n     * @param {Array<Number>} [range]\n     */\n    _chart.focus = function (range) {\n        if (hasRangeSelected(range)) {\n            _chart.x().domain(range);\n        } else {\n            _chart.x().domain(_xOriginalDomain);\n        }\n\n        _zoom.x(_chart.x());\n        zoomHandler();\n    };\n\n    _chart.refocused = function () {\n        return _refocused;\n    };\n\n    _chart.focusChart = function (c) {\n        if (!arguments.length) {\n            return _focusChart;\n        }\n        _focusChart = c;\n        _chart.on('filtered', function (chart) {\n            if (!chart.filter()) {\n                dc.events.trigger(function () {\n                    _focusChart.x().domain(_focusChart.xOriginalDomain());\n                });\n            } else if (!rangesEqual(chart.filter(), _focusChart.filter())) {\n                dc.events.trigger(function () {\n                    _focusChart.focus(chart.filter());\n                });\n            }\n        });\n        return _chart;\n    };\n\n    function rangesEqual (range1, range2) {\n        if (!range1 && !range2) {\n            return true;\n        } else if (!range1 || !range2) {\n            return false;\n        } else if (range1.length === 0 && range2.length === 0) {\n            return true;\n        } else if (range1[0].valueOf() === range2[0].valueOf() &&\n            range1[1].valueOf() === range2[1].valueOf()) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Turn on/off the brush-based range filter. When brushing is on then user can drag the mouse\n     * across a chart with a quantitative scale to perform range filtering based on the extent of the\n     * brush, or click on the bars of an ordinal bar chart or slices of a pie chart to filter and\n     * un-filter them. However turning on the brush filter will disable other interactive elements on\n     * the chart such as highlighting, tool tips, and reference lines. Zooming will still be possible\n     * if enabled, but only via scrolling (panning will be disabled.)\n     * @method brushOn\n     * @memberof dc.coordinateGridMixin\n     * @instance\n     * @param {Boolean} [brushOn=true]\n     * @returns {Boolean|dc.coordinateGridMixin}\n     */\n    _chart.brushOn = function (brushOn) {\n        if (!arguments.length) {\n            return _brushOn;\n        }\n        _brushOn = brushOn;\n        return _chart;\n    };\n\n    function hasRangeSelected (range) {\n        return range instanceof Array && range.length > 1;\n    }\n\n    return _chart;\n};\n\n/**\n * Stack Mixin is an mixin that provides cross-chart support of stackability using d3.layout.stack.\n * @name stackMixin\n * @memberof dc\n * @mixin\n * @param {Object} _chart\n * @returns {dc.stackMixin}\n */\ndc.stackMixin = function (_chart) {\n\n    function prepareValues (layer, layerIdx) {\n        var valAccessor = layer.accessor || _chart.valueAccessor();\n        layer.name = String(layer.name || layerIdx);\n        layer.values = layer.group.all().map(function (d, i) {\n            return {\n                x: _chart.keyAccessor()(d, i),\n                y: layer.hidden ? null : valAccessor(d, i),\n                data: d,\n                layer: layer.name,\n                hidden: layer.hidden\n            };\n        });\n\n        layer.values = layer.values.filter(domainFilter());\n        return layer.values;\n    }\n\n    var _stackLayout = d3.layout.stack()\n        .values(prepareValues);\n\n    var _stack = [];\n    var _titles = {};\n\n    var _hidableStacks = false;\n\n    function domainFilter () {\n        if (!_chart.x()) {\n            return d3.functor(true);\n        }\n        var xDomain = _chart.x().domain();\n        if (_chart.isOrdinal()) {\n            // TODO #416\n            //var domainSet = d3.set(xDomain);\n            return function () {\n                return true; //domainSet.has(p.x);\n            };\n        }\n        if (_chart.elasticX()) {\n            return function () { return true; };\n        }\n        return function (p) {\n            //return true;\n            return p.x >= xDomain[0] && p.x <= xDomain[xDomain.length - 1];\n        };\n    }\n\n    /**\n     * Stack a new crossfilter group onto this chart with an optional custom value accessor. All stacks\n     * in the same chart will share the same key accessor and therefore the same set of keys.\n     *\n     * For example, in a stacked bar chart, the bars of each stack will be positioned using the same set\n     * of keys on the x axis, while stacked vertically. If name is specified then it will be used to\n     * generate the legend label.\n     * @method stack\n     * @memberof dc.stackMixin\n     * @instance\n     * @see {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group-map-reduce crossfilter.group}\n     * @example\n     * // stack group using default accessor\n     * chart.stack(valueSumGroup)\n     * // stack group using custom accessor\n     * .stack(avgByDayGroup, function(d){return d.value.avgByDay;});\n     * @param {crossfilter.group} group\n     * @param {String} [name]\n     * @param {Function} [accessor]\n     * @returns {Array<{group: crossfilter.group, name: String, accessor: Function}>|dc.stackMixin}\n     */\n    _chart.stack = function (group, name, accessor) {\n        if (!arguments.length) {\n            return _stack;\n        }\n\n        if (arguments.length <= 2) {\n            accessor = name;\n        }\n\n        var layer = {group: group};\n        if (typeof name === 'string') {\n            layer.name = name;\n        }\n        if (typeof accessor === 'function') {\n            layer.accessor = accessor;\n        }\n        _stack.push(layer);\n\n        return _chart;\n    };\n\n    dc.override(_chart, 'group', function (g, n, f) {\n        if (!arguments.length) {\n            return _chart._group();\n        }\n        _stack = [];\n        _titles = {};\n        _chart.stack(g, n);\n        if (f) {\n            _chart.valueAccessor(f);\n        }\n        return _chart._group(g, n);\n    });\n\n    /**\n     * Allow named stacks to be hidden or shown by clicking on legend items.\n     * This does not affect the behavior of hideStack or showStack.\n     * @method hidableStacks\n     * @memberof dc.stackMixin\n     * @instance\n     * @param {Boolean} [hidableStacks=false]\n     * @returns {Boolean|dc.stackMixin}\n     */\n    _chart.hidableStacks = function (hidableStacks) {\n        if (!arguments.length) {\n            return _hidableStacks;\n        }\n        _hidableStacks = hidableStacks;\n        return _chart;\n    };\n\n    function findLayerByName (n) {\n        var i = _stack.map(dc.pluck('name')).indexOf(n);\n        return _stack[i];\n    }\n\n    /**\n     * Hide all stacks on the chart with the given name.\n     * The chart must be re-rendered for this change to appear.\n     * @method hideStack\n     * @memberof dc.stackMixin\n     * @instance\n     * @param {String} stackName\n     * @returns {dc.stackMixin}\n     */\n    _chart.hideStack = function (stackName) {\n        var layer = findLayerByName(stackName);\n        if (layer) {\n            layer.hidden = true;\n        }\n        return _chart;\n    };\n\n    /**\n     * Show all stacks on the chart with the given name.\n     * The chart must be re-rendered for this change to appear.\n     * @method showStack\n     * @memberof dc.stackMixin\n     * @instance\n     * @param {String} stackName\n     * @returns {dc.stackMixin}\n     */\n    _chart.showStack = function (stackName) {\n        var layer = findLayerByName(stackName);\n        if (layer) {\n            layer.hidden = false;\n        }\n        return _chart;\n    };\n\n    _chart.getValueAccessorByIndex = function (index) {\n        return _stack[index].accessor || _chart.valueAccessor();\n    };\n\n    _chart.yAxisMin = function () {\n        var min = d3.min(flattenStack(), function (p) {\n            return (p.y < 0) ? (p.y + p.y0) : p.y0;\n        });\n\n        return dc.utils.subtract(min, _chart.yAxisPadding());\n\n    };\n\n    _chart.yAxisMax = function () {\n        var max = d3.max(flattenStack(), function (p) {\n            return (p.y > 0) ? (p.y + p.y0) : p.y0;\n        });\n\n        return dc.utils.add(max, _chart.yAxisPadding());\n    };\n\n    function flattenStack () {\n        var valueses = _chart.data().map(function (layer) { return layer.values; });\n        return Array.prototype.concat.apply([], valueses);\n    }\n\n    _chart.xAxisMin = function () {\n        var min = d3.min(flattenStack(), dc.pluck('x'));\n        return dc.utils.subtract(min, _chart.xAxisPadding(), _chart.xAxisPaddingUnit());\n    };\n\n    _chart.xAxisMax = function () {\n        var max = d3.max(flattenStack(), dc.pluck('x'));\n        return dc.utils.add(max, _chart.xAxisPadding(), _chart.xAxisPaddingUnit());\n    };\n\n    /**\n     * Set or get the title function. Chart class will use this function to render svg title (usually interpreted by\n     * browser as tooltips) for each child element in the chart, i.e. a slice in a pie chart or a bubble in a bubble chart.\n     * Almost every chart supports title function however in grid coordinate chart you need to turn off brush in order to\n     * use title otherwise the brush layer will block tooltip trigger.\n     *\n     * If the first argument is a stack name, the title function will get or set the title for that stack. If stackName\n     * is not provided, the first stack is implied.\n     * @method title\n     * @memberof dc.stackMixin\n     * @instance\n     * @example\n     * // set a title function on 'first stack'\n     * chart.title('first stack', function(d) { return d.key + ': ' + d.value; });\n     * // get a title function from 'second stack'\n     * var secondTitleFunction = chart.title('second stack');\n     * @param {String} [stackName]\n     * @param {Function} [titleAccessor]\n     * @returns {String|dc.stackMixin}\n     */\n    dc.override(_chart, 'title', function (stackName, titleAccessor) {\n        if (!stackName) {\n            return _chart._title();\n        }\n\n        if (typeof stackName === 'function') {\n            return _chart._title(stackName);\n        }\n        if (stackName === _chart._groupName && typeof titleAccessor === 'function') {\n            return _chart._title(titleAccessor);\n        }\n\n        if (typeof titleAccessor !== 'function') {\n            return _titles[stackName] || _chart._title();\n        }\n\n        _titles[stackName] = titleAccessor;\n\n        return _chart;\n    });\n\n    /**\n     * Gets or sets the stack layout algorithm, which computes a baseline for each stack and\n     * propagates it to the next.\n     * @method stackLayout\n     * @memberof dc.stackMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Stack-Layout.md d3.layout.stack}\n     * @param {Function} [stack=d3.layout.stack]\n     * @returns {Function|dc.stackMixin}\n     */\n    _chart.stackLayout = function (stack) {\n        if (!arguments.length) {\n            return _stackLayout;\n        }\n        _stackLayout = stack;\n        if (_stackLayout.values() === d3.layout.stack().values()) {\n            _stackLayout.values(prepareValues);\n        }\n        return _chart;\n    };\n\n    function visability (l) {\n        return !l.hidden;\n    }\n\n    _chart.data(function () {\n        var layers = _stack.filter(visability);\n        return layers.length ? _chart.stackLayout()(layers) : [];\n    });\n\n    _chart._ordinalXDomain = function () {\n        var flat = flattenStack().map(dc.pluck('data'));\n        var ordered = _chart._computeOrderedGroups(flat);\n        return ordered.map(_chart.keyAccessor());\n    };\n\n    _chart.colorAccessor(function (d) {\n        var layer = this.layer || this.name || d.name || d.layer;\n        return layer;\n    });\n\n    _chart.legendables = function () {\n        return _stack.map(function (layer, i) {\n            return {\n                chart: _chart,\n                name: layer.name,\n                hidden: layer.hidden || false,\n                color: _chart.getColor.call(layer, layer.values, i)\n            };\n        });\n    };\n\n    _chart.isLegendableHidden = function (d) {\n        var layer = findLayerByName(d.name);\n        return layer ? layer.hidden : false;\n    };\n\n    _chart.legendToggle = function (d) {\n        if (_hidableStacks) {\n            if (_chart.isLegendableHidden(d)) {\n                _chart.showStack(d.name);\n            } else {\n                _chart.hideStack(d.name);\n            }\n            //_chart.redraw();\n            _chart.renderGroup();\n        }\n    };\n\n    return _chart;\n};\n\n/**\n * Cap is a mixin that groups small data elements below a _cap_ into an *others* grouping for both the\n * Row and Pie Charts.\n *\n * The top ordered elements in the group up to the cap amount will be kept in the chart, and the rest\n * will be replaced with an *others* element, with value equal to the sum of the replaced values. The\n * keys of the elements below the cap limit are recorded in order to filter by those keys when the\n * others* element is clicked.\n * @name capMixin\n * @memberof dc\n * @mixin\n * @param {Object} _chart\n * @returns {dc.capMixin}\n */\ndc.capMixin = function (_chart) {\n\n    var _cap = Infinity;\n\n    var _othersLabel = 'Others';\n\n    var _othersGrouper = function (topRows) {\n        var topRowsSum = d3.sum(topRows, _chart.valueAccessor()),\n            allRows = _chart.group().all(),\n            allRowsSum = d3.sum(allRows, _chart.valueAccessor()),\n            topKeys = topRows.map(_chart.keyAccessor()),\n            allKeys = allRows.map(_chart.keyAccessor()),\n            topSet = d3.set(topKeys),\n            others = allKeys.filter(function (d) {return !topSet.has(d);});\n        if (allRowsSum > topRowsSum) {\n            return topRows.concat([{\n                'others': others,\n                'key': _chart.othersLabel(),\n                'value': allRowsSum - topRowsSum\n            }]);\n        }\n        return topRows;\n    };\n\n    _chart.cappedKeyAccessor = function (d, i) {\n        if (d.others) {\n            return d.key;\n        }\n        return _chart.keyAccessor()(d, i);\n    };\n\n    _chart.cappedValueAccessor = function (d, i) {\n        if (d.others) {\n            return d.value;\n        }\n        return _chart.valueAccessor()(d, i);\n    };\n\n    _chart.data(function (group) {\n        if (_cap === Infinity) {\n            return _chart._computeOrderedGroups(group.all());\n        } else {\n            var topRows = group.top(_cap); // ordered by crossfilter group order (default value)\n            topRows = _chart._computeOrderedGroups(topRows); // re-order using ordering (default key)\n            if (_othersGrouper) {\n                return _othersGrouper(topRows);\n            }\n            return topRows;\n        }\n    });\n\n    /**\n     * Get or set the count of elements to that will be included in the cap. If there is an\n     * {@link dc.capMixin#othersGrouper othersGrouper}, any further elements will be combined in an\n     * extra element with its name determined by {@link dc.capMixin#othersLabel othersLabel}.\n     *\n     * Up through dc.js 2.0.*, capping uses\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_top group.top(N)},\n     * which selects the largest items according to\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_order group.order()}.\n     * The chart then sorts the items according to {@link dc.baseMixin#ordering baseMixin.ordering()}.\n     * So the two values essentially have to agree, but if the former is incorrect (it's easy to\n     * forget about `group.order()`), the latter will mask the problem. This also makes\n     * {@link https://github.com/dc-js/dc.js/wiki/FAQ#fake-groups fake groups} difficult to\n     * implement.\n     *\n     * In dc.js 2.1 and forward, only\n     * {@link https://github.com/crossfilter/crossfilter/wiki/API-Reference#group_all group.all()}\n     * and `baseMixin.ordering()` are used.\n     * @method cap\n     * @memberof dc.capMixin\n     * @instance\n     * @param {Number} [count=Infinity]\n     * @returns {Number|dc.capMixin}\n     */\n    _chart.cap = function (count) {\n        if (!arguments.length) {\n            return _cap;\n        }\n        _cap = count;\n        return _chart;\n    };\n\n    /**\n     * Get or set the label for *Others* slice when slices cap is specified.\n     * @method othersLabel\n     * @memberof dc.capMixin\n     * @instance\n     * @param {String} [label=\"Others\"]\n     * @returns {String|dc.capMixin}\n     */\n    _chart.othersLabel = function (label) {\n        if (!arguments.length) {\n            return _othersLabel;\n        }\n        _othersLabel = label;\n        return _chart;\n    };\n\n    /**\n     * Get or set the grouper function that will perform the insertion of data for the *Others* slice\n     * if the slices cap is specified. If set to a falsy value, no others will be added. By default the\n     * grouper function computes the sum of all values below the cap.\n     * @method othersGrouper\n     * @memberof dc.capMixin\n     * @instance\n     * @example\n     * // Do not show others\n     * chart.othersGrouper(null);\n     * // Default others grouper\n     * chart.othersGrouper(function (topRows) {\n     *    var topRowsSum = d3.sum(topRows, _chart.valueAccessor()),\n     *        allRows = _chart.group().all(),\n     *        allRowsSum = d3.sum(allRows, _chart.valueAccessor()),\n     *        topKeys = topRows.map(_chart.keyAccessor()),\n     *        allKeys = allRows.map(_chart.keyAccessor()),\n     *        topSet = d3.set(topKeys),\n     *        others = allKeys.filter(function (d) {return !topSet.has(d);});\n     *    if (allRowsSum > topRowsSum) {\n     *        return topRows.concat([{\n     *            'others': others,\n     *            'key': _chart.othersLabel(),\n     *            'value': allRowsSum - topRowsSum\n     *        }]);\n     *    }\n     *    return topRows;\n     * });\n     * // Custom others grouper\n     * chart.othersGrouper(function (data) {\n     *     // compute the value for others, presumably the sum of all values below the cap\n     *     var othersSum  = yourComputeOthersValueLogic(data)\n     *\n     *     // the keys are needed to properly filter when the others element is clicked\n     *     var othersKeys = yourComputeOthersKeysArrayLogic(data);\n     *\n     *     // add the others row to the dataset\n     *     data.push({'key': 'Others', 'value': othersSum, 'others': othersKeys });\n     *\n     *     return data;\n     * });\n     * @param {Function} [grouperFunction]\n     * @returns {Function|dc.capMixin}\n     */\n    _chart.othersGrouper = function (grouperFunction) {\n        if (!arguments.length) {\n            return _othersGrouper;\n        }\n        _othersGrouper = grouperFunction;\n        return _chart;\n    };\n\n    dc.override(_chart, 'onClick', function (d) {\n        if (d.others) {\n            _chart.filter([d.others]);\n        }\n        _chart._onClick(d);\n    });\n\n    return _chart;\n};\n\n/**\n * This Mixin provides reusable functionalities for any chart that needs to visualize data using bubbles.\n * @name bubbleMixin\n * @memberof dc\n * @mixin\n * @mixes dc.colorMixin\n * @param {Object} _chart\n * @returns {dc.bubbleMixin}\n */\ndc.bubbleMixin = function (_chart) {\n    var _maxBubbleRelativeSize = 0.3;\n    var _minRadiusWithLabel = 10;\n\n    _chart.BUBBLE_NODE_CLASS = 'node';\n    _chart.BUBBLE_CLASS = 'bubble';\n    _chart.MIN_RADIUS = 10;\n\n    _chart = dc.colorMixin(_chart);\n\n    _chart.renderLabel(true);\n\n    _chart.data(function (group) {\n        return group.top(Infinity);\n    });\n\n    var _r = d3.scale.linear().domain([0, 100]);\n\n    var _rValueAccessor = function (d) {\n        return d.r;\n    };\n\n    /**\n     * Get or set the bubble radius scale. By default the bubble chart uses\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Quantitative-Scales.md#linear d3.scale.linear().domain([0, 100])}\n     * as its radius scale.\n     * @method r\n     * @memberof dc.bubbleMixin\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Scales.md d3.scale}\n     * @param {d3.scale} [bubbleRadiusScale=d3.scale.linear().domain([0, 100])]\n     * @returns {d3.scale|dc.bubbleMixin}\n     */\n    _chart.r = function (bubbleRadiusScale) {\n        if (!arguments.length) {\n            return _r;\n        }\n        _r = bubbleRadiusScale;\n        return _chart;\n    };\n\n    /**\n     * Get or set the radius value accessor function. If set, the radius value accessor function will\n     * be used to retrieve a data value for each bubble. The data retrieved then will be mapped using\n     * the r scale to the actual bubble radius. This allows you to encode a data dimension using bubble\n     * size.\n     * @method radiusValueAccessor\n     * @memberof dc.bubbleMixin\n     * @instance\n     * @param {Function} [radiusValueAccessor]\n     * @returns {Function|dc.bubbleMixin}\n     */\n    _chart.radiusValueAccessor = function (radiusValueAccessor) {\n        if (!arguments.length) {\n            return _rValueAccessor;\n        }\n        _rValueAccessor = radiusValueAccessor;\n        return _chart;\n    };\n\n    _chart.rMin = function () {\n        var min = d3.min(_chart.data(), function (e) {\n            return _chart.radiusValueAccessor()(e);\n        });\n        return min;\n    };\n\n    _chart.rMax = function () {\n        var max = d3.max(_chart.data(), function (e) {\n            return _chart.radiusValueAccessor()(e);\n        });\n        return max;\n    };\n\n    _chart.bubbleR = function (d) {\n        var value = _chart.radiusValueAccessor()(d);\n        var r = _chart.r()(value);\n        if (isNaN(r) || value <= 0) {\n            r = 0;\n        }\n        return r;\n    };\n\n    var labelFunction = function (d) {\n        return _chart.label()(d);\n    };\n\n    var shouldLabel = function (d) {\n        return (_chart.bubbleR(d) > _minRadiusWithLabel);\n    };\n\n    var labelOpacity = function (d) {\n        return shouldLabel(d) ? 1 : 0;\n    };\n\n    var labelPointerEvent = function (d) {\n        return shouldLabel(d) ? 'all' : 'none';\n    };\n\n    _chart._doRenderLabel = function (bubbleGEnter) {\n        if (_chart.renderLabel()) {\n            var label = bubbleGEnter.select('text');\n\n            if (label.empty()) {\n                label = bubbleGEnter.append('text')\n                    .attr('text-anchor', 'middle')\n                    .attr('dy', '.3em')\n                    .on('click', _chart.onClick);\n            }\n\n            label\n                .attr('opacity', 0)\n                .attr('pointer-events', labelPointerEvent)\n                .text(labelFunction);\n            dc.transition(label, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('opacity', labelOpacity);\n        }\n    };\n\n    _chart.doUpdateLabels = function (bubbleGEnter) {\n        if (_chart.renderLabel()) {\n            var labels = bubbleGEnter.select('text')\n                .attr('pointer-events', labelPointerEvent)\n                .text(labelFunction);\n            dc.transition(labels, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('opacity', labelOpacity);\n        }\n    };\n\n    var titleFunction = function (d) {\n        return _chart.title()(d);\n    };\n\n    _chart._doRenderTitles = function (g) {\n        if (_chart.renderTitle()) {\n            var title = g.select('title');\n\n            if (title.empty()) {\n                g.append('title').text(titleFunction);\n            }\n        }\n    };\n\n    _chart.doUpdateTitles = function (g) {\n        if (_chart.renderTitle()) {\n            g.select('title').text(titleFunction);\n        }\n    };\n\n    /**\n     * Get or set the minimum radius. This will be used to initialize the radius scale's range.\n     * @method minRadius\n     * @memberof dc.bubbleMixin\n     * @instance\n     * @param {Number} [radius=10]\n     * @returns {Number|dc.bubbleMixin}\n     */\n    _chart.minRadius = function (radius) {\n        if (!arguments.length) {\n            return _chart.MIN_RADIUS;\n        }\n        _chart.MIN_RADIUS = radius;\n        return _chart;\n    };\n\n    /**\n     * Get or set the minimum radius for label rendering. If a bubble's radius is less than this value\n     * then no label will be rendered.\n     * @method minRadiusWithLabel\n     * @memberof dc.bubbleMixin\n     * @instance\n     * @param {Number} [radius=10]\n     * @returns {Number|dc.bubbleMixin}\n     */\n\n    _chart.minRadiusWithLabel = function (radius) {\n        if (!arguments.length) {\n            return _minRadiusWithLabel;\n        }\n        _minRadiusWithLabel = radius;\n        return _chart;\n    };\n\n    /**\n     * Get or set the maximum relative size of a bubble to the length of x axis. This value is useful\n     * when the difference in radius between bubbles is too great.\n     * @method maxBubbleRelativeSize\n     * @memberof dc.bubbleMixin\n     * @instance\n     * @param {Number} [relativeSize=0.3]\n     * @returns {Number|dc.bubbleMixin}\n     */\n    _chart.maxBubbleRelativeSize = function (relativeSize) {\n        if (!arguments.length) {\n            return _maxBubbleRelativeSize;\n        }\n        _maxBubbleRelativeSize = relativeSize;\n        return _chart;\n    };\n\n    _chart.fadeDeselectedArea = function () {\n        if (_chart.hasFilter()) {\n            _chart.selectAll('g.' + _chart.BUBBLE_NODE_CLASS).each(function (d) {\n                if (_chart.isSelectedNode(d)) {\n                    _chart.highlightSelected(this);\n                } else {\n                    _chart.fadeDeselected(this);\n                }\n            });\n        } else {\n            _chart.selectAll('g.' + _chart.BUBBLE_NODE_CLASS).each(function () {\n                _chart.resetHighlight(this);\n            });\n        }\n    };\n\n    _chart.isSelectedNode = function (d) {\n        return _chart.hasFilter(d.key);\n    };\n\n    _chart.onClick = function (d) {\n        var filter = d.key;\n        dc.events.trigger(function () {\n            _chart.filter(filter);\n            _chart.redrawGroup();\n        });\n    };\n\n    return _chart;\n};\n\n/**\n * The pie chart implementation is usually used to visualize a small categorical distribution.  The pie\n * chart uses keyAccessor to determine the slices, and valueAccessor to calculate the size of each\n * slice relative to the sum of all values. Slices are ordered by {@link dc.baseMixin#ordering ordering}\n * which defaults to sorting by key.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * @class pieChart\n * @memberof dc\n * @mixes dc.capMixin\n * @mixes dc.colorMixin\n * @mixes dc.baseMixin\n * @example\n * // create a pie chart under #chart-container1 element using the default global chart group\n * var chart1 = dc.pieChart('#chart-container1');\n * // create a pie chart under #chart-container2 element using chart group A\n * var chart2 = dc.pieChart('#chart-container2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.pieChart}\n */\ndc.pieChart = function (parent, chartGroup) {\n    var DEFAULT_MIN_ANGLE_FOR_LABEL = 0.5;\n\n    var _sliceCssClass = 'pie-slice';\n    var _labelCssClass = 'pie-label';\n    var _sliceGroupCssClass = 'pie-slice-group';\n    var _labelGroupCssClass = 'pie-label-group';\n    var _emptyCssClass = 'empty-chart';\n    var _emptyTitle = 'empty';\n\n    var _radius,\n        _givenRadius, // specified radius, if any\n        _innerRadius = 0,\n        _externalRadiusPadding = 0;\n\n    var _g;\n    var _cx;\n    var _cy;\n    var _minAngleForLabel = DEFAULT_MIN_ANGLE_FOR_LABEL;\n    var _externalLabelRadius;\n    var _drawPaths = false;\n    var _chart = dc.capMixin(dc.colorMixin(dc.baseMixin({})));\n\n    _chart.colorAccessor(_chart.cappedKeyAccessor);\n\n    _chart.title(function (d) {\n        return _chart.cappedKeyAccessor(d) + ': ' + _chart.cappedValueAccessor(d);\n    });\n\n    /**\n     * Get or set the maximum number of slices the pie chart will generate. The top slices are determined by\n     * value from high to low. Other slices exeeding the cap will be rolled up into one single *Others* slice.\n     * @method slicesCap\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [cap]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.slicesCap = _chart.cap;\n\n    _chart.label(_chart.cappedKeyAccessor);\n    _chart.renderLabel(true);\n\n    _chart.transitionDuration(350);\n    _chart.transitionDelay(0);\n\n    _chart._doRender = function () {\n        _chart.resetSvg();\n\n        _g = _chart.svg()\n            .append('g')\n            .attr('transform', 'translate(' + _chart.cx() + ',' + _chart.cy() + ')');\n\n        _g.append('g').attr('class', _sliceGroupCssClass);\n        _g.append('g').attr('class', _labelGroupCssClass);\n\n        drawChart();\n\n        return _chart;\n    };\n\n    function drawChart () {\n        // set radius on basis of chart dimension if missing\n        _radius = _givenRadius ? _givenRadius : d3.min([_chart.width(), _chart.height()]) / 2;\n\n        var arc = buildArcs();\n\n        var pie = pieLayout();\n        var pieData;\n        // if we have data...\n        if (d3.sum(_chart.data(), _chart.valueAccessor())) {\n            pieData = pie(_chart.data());\n            _g.classed(_emptyCssClass, false);\n        } else {\n            // otherwise we'd be getting NaNs, so override\n            // note: abuse others for its ignoring the value accessor\n            pieData = pie([{key: _emptyTitle, value: 1, others: [_emptyTitle]}]);\n            _g.classed(_emptyCssClass, true);\n        }\n\n        if (_g) {\n            var slices = _g.select('g.' + _sliceGroupCssClass)\n                .selectAll('g.' + _sliceCssClass)\n                .data(pieData);\n\n            var labels = _g.select('g.' + _labelGroupCssClass)\n                .selectAll('text.' + _labelCssClass)\n                .data(pieData);\n\n            createElements(slices, labels, arc, pieData);\n\n            updateElements(pieData, arc);\n\n            removeElements(slices, labels);\n\n            highlightFilter();\n\n            dc.transition(_g, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('transform', 'translate(' + _chart.cx() + ',' + _chart.cy() + ')');\n        }\n    }\n\n    function createElements (slices, labels, arc, pieData) {\n        var slicesEnter = createSliceNodes(slices);\n\n        createSlicePath(slicesEnter, arc);\n\n        createTitles(slicesEnter);\n\n        createLabels(labels, pieData, arc);\n    }\n\n    function createSliceNodes (slices) {\n        var slicesEnter = slices\n            .enter()\n            .append('g')\n            .attr('class', function (d, i) {\n                return _sliceCssClass + ' _' + i;\n            });\n        return slicesEnter;\n    }\n\n    function createSlicePath (slicesEnter, arc) {\n        var slicePath = slicesEnter.append('path')\n            .attr('fill', fill)\n            .on('click', onClick)\n            .attr('d', function (d, i) {\n                return safeArc(d, i, arc);\n            });\n\n        var transition = dc.transition(slicePath, _chart.transitionDuration(), _chart.transitionDelay());\n        if (transition.attrTween) {\n            transition.attrTween('d', tweenPie);\n        }\n    }\n\n    function createTitles (slicesEnter) {\n        if (_chart.renderTitle()) {\n            slicesEnter.append('title').text(function (d) {\n                return _chart.title()(d.data);\n            });\n        }\n    }\n\n    _chart._applyLabelText = function (labels) {\n        labels\n            .text(function (d) {\n                var data = d.data;\n                if ((sliceHasNoData(data) || sliceTooSmall(d)) && !isSelectedSlice(d)) {\n                    return '';\n                }\n                return _chart.label()(d.data);\n            });\n    };\n\n    function positionLabels (labels, arc) {\n        _chart._applyLabelText(labels);\n        dc.transition(labels, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', function (d) {\n                return labelPosition(d, arc);\n            })\n            .attr('text-anchor', 'middle');\n    }\n\n    function highlightSlice (i, whether) {\n        _chart.select('g.pie-slice._' + i)\n            .classed('highlight', whether);\n    }\n\n    function createLabels (labels, pieData, arc) {\n        if (_chart.renderLabel()) {\n            var labelsEnter = labels\n                .enter()\n                .append('text')\n                .attr('class', function (d, i) {\n                    var classes = _sliceCssClass + ' ' + _labelCssClass + ' _' + i;\n                    if (_externalLabelRadius) {\n                        classes += ' external';\n                    }\n                    return classes;\n                })\n                .on('click', onClick)\n                .on('mouseover', function (d, i) {\n                    highlightSlice(i, true);\n                })\n                .on('mouseout', function (d, i) {\n                    highlightSlice(i, false);\n                });\n            positionLabels(labelsEnter, arc);\n            if (_externalLabelRadius && _drawPaths) {\n                updateLabelPaths(pieData, arc);\n            }\n        }\n    }\n\n    function updateLabelPaths (pieData, arc) {\n        var polyline = _g.selectAll('polyline.' + _sliceCssClass)\n                .data(pieData);\n\n        polyline\n                .enter()\n                .append('polyline')\n                .attr('class', function (d, i) {\n                    return 'pie-path _' + i + ' ' + _sliceCssClass;\n                })\n                .on('click', onClick)\n                .on('mouseover', function (d, i) {\n                    highlightSlice(i, true);\n                })\n                .on('mouseout', function (d, i) {\n                    highlightSlice(i, false);\n                });\n\n        polyline.exit().remove();\n        var arc2 = d3.svg.arc()\n                .outerRadius(_radius - _externalRadiusPadding + _externalLabelRadius)\n                .innerRadius(_radius - _externalRadiusPadding);\n        var transition = dc.transition(polyline, _chart.transitionDuration(), _chart.transitionDelay());\n        // this is one rare case where d3.selection differs from d3.transition\n        if (transition.attrTween) {\n            transition\n                .attrTween('points', function (d) {\n                    var current = this._current || d;\n                    current = {startAngle: current.startAngle, endAngle: current.endAngle};\n                    var interpolate = d3.interpolate(current, d);\n                    this._current = interpolate(0);\n                    return function (t) {\n                        var d2 = interpolate(t);\n                        return [arc.centroid(d2), arc2.centroid(d2)];\n                    };\n                });\n        } else {\n            transition.attr('points', function (d) {\n                return [arc.centroid(d), arc2.centroid(d)];\n            });\n        }\n        transition.style('visibility', function (d) {\n            return d.endAngle - d.startAngle < 0.0001 ? 'hidden' : 'visible';\n        });\n\n    }\n\n    function updateElements (pieData, arc) {\n        updateSlicePaths(pieData, arc);\n        updateLabels(pieData, arc);\n        updateTitles(pieData);\n    }\n\n    function updateSlicePaths (pieData, arc) {\n        var slicePaths = _g.selectAll('g.' + _sliceCssClass)\n            .data(pieData)\n            .select('path')\n            .attr('d', function (d, i) {\n                return safeArc(d, i, arc);\n            });\n        var transition = dc.transition(slicePaths, _chart.transitionDuration(), _chart.transitionDelay());\n        if (transition.attrTween) {\n            transition.attrTween('d', tweenPie);\n        }\n        transition.attr('fill', fill);\n    }\n\n    function updateLabels (pieData, arc) {\n        if (_chart.renderLabel()) {\n            var labels = _g.selectAll('text.' + _labelCssClass)\n                .data(pieData);\n            positionLabels(labels, arc);\n            if (_externalLabelRadius && _drawPaths) {\n                updateLabelPaths(pieData, arc);\n            }\n        }\n    }\n\n    function updateTitles (pieData) {\n        if (_chart.renderTitle()) {\n            _g.selectAll('g.' + _sliceCssClass)\n                .data(pieData)\n                .select('title')\n                .text(function (d) {\n                    return _chart.title()(d.data);\n                });\n        }\n    }\n\n    function removeElements (slices, labels) {\n        slices.exit().remove();\n        labels.exit().remove();\n    }\n\n    function highlightFilter () {\n        if (_chart.hasFilter()) {\n            _chart.selectAll('g.' + _sliceCssClass).each(function (d) {\n                if (isSelectedSlice(d)) {\n                    _chart.highlightSelected(this);\n                } else {\n                    _chart.fadeDeselected(this);\n                }\n            });\n        } else {\n            _chart.selectAll('g.' + _sliceCssClass).each(function () {\n                _chart.resetHighlight(this);\n            });\n        }\n    }\n\n    /**\n     * Get or set the external radius padding of the pie chart. This will force the radius of the\n     * pie chart to become smaller or larger depending on the value.\n     * @method externalRadiusPadding\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [externalRadiusPadding=0]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.externalRadiusPadding = function (externalRadiusPadding) {\n        if (!arguments.length) {\n            return _externalRadiusPadding;\n        }\n        _externalRadiusPadding = externalRadiusPadding;\n        return _chart;\n    };\n\n    /**\n     * Get or set the inner radius of the pie chart. If the inner radius is greater than 0px then the\n     * pie chart will be rendered as a doughnut chart.\n     * @method innerRadius\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [innerRadius=0]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.innerRadius = function (innerRadius) {\n        if (!arguments.length) {\n            return _innerRadius;\n        }\n        _innerRadius = innerRadius;\n        return _chart;\n    };\n\n    /**\n     * Get or set the outer radius. If the radius is not set, it will be half of the minimum of the\n     * chart width and height.\n     * @method radius\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [radius]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.radius = function (radius) {\n        if (!arguments.length) {\n            return _givenRadius;\n        }\n        _givenRadius = radius;\n        return _chart;\n    };\n\n    /**\n     * Get or set center x coordinate position. Default is center of svg.\n     * @method cx\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [cx]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.cx = function (cx) {\n        if (!arguments.length) {\n            return (_cx ||  _chart.width() / 2);\n        }\n        _cx = cx;\n        return _chart;\n    };\n\n    /**\n     * Get or set center y coordinate position. Default is center of svg.\n     * @method cy\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [cy]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.cy = function (cy) {\n        if (!arguments.length) {\n            return (_cy ||  _chart.height() / 2);\n        }\n        _cy = cy;\n        return _chart;\n    };\n\n    function buildArcs () {\n        return d3.svg.arc()\n            .outerRadius(_radius - _externalRadiusPadding)\n            .innerRadius(_innerRadius);\n    }\n\n    function isSelectedSlice (d) {\n        return _chart.hasFilter(_chart.cappedKeyAccessor(d.data));\n    }\n\n    _chart._doRedraw = function () {\n        drawChart();\n        return _chart;\n    };\n\n    /**\n     * Get or set the minimal slice angle for label rendering. Any slice with a smaller angle will not\n     * display a slice label.\n     * @method minAngleForLabel\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [minAngleForLabel=0.5]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.minAngleForLabel = function (minAngleForLabel) {\n        if (!arguments.length) {\n            return _minAngleForLabel;\n        }\n        _minAngleForLabel = minAngleForLabel;\n        return _chart;\n    };\n\n    function pieLayout () {\n        return d3.layout.pie().sort(null).value(_chart.cappedValueAccessor);\n    }\n\n    function sliceTooSmall (d) {\n        var angle = (d.endAngle - d.startAngle);\n        return isNaN(angle) || angle < _minAngleForLabel;\n    }\n\n    function sliceHasNoData (d) {\n        return _chart.cappedValueAccessor(d) === 0;\n    }\n\n    function tweenPie (b) {\n        b.innerRadius = _innerRadius;\n        var current = this._current;\n        if (isOffCanvas(current)) {\n            current = {startAngle: 0, endAngle: 0};\n        } else {\n            // only interpolate startAngle & endAngle, not the whole data object\n            current = {startAngle: current.startAngle, endAngle: current.endAngle};\n        }\n        var i = d3.interpolate(current, b);\n        this._current = i(0);\n        return function (t) {\n            return safeArc(i(t), 0, buildArcs());\n        };\n    }\n\n    function isOffCanvas (current) {\n        return !current || isNaN(current.startAngle) || isNaN(current.endAngle);\n    }\n\n    function fill (d, i) {\n        return _chart.getColor(d.data, i);\n    }\n\n    function onClick (d, i) {\n        if (_g.attr('class') !== _emptyCssClass) {\n            _chart.onClick(d.data, i);\n        }\n    }\n\n    function safeArc (d, i, arc) {\n        var path = arc(d, i);\n        if (path.indexOf('NaN') >= 0) {\n            path = 'M0,0';\n        }\n        return path;\n    }\n\n    /**\n     * Title to use for the only slice when there is no data.\n     * @method emptyTitle\n     * @memberof dc.pieChart\n     * @instance\n     * @param {String} [title]\n     * @returns {String|dc.pieChart}\n     */\n    _chart.emptyTitle = function (title) {\n        if (arguments.length === 0) {\n            return _emptyTitle;\n        }\n        _emptyTitle = title;\n        return _chart;\n    };\n\n    /**\n     * Position slice labels offset from the outer edge of the chart.\n     *\n     * The argument specifies the extra radius to be added for slice labels.\n     * @method externalLabels\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Number} [externalLabelRadius]\n     * @returns {Number|dc.pieChart}\n     */\n    _chart.externalLabels = function (externalLabelRadius) {\n        if (arguments.length === 0) {\n            return _externalLabelRadius;\n        } else if (externalLabelRadius) {\n            _externalLabelRadius = externalLabelRadius;\n        } else {\n            _externalLabelRadius = undefined;\n        }\n\n        return _chart;\n    };\n\n    /**\n     * Get or set whether to draw lines from pie slices to their labels.\n     *\n     * @method drawPaths\n     * @memberof dc.pieChart\n     * @instance\n     * @param {Boolean} [drawPaths]\n     * @returns {Boolean|dc.pieChart}\n     */\n    _chart.drawPaths = function (drawPaths) {\n        if (arguments.length === 0) {\n            return _drawPaths;\n        }\n        _drawPaths = drawPaths;\n        return _chart;\n    };\n\n    function labelPosition (d, arc) {\n        var centroid;\n        if (_externalLabelRadius) {\n            centroid = d3.svg.arc()\n                .outerRadius(_radius - _externalRadiusPadding + _externalLabelRadius)\n                .innerRadius(_radius - _externalRadiusPadding + _externalLabelRadius)\n                .centroid(d);\n        } else {\n            centroid = arc.centroid(d);\n        }\n        if (isNaN(centroid[0]) || isNaN(centroid[1])) {\n            return 'translate(0,0)';\n        } else {\n            return 'translate(' + centroid + ')';\n        }\n    }\n\n    _chart.legendables = function () {\n        return _chart.data().map(function (d, i) {\n            var legendable = {name: d.key, data: d.value, others: d.others, chart: _chart};\n            legendable.color = _chart.getColor(d, i);\n            return legendable;\n        });\n    };\n\n    _chart.legendHighlight = function (d) {\n        highlightSliceFromLegendable(d, true);\n    };\n\n    _chart.legendReset = function (d) {\n        highlightSliceFromLegendable(d, false);\n    };\n\n    _chart.legendToggle = function (d) {\n        _chart.onClick({key: d.name, others: d.others});\n    };\n\n    function highlightSliceFromLegendable (legendable, highlighted) {\n        _chart.selectAll('g.pie-slice').each(function (d) {\n            if (legendable.name === d.data.key) {\n                d3.select(this).classed('highlight', highlighted);\n            }\n        });\n    }\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * Concrete bar chart/histogram implementation.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n * @class barChart\n * @memberof dc\n * @mixes dc.stackMixin\n * @mixes dc.coordinateGridMixin\n * @example\n * // create a bar chart under #chart-container1 element using the default global chart group\n * var chart1 = dc.barChart('#chart-container1');\n * // create a bar chart under #chart-container2 element using chart group A\n * var chart2 = dc.barChart('#chart-container2', 'chartGroupA');\n * // create a sub-chart under a composite parent chart\n * var chart3 = dc.barChart(compositeChart);\n * @param {String|node|d3.selection|dc.compositeChart} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector}\n * specifying a dom block element such as a div; or a dom element or d3 selection.  If the bar\n * chart is a sub-chart in a {@link dc.compositeChart Composite Chart} then pass in the parent\n * composite chart instance instead.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.barChart}\n */\ndc.barChart = function (parent, chartGroup) {\n    var MIN_BAR_WIDTH = 1;\n    var DEFAULT_GAP_BETWEEN_BARS = 2;\n    var LABEL_PADDING = 3;\n\n    var _chart = dc.stackMixin(dc.coordinateGridMixin({}));\n\n    var _gap = DEFAULT_GAP_BETWEEN_BARS;\n    var _centerBar = false;\n    var _alwaysUseRounding = false;\n\n    var _barWidth;\n\n    dc.override(_chart, 'rescale', function () {\n        _chart._rescale();\n        _barWidth = undefined;\n        return _chart;\n    });\n\n    dc.override(_chart, 'render', function () {\n        if (_chart.round() && _centerBar && !_alwaysUseRounding) {\n            dc.logger.warn('By default, brush rounding is disabled if bars are centered. ' +\n                         'See dc.js bar chart API documentation for details.');\n        }\n\n        return _chart._render();\n    });\n\n    _chart.label(function (d) {\n        return dc.utils.printSingleValue(d.y0 + d.y);\n    }, false);\n\n    _chart.plotData = function () {\n        var layers = _chart.chartBodyG().selectAll('g.stack')\n            .data(_chart.data());\n\n        calculateBarWidth();\n\n        layers\n            .enter()\n            .append('g')\n            .attr('class', function (d, i) {\n                return 'stack ' + '_' + i;\n            });\n\n        var last = layers.size() - 1;\n        layers.each(function (d, i) {\n            var layer = d3.select(this);\n\n            renderBars(layer, i, d);\n\n            if (_chart.renderLabel() && last === i) {\n                renderLabels(layer, i, d);\n            }\n        });\n    };\n\n    function barHeight (d) {\n        return dc.utils.safeNumber(Math.abs(_chart.y()(d.y + d.y0) - _chart.y()(d.y0)));\n    }\n\n    function renderLabels (layer, layerIndex, d) {\n        var labels = layer.selectAll('text.barLabel')\n            .data(d.values, dc.pluck('x'));\n\n        labels.enter()\n            .append('text')\n            .attr('class', 'barLabel')\n            .attr('text-anchor', 'middle');\n\n        if (_chart.isOrdinal()) {\n            labels.on('click', _chart.onClick);\n            labels.attr('cursor', 'pointer');\n        }\n\n        dc.transition(labels, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('x', function (d) {\n                var x = _chart.x()(d.x);\n                if (!_centerBar) {\n                    x += _barWidth / 2;\n                }\n                return dc.utils.safeNumber(x);\n            })\n            .attr('y', function (d) {\n                var y = _chart.y()(d.y + d.y0);\n\n                if (d.y < 0) {\n                    y -= barHeight(d);\n                }\n\n                return dc.utils.safeNumber(y - LABEL_PADDING);\n            })\n            .text(function (d) {\n                return _chart.label()(d);\n            });\n\n        dc.transition(labels.exit(), _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('height', 0)\n            .remove();\n    }\n\n    function renderBars (layer, layerIndex, d) {\n        var bars = layer.selectAll('rect.bar')\n            .data(d.values, dc.pluck('x'));\n\n        var enter = bars.enter()\n            .append('rect')\n            .attr('class', 'bar')\n            .attr('fill', dc.pluck('data', _chart.getColor))\n            .attr('y', _chart.yAxisHeight())\n            .attr('height', 0);\n\n        if (_chart.renderTitle()) {\n            enter.append('title').text(dc.pluck('data', _chart.title(d.name)));\n        }\n\n        if (_chart.isOrdinal()) {\n            bars.on('click', _chart.onClick);\n        }\n\n        dc.transition(bars, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('x', function (d) {\n                var x = _chart.x()(d.x);\n                if (_centerBar) {\n                    x -= _barWidth / 2;\n                }\n                if (_chart.isOrdinal() && _gap !== undefined) {\n                    x += _gap / 2;\n                }\n                return dc.utils.safeNumber(x);\n            })\n            .attr('y', function (d) {\n                var y = _chart.y()(d.y + d.y0);\n\n                if (d.y < 0) {\n                    y -= barHeight(d);\n                }\n\n                return dc.utils.safeNumber(y);\n            })\n            .attr('width', _barWidth)\n            .attr('height', function (d) {\n                return barHeight(d);\n            })\n            .attr('fill', dc.pluck('data', _chart.getColor))\n            .select('title').text(dc.pluck('data', _chart.title(d.name)));\n\n        dc.transition(bars.exit(), _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('x', function (d) { return _chart.x()(d.x); })\n            .attr('width', _barWidth * 0.9)\n            .remove();\n    }\n\n    function calculateBarWidth () {\n        if (_barWidth === undefined) {\n            var numberOfBars = _chart.xUnitCount();\n\n            // please can't we always use rangeBands for bar charts?\n            if (_chart.isOrdinal() && _gap === undefined) {\n                _barWidth = Math.floor(_chart.x().rangeBand());\n            } else if (_gap) {\n                _barWidth = Math.floor((_chart.xAxisLength() - (numberOfBars - 1) * _gap) / numberOfBars);\n            } else {\n                _barWidth = Math.floor(_chart.xAxisLength() / (1 + _chart.barPadding()) / numberOfBars);\n            }\n\n            if (_barWidth === Infinity || isNaN(_barWidth) || _barWidth < MIN_BAR_WIDTH) {\n                _barWidth = MIN_BAR_WIDTH;\n            }\n        }\n    }\n\n    _chart.fadeDeselectedArea = function () {\n        var bars = _chart.chartBodyG().selectAll('rect.bar');\n        var extent = _chart.brush().extent();\n\n        if (_chart.isOrdinal()) {\n            if (_chart.hasFilter()) {\n                bars.classed(dc.constants.SELECTED_CLASS, function (d) {\n                    return _chart.hasFilter(d.x);\n                });\n                bars.classed(dc.constants.DESELECTED_CLASS, function (d) {\n                    return !_chart.hasFilter(d.x);\n                });\n            } else {\n                bars.classed(dc.constants.SELECTED_CLASS, false);\n                bars.classed(dc.constants.DESELECTED_CLASS, false);\n            }\n        } else {\n            if (!_chart.brushIsEmpty(extent)) {\n                var start = extent[0];\n                var end = extent[1];\n\n                bars.classed(dc.constants.DESELECTED_CLASS, function (d) {\n                    return d.x < start || d.x >= end;\n                });\n            } else {\n                bars.classed(dc.constants.DESELECTED_CLASS, false);\n            }\n        }\n    };\n\n    /**\n     * Whether the bar chart will render each bar centered around the data position on the x-axis.\n     * @method centerBar\n     * @memberof dc.barChart\n     * @instance\n     * @param {Boolean} [centerBar=false]\n     * @returns {Boolean|dc.barChart}\n     */\n    _chart.centerBar = function (centerBar) {\n        if (!arguments.length) {\n            return _centerBar;\n        }\n        _centerBar = centerBar;\n        return _chart;\n    };\n\n    dc.override(_chart, 'onClick', function (d) {\n        _chart._onClick(d.data);\n    });\n\n    /**\n     * Get or set the spacing between bars as a fraction of bar size. Valid values are between 0-1.\n     * Setting this value will also remove any previously set {@link dc.barChart#gap gap}. See the\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md#ordinal_rangeBands d3 docs}\n     * for a visual description of how the padding is applied.\n     * @method barPadding\n     * @memberof dc.barChart\n     * @instance\n     * @param {Number} [barPadding=0]\n     * @returns {Number|dc.barChart}\n     */\n    _chart.barPadding = function (barPadding) {\n        if (!arguments.length) {\n            return _chart._rangeBandPadding();\n        }\n        _chart._rangeBandPadding(barPadding);\n        _gap = undefined;\n        return _chart;\n    };\n\n    _chart._useOuterPadding = function () {\n        return _gap === undefined;\n    };\n\n    /**\n     * Get or set the outer padding on an ordinal bar chart. This setting has no effect on non-ordinal charts.\n     * Will pad the width by `padding * barWidth` on each side of the chart.\n     * @method outerPadding\n     * @memberof dc.barChart\n     * @instance\n     * @param {Number} [padding=0.5]\n     * @returns {Number|dc.barChart}\n     */\n    _chart.outerPadding = _chart._outerRangeBandPadding;\n\n    /**\n     * Manually set fixed gap (in px) between bars instead of relying on the default auto-generated\n     * gap.  By default the bar chart implementation will calculate and set the gap automatically\n     * based on the number of data points and the length of the x axis.\n     * @method gap\n     * @memberof dc.barChart\n     * @instance\n     * @param {Number} [gap=2]\n     * @returns {Number|dc.barChart}\n     */\n    _chart.gap = function (gap) {\n        if (!arguments.length) {\n            return _gap;\n        }\n        _gap = gap;\n        return _chart;\n    };\n\n    _chart.extendBrush = function () {\n        var extent = _chart.brush().extent();\n        if (_chart.round() && (!_centerBar || _alwaysUseRounding)) {\n            extent[0] = extent.map(_chart.round())[0];\n            extent[1] = extent.map(_chart.round())[1];\n\n            _chart.chartBodyG().select('.brush')\n                .call(_chart.brush().extent(extent));\n        }\n\n        return extent;\n    };\n\n    /**\n     * Set or get whether rounding is enabled when bars are centered. If false, using\n     * rounding with centered bars will result in a warning and rounding will be ignored.  This flag\n     * has no effect if bars are not {@link dc.barChart#centerBar centered}.\n     * When using standard d3.js rounding methods, the brush often doesn't align correctly with\n     * centered bars since the bars are offset.  The rounding function must add an offset to\n     * compensate, such as in the following example.\n     * @method alwaysUseRounding\n     * @memberof dc.barChart\n     * @instance\n     * @example\n     * chart.round(function(n) { return Math.floor(n) + 0.5; });\n     * @param {Boolean} [alwaysUseRounding=false]\n     * @returns {Boolean|dc.barChart}\n     */\n    _chart.alwaysUseRounding = function (alwaysUseRounding) {\n        if (!arguments.length) {\n            return _alwaysUseRounding;\n        }\n        _alwaysUseRounding = alwaysUseRounding;\n        return _chart;\n    };\n\n    function colorFilter (color, inv) {\n        return function () {\n            var item = d3.select(this);\n            var match = item.attr('fill') === color;\n            return inv ? !match : match;\n        };\n    }\n\n    _chart.legendHighlight = function (d) {\n        if (!_chart.isLegendableHidden(d)) {\n            _chart.g().selectAll('rect.bar')\n                .classed('highlight', colorFilter(d.color))\n                .classed('fadeout', colorFilter(d.color, true));\n        }\n    };\n\n    _chart.legendReset = function () {\n        _chart.g().selectAll('rect.bar')\n            .classed('highlight', false)\n            .classed('fadeout', false);\n    };\n\n    dc.override(_chart, 'xAxisMax', function () {\n        var max = this._xAxisMax();\n        if ('resolution' in _chart.xUnits()) {\n            var res = _chart.xUnits().resolution;\n            max += res;\n        }\n        return max;\n    });\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * Concrete line/area chart implementation.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n * @class lineChart\n * @memberof dc\n * @mixes dc.stackMixin\n * @mixes dc.coordinateGridMixin\n * @example\n * // create a line chart under #chart-container1 element using the default global chart group\n * var chart1 = dc.lineChart('#chart-container1');\n * // create a line chart under #chart-container2 element using chart group A\n * var chart2 = dc.lineChart('#chart-container2', 'chartGroupA');\n * // create a sub-chart under a composite parent chart\n * var chart3 = dc.lineChart(compositeChart);\n * @param {String|node|d3.selection|dc.compositeChart} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector}\n * specifying a dom block element such as a div; or a dom element or d3 selection.  If the line\n * chart is a sub-chart in a {@link dc.compositeChart Composite Chart} then pass in the parent\n * composite chart instance instead.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.lineChart}\n */\ndc.lineChart = function (parent, chartGroup) {\n    var DEFAULT_DOT_RADIUS = 5;\n    var TOOLTIP_G_CLASS = 'dc-tooltip';\n    var DOT_CIRCLE_CLASS = 'dot';\n    var Y_AXIS_REF_LINE_CLASS = 'yRef';\n    var X_AXIS_REF_LINE_CLASS = 'xRef';\n    var DEFAULT_DOT_OPACITY = 1e-6;\n    var LABEL_PADDING = 3;\n\n    var _chart = dc.stackMixin(dc.coordinateGridMixin({}));\n    var _renderArea = false;\n    var _dotRadius = DEFAULT_DOT_RADIUS;\n    var _dataPointRadius = null;\n    var _dataPointFillOpacity = DEFAULT_DOT_OPACITY;\n    var _dataPointStrokeOpacity = DEFAULT_DOT_OPACITY;\n    var _interpolate = 'linear';\n    var _tension = 0.7;\n    var _defined;\n    var _dashStyle;\n    var _xyTipsOn = true;\n\n    _chart.transitionDuration(500);\n    _chart.transitionDelay(0);\n    _chart._rangeBandPadding(1);\n\n    _chart.plotData = function () {\n        var chartBody = _chart.chartBodyG();\n        var layersList = chartBody.select('g.stack-list');\n\n        if (layersList.empty()) {\n            layersList = chartBody.append('g').attr('class', 'stack-list');\n        }\n\n        var layers = layersList.selectAll('g.stack').data(_chart.data());\n\n        var layersEnter = layers\n            .enter()\n            .append('g')\n            .attr('class', function (d, i) {\n                return 'stack ' + '_' + i;\n            });\n\n        drawLine(layersEnter, layers);\n\n        drawArea(layersEnter, layers);\n\n        drawDots(chartBody, layers);\n\n        if (_chart.renderLabel()) {\n            drawLabels(layers);\n        }\n    };\n\n    /**\n     * Gets or sets the interpolator to use for lines drawn, by string name, allowing e.g. step\n     * functions, splines, and cubic interpolation.  This is passed to\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#line_interpolate d3.svg.line.interpolate} and\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#area_interpolate d3.svg.area.interpolate},\n     * where you can find a complete list of valid arguments.\n     * @method interpolate\n     * @memberof dc.lineChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#line_interpolate d3.svg.line.interpolate}\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#area_interpolate d3.svg.area.interpolate}\n     * @param  {String} [interpolate='linear']\n     * @returns {String|dc.lineChart}\n     */\n    _chart.interpolate = function (interpolate) {\n        if (!arguments.length) {\n            return _interpolate;\n        }\n        _interpolate = interpolate;\n        return _chart;\n    };\n\n    /**\n     * Gets or sets the tension to use for lines drawn, in the range 0 to 1.\n     * This parameter further customizes the interpolation behavior.  It is passed to\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#line_tension d3.svg.line.tension} and\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#area_tension d3.svg.area.tension}.\n     * @method tension\n     * @memberof dc.lineChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#line_interpolate d3.svg.line.interpolate}\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#area_interpolate d3.svg.area.interpolate}\n     * @param  {Number} [tension=0.7]\n     * @returns {Number|dc.lineChart}\n     */\n    _chart.tension = function (tension) {\n        if (!arguments.length) {\n            return _tension;\n        }\n        _tension = tension;\n        return _chart;\n    };\n\n    /**\n     * Gets or sets a function that will determine discontinuities in the line which should be\n     * skipped: the path will be broken into separate subpaths if some points are undefined.\n     * This function is passed to\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#line_defined d3.svg.line.defined}\n     *\n     * Note: crossfilter will sometimes coerce nulls to 0, so you may need to carefully write\n     * custom reduce functions to get this to work, depending on your data. See\n     * {@link https://github.com/dc-js/dc.js/issues/615#issuecomment-49089248 this GitHub comment}\n     * for more details and an example.\n     * @method defined\n     * @memberof dc.lineChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#line_defined d3.svg.line.defined}\n     * @param  {Function} [defined]\n     * @returns {Function|dc.lineChart}\n     */\n    _chart.defined = function (defined) {\n        if (!arguments.length) {\n            return _defined;\n        }\n        _defined = defined;\n        return _chart;\n    };\n\n    /**\n     * Set the line's d3 dashstyle. This value becomes the 'stroke-dasharray' of line. Defaults to empty\n     * array (solid line).\n     * @method dashStyle\n     * @memberof dc.lineChart\n     * @instance\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray stroke-dasharray}\n     * @example\n     * // create a Dash Dot Dot Dot\n     * chart.dashStyle([3,1,1,1]);\n     * @param  {Array<Number>} [dashStyle=[]]\n     * @returns {Array<Number>|dc.lineChart}\n     */\n    _chart.dashStyle = function (dashStyle) {\n        if (!arguments.length) {\n            return _dashStyle;\n        }\n        _dashStyle = dashStyle;\n        return _chart;\n    };\n\n    /**\n     * Get or set render area flag. If the flag is set to true then the chart will render the area\n     * beneath each line and the line chart effectively becomes an area chart.\n     * @method renderArea\n     * @memberof dc.lineChart\n     * @instance\n     * @param  {Boolean} [renderArea=false]\n     * @returns {Boolean|dc.lineChart}\n     */\n    _chart.renderArea = function (renderArea) {\n        if (!arguments.length) {\n            return _renderArea;\n        }\n        _renderArea = renderArea;\n        return _chart;\n    };\n\n    function colors (d, i) {\n        return _chart.getColor.call(d, d.values, i);\n    }\n\n    function drawLine (layersEnter, layers) {\n        var line = d3.svg.line()\n            .x(function (d) {\n                return _chart.x()(d.x);\n            })\n            .y(function (d) {\n                return _chart.y()(d.y + d.y0);\n            })\n            .interpolate(_interpolate)\n            .tension(_tension);\n        if (_defined) {\n            line.defined(_defined);\n        }\n\n        var path = layersEnter.append('path')\n            .attr('class', 'line')\n            .attr('stroke', colors);\n        if (_dashStyle) {\n            path.attr('stroke-dasharray', _dashStyle);\n        }\n\n        dc.transition(layers.select('path.line'), _chart.transitionDuration(), _chart.transitionDelay())\n            //.ease('linear')\n            .attr('stroke', colors)\n            .attr('d', function (d) {\n                return safeD(line(d.values));\n            });\n    }\n\n    function drawArea (layersEnter, layers) {\n        if (_renderArea) {\n            var area = d3.svg.area()\n                .x(function (d) {\n                    return _chart.x()(d.x);\n                })\n                .y(function (d) {\n                    return _chart.y()(d.y + d.y0);\n                })\n                .y0(function (d) {\n                    return _chart.y()(d.y0);\n                })\n                .interpolate(_interpolate)\n                .tension(_tension);\n            if (_defined) {\n                area.defined(_defined);\n            }\n\n            layersEnter.append('path')\n                .attr('class', 'area')\n                .attr('fill', colors)\n                .attr('d', function (d) {\n                    return safeD(area(d.values));\n                });\n\n            dc.transition(layers.select('path.area'), _chart.transitionDuration(), _chart.transitionDelay())\n                //.ease('linear')\n                .attr('fill', colors)\n                .attr('d', function (d) {\n                    return safeD(area(d.values));\n                });\n        }\n    }\n\n    function safeD (d) {\n        return (!d || d.indexOf('NaN') >= 0) ? 'M0,0' : d;\n    }\n\n    function drawDots (chartBody, layers) {\n        if (_chart.xyTipsOn() === 'always' || (!_chart.brushOn() && _chart.xyTipsOn())) {\n            var tooltipListClass = TOOLTIP_G_CLASS + '-list';\n            var tooltips = chartBody.select('g.' + tooltipListClass);\n\n            if (tooltips.empty()) {\n                tooltips = chartBody.append('g').attr('class', tooltipListClass);\n            }\n\n            layers.each(function (d, layerIndex) {\n                var points = d.values;\n                if (_defined) {\n                    points = points.filter(_defined);\n                }\n\n                var g = tooltips.select('g.' + TOOLTIP_G_CLASS + '._' + layerIndex);\n                if (g.empty()) {\n                    g = tooltips.append('g').attr('class', TOOLTIP_G_CLASS + ' _' + layerIndex);\n                }\n\n                createRefLines(g);\n\n                var dots = g.selectAll('circle.' + DOT_CIRCLE_CLASS)\n                    .data(points, dc.pluck('x'));\n\n                dots.enter()\n                    .append('circle')\n                    .attr('class', DOT_CIRCLE_CLASS)\n                    .attr('r', getDotRadius())\n                    .style('fill-opacity', _dataPointFillOpacity)\n                    .style('stroke-opacity', _dataPointStrokeOpacity)\n                    .attr('fill', _chart.getColor)\n                    .on('mousemove', function () {\n                        var dot = d3.select(this);\n                        showDot(dot);\n                        showRefLines(dot, g);\n                    })\n                    .on('mouseout', function () {\n                        var dot = d3.select(this);\n                        hideDot(dot);\n                        hideRefLines(g);\n                    });\n\n                dots.call(renderTitle, d);\n\n                dc.transition(dots, _chart.transitionDuration())\n                    .attr('cx', function (d) {\n                        return dc.utils.safeNumber(_chart.x()(d.x));\n                    })\n                    .attr('cy', function (d) {\n                        return dc.utils.safeNumber(_chart.y()(d.y + d.y0));\n                    })\n                    .attr('fill', _chart.getColor);\n\n                dots.exit().remove();\n            });\n        }\n    }\n\n    _chart.label(function (d) {\n        return dc.utils.printSingleValue(d.y0 + d.y);\n    }, false);\n\n    function drawLabels (layers) {\n        layers.each(function (d, layerIndex) {\n            var layer = d3.select(this);\n            var labels = layer.selectAll('text.lineLabel')\n                .data(d.values, dc.pluck('x'));\n\n            labels.enter()\n                .append('text')\n                .attr('class', 'lineLabel')\n                .attr('text-anchor', 'middle');\n\n            dc.transition(labels, _chart.transitionDuration())\n                .attr('x', function (d) {\n                    return dc.utils.safeNumber(_chart.x()(d.x));\n                })\n                .attr('y', function (d) {\n                    var y = _chart.y()(d.y + d.y0) - LABEL_PADDING;\n                    return dc.utils.safeNumber(y);\n                })\n                .text(function (d) {\n                    return _chart.label()(d);\n                });\n\n            dc.transition(labels.exit(), _chart.transitionDuration())\n                .attr('height', 0)\n                .remove();\n        });\n    }\n\n    function createRefLines (g) {\n        var yRefLine = g.select('path.' + Y_AXIS_REF_LINE_CLASS).empty() ?\n            g.append('path').attr('class', Y_AXIS_REF_LINE_CLASS) : g.select('path.' + Y_AXIS_REF_LINE_CLASS);\n        yRefLine.style('display', 'none').attr('stroke-dasharray', '5,5');\n\n        var xRefLine = g.select('path.' + X_AXIS_REF_LINE_CLASS).empty() ?\n            g.append('path').attr('class', X_AXIS_REF_LINE_CLASS) : g.select('path.' + X_AXIS_REF_LINE_CLASS);\n        xRefLine.style('display', 'none').attr('stroke-dasharray', '5,5');\n    }\n\n    function showDot (dot) {\n        dot.style('fill-opacity', 0.8);\n        dot.style('stroke-opacity', 0.8);\n        dot.attr('r', _dotRadius);\n        return dot;\n    }\n\n    function showRefLines (dot, g) {\n        var x = dot.attr('cx');\n        var y = dot.attr('cy');\n        var yAxisX = (_chart._yAxisX() - _chart.margins().left);\n        var yAxisRefPathD = 'M' + yAxisX + ' ' + y + 'L' + (x) + ' ' + (y);\n        var xAxisRefPathD = 'M' + x + ' ' + _chart.yAxisHeight() + 'L' + x + ' ' + y;\n        g.select('path.' + Y_AXIS_REF_LINE_CLASS).style('display', '').attr('d', yAxisRefPathD);\n        g.select('path.' + X_AXIS_REF_LINE_CLASS).style('display', '').attr('d', xAxisRefPathD);\n    }\n\n    function getDotRadius () {\n        return _dataPointRadius || _dotRadius;\n    }\n\n    function hideDot (dot) {\n        dot.style('fill-opacity', _dataPointFillOpacity)\n            .style('stroke-opacity', _dataPointStrokeOpacity)\n            .attr('r', getDotRadius());\n    }\n\n    function hideRefLines (g) {\n        g.select('path.' + Y_AXIS_REF_LINE_CLASS).style('display', 'none');\n        g.select('path.' + X_AXIS_REF_LINE_CLASS).style('display', 'none');\n    }\n\n    function renderTitle (dot, d) {\n        if (_chart.renderTitle()) {\n            dot.select('title').remove();\n            dot.append('title').text(dc.pluck('data', _chart.title(d.name)));\n        }\n    }\n\n    /**\n     * Turn on/off the mouseover behavior of an individual data point which renders a circle and x/y axis\n     * dashed lines back to each respective axis.  This is ignored if the chart\n     * {@link dc.coordinateGridMixin#brushOn brush} is on\n     * @method xyTipsOn\n     * @memberof dc.lineChart\n     * @instance\n     * @param  {Boolean} [xyTipsOn=false]\n     * @returns {Boolean|dc.lineChart}\n     */\n    _chart.xyTipsOn = function (xyTipsOn) {\n        if (!arguments.length) {\n            return _xyTipsOn;\n        }\n        _xyTipsOn = xyTipsOn;\n        return _chart;\n    };\n\n    /**\n     * Get or set the radius (in px) for dots displayed on the data points.\n     * @method dotRadius\n     * @memberof dc.lineChart\n     * @instance\n     * @param  {Number} [dotRadius=5]\n     * @returns {Number|dc.lineChart}\n     */\n    _chart.dotRadius = function (dotRadius) {\n        if (!arguments.length) {\n            return _dotRadius;\n        }\n        _dotRadius = dotRadius;\n        return _chart;\n    };\n\n    /**\n     * Always show individual dots for each datapoint.\n     *\n     * If `options` is falsy, it disables data point rendering. If no `options` are provided, the\n     * current `options` values are instead returned.\n     * @method renderDataPoints\n     * @memberof dc.lineChart\n     * @instance\n     * @example\n     * chart.renderDataPoints({radius: 2, fillOpacity: 0.8, strokeOpacity: 0.8})\n     * @param  {{fillOpacity: Number, strokeOpacity: Number, radius: Number}} [options={fillOpacity: 0.8, strokeOpacity: 0.8, radius: 2}]\n     * @returns {{fillOpacity: Number, strokeOpacity: Number, radius: Number}|dc.lineChart}\n     */\n    _chart.renderDataPoints = function (options) {\n        if (!arguments.length) {\n            return {\n                fillOpacity: _dataPointFillOpacity,\n                strokeOpacity: _dataPointStrokeOpacity,\n                radius: _dataPointRadius\n            };\n        } else if (!options) {\n            _dataPointFillOpacity = DEFAULT_DOT_OPACITY;\n            _dataPointStrokeOpacity = DEFAULT_DOT_OPACITY;\n            _dataPointRadius = null;\n        } else {\n            _dataPointFillOpacity = options.fillOpacity || 0.8;\n            _dataPointStrokeOpacity = options.strokeOpacity || 0.8;\n            _dataPointRadius = options.radius || 2;\n        }\n        return _chart;\n    };\n\n    function colorFilter (color, dashstyle, inv) {\n        return function () {\n            var item = d3.select(this);\n            var match = (item.attr('stroke') === color &&\n                item.attr('stroke-dasharray') === ((dashstyle instanceof Array) ?\n                    dashstyle.join(',') : null)) || item.attr('fill') === color;\n            return inv ? !match : match;\n        };\n    }\n\n    _chart.legendHighlight = function (d) {\n        if (!_chart.isLegendableHidden(d)) {\n            _chart.g().selectAll('path.line, path.area')\n                .classed('highlight', colorFilter(d.color, d.dashstyle))\n                .classed('fadeout', colorFilter(d.color, d.dashstyle, true));\n        }\n    };\n\n    _chart.legendReset = function () {\n        _chart.g().selectAll('path.line, path.area')\n            .classed('highlight', false)\n            .classed('fadeout', false);\n    };\n\n    dc.override(_chart, 'legendables', function () {\n        var legendables = _chart._legendables();\n        if (!_dashStyle) {\n            return legendables;\n        }\n        return legendables.map(function (l) {\n            l.dashstyle = _dashStyle;\n            return l;\n        });\n    });\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * The data count widget is a simple widget designed to display the number of records selected by the\n * current filters out of the total number of records in the data set. Once created the data count widget\n * will automatically update the text content of child elements with the following classes:\n *\n * * `.total-count` - total number of records\n * * `.filter-count` - number of records matched by the current filters\n *\n * Note: this widget works best for the specific case of showing the number of records out of a\n * total. If you want a more general-purpose numeric display, please use the\n * {@link dc.numberDisplay} widget instead.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * @class dataCount\n * @memberof dc\n * @mixes dc.baseMixin\n * @example\n * var ndx = crossfilter(data);\n * var all = ndx.groupAll();\n *\n * dc.dataCount('.dc-data-count')\n *     .dimension(ndx)\n *     .group(all);\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.dataCount}\n */\ndc.dataCount = function (parent, chartGroup) {\n    var _formatNumber = d3.format(',d');\n    var _chart = dc.baseMixin({});\n    var _html = {some: '', all: ''};\n\n    /**\n     * Gets or sets an optional object specifying HTML templates to use depending how many items are\n     * selected. The text `%total-count` will replaced with the total number of records, and the text\n     * `%filter-count` will be replaced with the number of selected records.\n     * - all: HTML template to use if all items are selected\n     * - some: HTML template to use if not all items are selected\n     * @method html\n     * @memberof dc.dataCount\n     * @instance\n     * @example\n     * counter.html({\n     *      some: '%filter-count out of %total-count records selected',\n     *      all: 'All records selected. Click on charts to apply filters'\n     * })\n     * @param {{some:String, all: String}} [options]\n     * @returns {{some:String, all: String}|dc.dataCount}\n     */\n    _chart.html = function (options) {\n        if (!arguments.length) {\n            return _html;\n        }\n        if (options.all) {\n            _html.all = options.all;\n        }\n        if (options.some) {\n            _html.some = options.some;\n        }\n        return _chart;\n    };\n\n    /**\n     * Gets or sets an optional function to format the filter count and total count.\n     * @method formatNumber\n     * @memberof dc.dataCount\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md d3.format}\n     * @example\n     * counter.formatNumber(d3.format('.2g'))\n     * @param {Function} [formatter=d3.format('.2g')]\n     * @returns {Function|dc.dataCount}\n     */\n    _chart.formatNumber = function (formatter) {\n        if (!arguments.length) {\n            return _formatNumber;\n        }\n        _formatNumber = formatter;\n        return _chart;\n    };\n\n    _chart._doRender = function () {\n        var tot = _chart.dimension().size(),\n            val = _chart.group().value();\n        var all = _formatNumber(tot);\n        var selected = _formatNumber(val);\n\n        if ((tot === val) && (_html.all !== '')) {\n            _chart.root().html(_html.all.replace('%total-count', all).replace('%filter-count', selected));\n        } else if (_html.some !== '') {\n            _chart.root().html(_html.some.replace('%total-count', all).replace('%filter-count', selected));\n        } else {\n            _chart.selectAll('.total-count').text(all);\n            _chart.selectAll('.filter-count').text(selected);\n        }\n        return _chart;\n    };\n\n    _chart._doRedraw = function () {\n        return _chart._doRender();\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * The data table is a simple widget designed to list crossfilter focused data set (rows being\n * filtered) in a good old tabular fashion.\n *\n * Note: Unlike other charts, the data table (and data grid chart) use the {@link dc.dataTable#group group} attribute as a\n * keying function for {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#nest nesting} the data\n * together in groups.  Do not pass in a crossfilter group as this will not work.\n *\n * Another interesting feature of the data table is that you can pass a crossfilter group to the `dimension`, as\n * long as you specify the {@link dc.dataTable#order order} as `d3.descending`, since the data\n * table will use `dimension.top()` to fetch the data in that case, and the method is equally\n * supported on the crossfilter group as the crossfilter dimension.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * - {@link http://dc-js.github.io/dc.js/examples/table-on-aggregated-data.html dataTable on a crossfilter group}\n * ({@link https://github.com/dc-js/dc.js/blob/develop/web/examples/table-on-aggregated-data.html source})\n * @class dataTable\n * @memberof dc\n * @mixes dc.baseMixin\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.dataTable}\n */\ndc.dataTable = function (parent, chartGroup) {\n    var LABEL_CSS_CLASS = 'dc-table-label';\n    var ROW_CSS_CLASS = 'dc-table-row';\n    var COLUMN_CSS_CLASS = 'dc-table-column';\n    var GROUP_CSS_CLASS = 'dc-table-group';\n    var HEAD_CSS_CLASS = 'dc-table-head';\n\n    var _chart = dc.baseMixin({});\n\n    var _size = 25;\n    var _columns = [];\n    var _sortBy = function (d) {\n        return d;\n    };\n    var _order = d3.ascending;\n    var _beginSlice = 0;\n    var _endSlice;\n    var _showGroups = true;\n\n    _chart._doRender = function () {\n        _chart.selectAll('tbody').remove();\n\n        renderRows(renderGroups());\n\n        return _chart;\n    };\n\n    _chart._doColumnValueFormat = function (v, d) {\n        return ((typeof v === 'function') ?\n                v(d) :                          // v as function\n                ((typeof v === 'string') ?\n                 d[v] :                         // v is field name string\n                 v.format(d)                        // v is Object, use fn (element 2)\n                )\n               );\n    };\n\n    _chart._doColumnHeaderFormat = function (d) {\n        // if 'function', convert to string representation\n        // show a string capitalized\n        // if an object then display its label string as-is.\n        return (typeof d === 'function') ?\n                _chart._doColumnHeaderFnToString(d) :\n                ((typeof d === 'string') ?\n                 _chart._doColumnHeaderCapitalize(d) : String(d.label));\n    };\n\n    _chart._doColumnHeaderCapitalize = function (s) {\n        // capitalize\n        return s.charAt(0).toUpperCase() + s.slice(1);\n    };\n\n    _chart._doColumnHeaderFnToString = function (f) {\n        // columnString(f) {\n        var s = String(f);\n        var i1 = s.indexOf('return ');\n        if (i1 >= 0) {\n            var i2 = s.lastIndexOf(';');\n            if (i2 >= 0) {\n                s = s.substring(i1 + 7, i2);\n                var i3 = s.indexOf('numberFormat');\n                if (i3 >= 0) {\n                    s = s.replace('numberFormat', '');\n                }\n            }\n        }\n        return s;\n    };\n\n    function renderGroups () {\n        // The 'original' example uses all 'functions'.\n        // If all 'functions' are used, then don't remove/add a header, and leave\n        // the html alone. This preserves the functionality of earlier releases.\n        // A 2nd option is a string representing a field in the data.\n        // A third option is to supply an Object such as an array of 'information', and\n        // supply your own _doColumnHeaderFormat and _doColumnValueFormat functions to\n        // create what you need.\n        var bAllFunctions = true;\n        _columns.forEach(function (f) {\n            bAllFunctions = bAllFunctions & (typeof f === 'function');\n        });\n\n        if (!bAllFunctions) {\n            // ensure one thead\n            var thead = _chart.selectAll('thead').data([0]);\n            thead.enter().append('thead');\n            thead.exit().remove();\n\n            // with one tr\n            var headrow = thead.selectAll('tr').data([0]);\n            headrow.enter().append('tr');\n            headrow.exit().remove();\n\n            // with a th for each column\n            var headcols = headrow.selectAll('th')\n                .data(_columns);\n            headcols.enter().append('th');\n            headcols.exit().remove();\n\n            headcols\n                .attr('class', HEAD_CSS_CLASS)\n                    .html(function (d) {\n                        return (_chart._doColumnHeaderFormat(d));\n\n                    });\n        }\n\n        var groups = _chart.root().selectAll('tbody')\n            .data(nestEntries(), function (d) {\n                return _chart.keyAccessor()(d);\n            });\n\n        var rowGroup = groups\n            .enter()\n            .append('tbody');\n\n        if (_showGroups === true) {\n            rowGroup\n                .append('tr')\n                .attr('class', GROUP_CSS_CLASS)\n                    .append('td')\n                    .attr('class', LABEL_CSS_CLASS)\n                    .attr('colspan', _columns.length)\n                    .html(function (d) {\n                        return _chart.keyAccessor()(d);\n                    });\n        }\n\n        groups.exit().remove();\n\n        return rowGroup;\n    }\n\n    function nestEntries () {\n        var entries;\n        if (_order === d3.ascending) {\n            entries = _chart.dimension().bottom(_size);\n        } else {\n            entries = _chart.dimension().top(_size);\n        }\n\n        return d3.nest()\n            .key(_chart.group())\n            .sortKeys(_order)\n            .entries(entries.sort(function (a, b) {\n                return _order(_sortBy(a), _sortBy(b));\n            }).slice(_beginSlice, _endSlice));\n    }\n\n    function renderRows (groups) {\n        var rows = groups.order()\n            .selectAll('tr.' + ROW_CSS_CLASS)\n            .data(function (d) {\n                return d.values;\n            });\n\n        var rowEnter = rows.enter()\n            .append('tr')\n            .attr('class', ROW_CSS_CLASS);\n\n        _columns.forEach(function (v, i) {\n            rowEnter.append('td')\n                .attr('class', COLUMN_CSS_CLASS + ' _' + i)\n                .html(function (d) {\n                    return _chart._doColumnValueFormat(v, d);\n                });\n        });\n\n        rows.exit().remove();\n\n        return rows;\n    }\n\n    _chart._doRedraw = function () {\n        return _chart._doRender();\n    };\n\n    /**\n     * Get or set the group function for the data table. The group function takes a data row and\n     * returns the key to specify to {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_nest d3.nest}\n     * to split rows into groups.\n     *\n     * Do not pass in a crossfilter group as this will not work.\n     * @method group\n     * @memberof dc.dataTable\n     * @instance\n     * @example\n     * // group rows by the value of their field\n     * chart\n     *     .group(function(d) { return d.field; })\n     * @param {Function} groupFunction Function taking a row of data and returning the nest key.\n     * @returns {Function|dc.dataTable}\n     */\n\n    /**\n     * Get or set the table size which determines the number of rows displayed by the widget.\n     * @method size\n     * @memberof dc.dataTable\n     * @instance\n     * @param {Number} [size=25]\n     * @returns {Number|dc.dataTable}\n     */\n    _chart.size = function (size) {\n        if (!arguments.length) {\n            return _size;\n        }\n        _size = size;\n        return _chart;\n    };\n\n    /**\n     * Get or set the index of the beginning slice which determines which entries get displayed\n     * by the widget. Useful when implementing pagination.\n     *\n     * Note: the sortBy function will determine how the rows are ordered for pagination purposes.\n\n     * See the {@link http://dc-js.github.io/dc.js/examples/table-pagination.html table pagination example}\n     * to see how to implement the pagination user interface using `beginSlice` and `endSlice`.\n     * @method beginSlice\n     * @memberof dc.dataTable\n     * @instance\n     * @param {Number} [beginSlice=0]\n     * @returns {Number|dc.dataTable}\n     */\n    _chart.beginSlice = function (beginSlice) {\n        if (!arguments.length) {\n            return _beginSlice;\n        }\n        _beginSlice = beginSlice;\n        return _chart;\n    };\n\n    /**\n     * Get or set the index of the end slice which determines which entries get displayed by the\n     * widget. Useful when implementing pagination. See {@link dc.dataTable#beginSlice `beginSlice`} for more information.\n     * @method endSlice\n     * @memberof dc.dataTable\n     * @instance\n     * @param {Number|undefined} [endSlice=undefined]\n     * @returns {Number|dc.dataTable}\n     */\n    _chart.endSlice = function (endSlice) {\n        if (!arguments.length) {\n            return _endSlice;\n        }\n        _endSlice = endSlice;\n        return _chart;\n    };\n\n    /**\n     * Get or set column functions. The data table widget supports several methods of specifying the\n     * columns to display.\n     *\n     * The original method uses an array of functions to generate dynamic columns. Column functions\n     * are simple javascript functions with only one input argument `d` which represents a row in\n     * the data set. The return value of these functions will be used to generate the content for\n     * each cell. However, this method requires the HTML for the table to have a fixed set of column\n     * headers.\n     *\n     * <pre><code>chart.columns([\n     *     function(d) { return d.date; },\n     *     function(d) { return d.open; },\n     *     function(d) { return d.close; },\n     *     function(d) { return numberFormat(d.close - d.open); },\n     *     function(d) { return d.volume; }\n     * ]);\n     * </code></pre>\n     *\n     * In the second method, you can list the columns to read from the data without specifying it as\n     * a function, except where necessary (ie, computed columns).  Note the data element name is\n     * capitalized when displayed in the table header. You can also mix in functions as necessary,\n     * using the third `{label, format}` form, as shown below.\n     *\n     * <pre><code>chart.columns([\n     *     \"date\",    // d[\"date\"], ie, a field accessor; capitalized automatically\n     *     \"open\",    // ...\n     *     \"close\",   // ...\n     *     {\n     *         label: \"Change\",\n     *         format: function (d) {\n     *             return numberFormat(d.close - d.open);\n     *         }\n     *     },\n     *     \"volume\"   // d[\"volume\"], ie, a field accessor; capitalized automatically\n     * ]);\n     * </code></pre>\n     *\n     * In the third example, we specify all fields using the `{label, format}` method:\n     * <pre><code>chart.columns([\n     *     {\n     *         label: \"Date\",\n     *         format: function (d) { return d.date; }\n     *     },\n     *     {\n     *         label: \"Open\",\n     *         format: function (d) { return numberFormat(d.open); }\n     *     },\n     *     {\n     *         label: \"Close\",\n     *         format: function (d) { return numberFormat(d.close); }\n     *     },\n     *     {\n     *         label: \"Change\",\n     *         format: function (d) { return numberFormat(d.close - d.open); }\n     *     },\n     *     {\n     *         label: \"Volume\",\n     *         format: function (d) { return d.volume; }\n     *     }\n     * ]);\n     * </code></pre>\n     *\n     * You may wish to override the dataTable functions `_doColumnHeaderCapitalize` and\n     * `_doColumnHeaderFnToString`, which are used internally to translate the column information or\n     * function into a displayed header. The first one is used on the \"string\" column specifier; the\n     * second is used to transform a stringified function into something displayable. For the Stock\n     * example, the function for Change becomes the table header **d.close - d.open**.\n     *\n     * Finally, you can even specify a completely different form of column definition. To do this,\n     * override `_chart._doColumnHeaderFormat` and `_chart._doColumnValueFormat` Be aware that\n     * fields without numberFormat specification will be displayed just as they are stored in the\n     * data, unformatted.\n     * @method columns\n     * @memberof dc.dataTable\n     * @instance\n     * @param {Array<Function>} [columns=[]]\n     * @returns {Array<Function>}|dc.dataTable}\n     */\n    _chart.columns = function (columns) {\n        if (!arguments.length) {\n            return _columns;\n        }\n        _columns = columns;\n        return _chart;\n    };\n\n    /**\n     * Get or set sort-by function. This function works as a value accessor at row level and returns a\n     * particular field to be sorted by.\n     * @method sortBy\n     * @memberof dc.dataTable\n     * @instance\n     * @example\n     * chart.sortBy(function(d) {\n     *     return d.date;\n     * });\n     * @param {Function} [sortBy=identity function]\n     * @returns {Function|dc.dataTable}\n     */\n    _chart.sortBy = function (sortBy) {\n        if (!arguments.length) {\n            return _sortBy;\n        }\n        _sortBy = sortBy;\n        return _chart;\n    };\n\n    /**\n     * Get or set sort order. If the order is `d3.ascending`, the data table will use\n     * `dimension().bottom()` to fetch the data; otherwise it will use `dimension().top()`\n     * @method order\n     * @memberof dc.dataTable\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_ascending d3.ascending}\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_descending d3.descending}\n     * @example\n     * chart.order(d3.descending);\n     * @param {Function} [order=d3.ascending]\n     * @returns {Function|dc.dataTable}\n     */\n    _chart.order = function (order) {\n        if (!arguments.length) {\n            return _order;\n        }\n        _order = order;\n        return _chart;\n    };\n\n    /**\n     * Get or set if group rows will be shown. The dataTable {@link dc.dataTable#group group}\n     * function must be specified even if groups are not shown.\n     * @method showGroups\n     * @memberof dc.dataTable\n     * @instance\n     * @example\n     * chart\n     *     .group([value], [name])\n     *     .showGroups(true|false);\n     * @param {Boolean} [showGroups=true]\n     * @returns {Boolean|dc.dataTable}\n     */\n    _chart.showGroups = function (showGroups) {\n        if (!arguments.length) {\n            return _showGroups;\n        }\n        _showGroups = showGroups;\n        return _chart;\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * Data grid is a simple widget designed to list the filtered records, providing\n * a simple way to define how the items are displayed.\n *\n * Note: Unlike other charts, the data grid chart (and data table) use the {@link dc.dataGrid#group group} attribute as a keying function\n * for {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#nest nesting} the data together in groups.\n * Do not pass in a crossfilter group as this will not work.\n *\n * Examples:\n * - {@link http://europarl.me/dc.js/web/ep/index.html List of members of the european parliament}\n * @class dataGrid\n * @memberof dc\n * @mixes dc.baseMixin\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.dataGrid}\n */\ndc.dataGrid = function (parent, chartGroup) {\n    var LABEL_CSS_CLASS = 'dc-grid-label';\n    var ITEM_CSS_CLASS = 'dc-grid-item';\n    var GROUP_CSS_CLASS = 'dc-grid-group';\n    var GRID_CSS_CLASS = 'dc-grid-top';\n\n    var _chart = dc.baseMixin({});\n\n    var _size = 999; // shouldn't be needed, but you might\n    var _html = function (d) { return 'you need to provide an html() handling param:  ' + JSON.stringify(d); };\n    var _sortBy = function (d) {\n        return d;\n    };\n    var _order = d3.ascending;\n    var _beginSlice = 0, _endSlice;\n\n    var _htmlGroup = function (d) {\n        return '<div class=\\'' + GROUP_CSS_CLASS + '\\'><h1 class=\\'' + LABEL_CSS_CLASS + '\\'>' +\n            _chart.keyAccessor()(d) + '</h1></div>';\n    };\n\n    _chart._doRender = function () {\n        _chart.selectAll('div.' + GRID_CSS_CLASS).remove();\n\n        renderItems(renderGroups());\n\n        return _chart;\n    };\n\n    function renderGroups () {\n        var groups = _chart.root().selectAll('div.' + GRID_CSS_CLASS)\n                .data(nestEntries(), function (d) {\n                    return _chart.keyAccessor()(d);\n                });\n\n        var itemGroup = groups\n                .enter()\n                .append('div')\n                .attr('class', GRID_CSS_CLASS);\n\n        if (_htmlGroup) {\n            itemGroup\n                .html(function (d) {\n                    return _htmlGroup(d);\n                });\n        }\n\n        groups.exit().remove();\n        return itemGroup;\n    }\n\n    function nestEntries () {\n        var entries = _chart.dimension().top(_size);\n\n        return d3.nest()\n            .key(_chart.group())\n            .sortKeys(_order)\n            .entries(entries.sort(function (a, b) {\n                return _order(_sortBy(a), _sortBy(b));\n            }).slice(_beginSlice, _endSlice));\n    }\n\n    function renderItems (groups) {\n        var items = groups.order()\n                .selectAll('div.' + ITEM_CSS_CLASS)\n                .data(function (d) {\n                    return d.values;\n                });\n\n        items.enter()\n            .append('div')\n            .attr('class', ITEM_CSS_CLASS)\n            .html(function (d) {\n                return _html(d);\n            });\n\n        items.exit().remove();\n\n        return items;\n    }\n\n    _chart._doRedraw = function () {\n        return _chart._doRender();\n    };\n\n    /**\n     * Get or set the group function for the data grid. The group function takes a data row and\n     * returns the key to specify to {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_nest d3.nest}\n     * to split rows into groups.\n     *\n     * Do not pass in a crossfilter group as this will not work.\n     * @method group\n     * @memberof dc.dataGrid\n     * @instance\n     * @example\n     * // group rows by the value of their field\n     * chart\n     *     .group(function(d) { return d.field; })\n     * @param {Function} groupFunction Function taking a row of data and returning the nest key.\n     * @returns {Function|dc.dataTable}\n     */\n\n    /**\n     * Get or set the index of the beginning slice which determines which entries get displayed by the widget.\n     * Useful when implementing pagination.\n     * @method beginSlice\n     * @memberof dc.dataGrid\n     * @instance\n     * @param {Number} [beginSlice=0]\n     * @returns {Number|dc.dataGrid}\n     */\n    _chart.beginSlice = function (beginSlice) {\n        if (!arguments.length) {\n            return _beginSlice;\n        }\n        _beginSlice = beginSlice;\n        return _chart;\n    };\n\n    /**\n     * Get or set the index of the end slice which determines which entries get displayed by the widget.\n     * Useful when implementing pagination.\n     * @method endSlice\n     * @memberof dc.dataGrid\n     * @instance\n     * @param {Number} [endSlice]\n     * @returns {Number|dc.dataGrid}\n     */\n    _chart.endSlice = function (endSlice) {\n        if (!arguments.length) {\n            return _endSlice;\n        }\n        _endSlice = endSlice;\n        return _chart;\n    };\n\n    /**\n     * Get or set the grid size which determines the number of items displayed by the widget.\n     * @method size\n     * @memberof dc.dataGrid\n     * @instance\n     * @param {Number} [size=999]\n     * @returns {Number|dc.dataGrid}\n     */\n    _chart.size = function (size) {\n        if (!arguments.length) {\n            return _size;\n        }\n        _size = size;\n        return _chart;\n    };\n\n    /**\n     * Get or set the function that formats an item. The data grid widget uses a\n     * function to generate dynamic html. Use your favourite templating engine or\n     * generate the string directly.\n     * @method html\n     * @memberof dc.dataGrid\n     * @instance\n     * @example\n     * chart.html(function (d) { return '<div class='item '+data.exampleCategory+''>'+data.exampleString+'</div>';});\n     * @param {Function} [html]\n     * @returns {Function|dc.dataGrid}\n     */\n    _chart.html = function (html) {\n        if (!arguments.length) {\n            return _html;\n        }\n        _html = html;\n        return _chart;\n    };\n\n    /**\n     * Get or set the function that formats a group label.\n     * @method htmlGroup\n     * @memberof dc.dataGrid\n     * @instance\n     * @example\n     * chart.htmlGroup (function (d) { return '<h2>'.d.key . 'with ' . d.values.length .' items</h2>'});\n     * @param {Function} [htmlGroup]\n     * @returns {Function|dc.dataGrid}\n     */\n    _chart.htmlGroup = function (htmlGroup) {\n        if (!arguments.length) {\n            return _htmlGroup;\n        }\n        _htmlGroup = htmlGroup;\n        return _chart;\n    };\n\n    /**\n     * Get or set sort-by function. This function works as a value accessor at the item\n     * level and returns a particular field to be sorted.\n     * @method sortBy\n     * @memberof dc.dataGrid\n     * @instance\n     * @example\n     * chart.sortBy(function(d) {\n     *     return d.date;\n     * });\n     * @param {Function} [sortByFunction]\n     * @returns {Function|dc.dataGrid}\n     */\n    _chart.sortBy = function (sortByFunction) {\n        if (!arguments.length) {\n            return _sortBy;\n        }\n        _sortBy = sortByFunction;\n        return _chart;\n    };\n\n    /**\n     * Get or set sort the order function.\n     * @method order\n     * @memberof dc.dataGrid\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_ascending d3.ascending}\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_descending d3.descending}\n     * @example\n     * chart.order(d3.descending);\n     * @param {Function} [order=d3.ascending]\n     * @returns {Function|dc.dataGrid}\n     */\n    _chart.order = function (order) {\n        if (!arguments.length) {\n            return _order;\n        }\n        _order = order;\n        return _chart;\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * A concrete implementation of a general purpose bubble chart that allows data visualization using the\n * following dimensions:\n * - x axis position\n * - y axis position\n * - bubble radius\n * - color\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * - {@link http://dc-js.github.com/dc.js/vc/index.html US Venture Capital Landscape 2011}\n * @class bubbleChart\n * @memberof dc\n * @mixes dc.bubbleMixin\n * @mixes dc.coordinateGridMixin\n * @example\n * // create a bubble chart under #chart-container1 element using the default global chart group\n * var bubbleChart1 = dc.bubbleChart('#chart-container1');\n * // create a bubble chart under #chart-container2 element using chart group A\n * var bubbleChart2 = dc.bubbleChart('#chart-container2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.bubbleChart}\n */\ndc.bubbleChart = function (parent, chartGroup) {\n    var _chart = dc.bubbleMixin(dc.coordinateGridMixin({}));\n\n    var _elasticRadius = false;\n    var _sortBubbleSize = false;\n\n    _chart.transitionDuration(750);\n\n    _chart.transitionDelay(0);\n\n    var bubbleLocator = function (d) {\n        return 'translate(' + (bubbleX(d)) + ',' + (bubbleY(d)) + ')';\n    };\n\n    /**\n     * Turn on or off the elastic bubble radius feature, or return the value of the flag. If this\n     * feature is turned on, then bubble radii will be automatically rescaled to fit the chart better.\n     * @method elasticRadius\n     * @memberof dc.bubbleChart\n     * @instance\n     * @param {Boolean} [elasticRadius=false]\n     * @returns {Boolean|dc.bubbleChart}\n     */\n    _chart.elasticRadius = function (elasticRadius) {\n        if (!arguments.length) {\n            return _elasticRadius;\n        }\n        _elasticRadius = elasticRadius;\n        return _chart;\n    };\n\n    /**\n     * Turn on or off the bubble sorting feature, or return the value of the flag. If enabled,\n     * bubbles will be sorted by their radius, with smaller bubbles in front.\n     * @method sortBubbleSize\n     * @memberof dc.bubbleChart\n     * @instance\n     * @param {Boolean} [sortBubbleSize=false]\n     * @returns {Boolean|dc.bubbleChart}\n     */\n    _chart.sortBubbleSize = function (sortBubbleSize) {\n        if (!arguments.length) {\n            return _sortBubbleSize;\n        }\n        _sortBubbleSize = sortBubbleSize;\n        return _chart;\n    };\n\n    _chart.plotData = function () {\n        if (_elasticRadius) {\n            _chart.r().domain([_chart.rMin(), _chart.rMax()]);\n        }\n\n        _chart.r().range([_chart.MIN_RADIUS, _chart.xAxisLength() * _chart.maxBubbleRelativeSize()]);\n\n        var data = _chart.data();\n        if (_sortBubbleSize) {\n            // sort descending so smaller bubbles are on top\n            var radiusAccessor = _chart.radiusValueAccessor();\n            data.sort(function (a, b) { return d3.descending(radiusAccessor(a), radiusAccessor(b)); });\n        }\n        var bubbleG = _chart.chartBodyG().selectAll('g.' + _chart.BUBBLE_NODE_CLASS)\n                .data(data, function (d) { return d.key; });\n        if (_sortBubbleSize) {\n            // Call order here to update dom order based on sort\n            bubbleG.order();\n        }\n\n        renderNodes(bubbleG);\n\n        updateNodes(bubbleG);\n\n        removeNodes(bubbleG);\n\n        _chart.fadeDeselectedArea();\n    };\n\n    function renderNodes (bubbleG) {\n        var bubbleGEnter = bubbleG.enter().append('g');\n\n        bubbleGEnter\n            .attr('class', _chart.BUBBLE_NODE_CLASS)\n            .attr('transform', bubbleLocator)\n            .append('circle').attr('class', function (d, i) {\n                return _chart.BUBBLE_CLASS + ' _' + i;\n            })\n            .on('click', _chart.onClick)\n            .attr('fill', _chart.getColor)\n            .attr('r', 0);\n        dc.transition(bubbleG, _chart.transitionDuration(), _chart.transitionDelay())\n            .select('circle.' + _chart.BUBBLE_CLASS)\n            .attr('r', function (d) {\n                return _chart.bubbleR(d);\n            })\n            .attr('opacity', function (d) {\n                return (_chart.bubbleR(d) > 0) ? 1 : 0;\n            });\n\n        _chart._doRenderLabel(bubbleGEnter);\n\n        _chart._doRenderTitles(bubbleGEnter);\n    }\n\n    function updateNodes (bubbleG) {\n        dc.transition(bubbleG, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', bubbleLocator)\n            .select('circle.' + _chart.BUBBLE_CLASS)\n            .attr('fill', _chart.getColor)\n            .attr('r', function (d) {\n                return _chart.bubbleR(d);\n            })\n            .attr('opacity', function (d) {\n                return (_chart.bubbleR(d) > 0) ? 1 : 0;\n            });\n\n        _chart.doUpdateLabels(bubbleG);\n        _chart.doUpdateTitles(bubbleG);\n    }\n\n    function removeNodes (bubbleG) {\n        bubbleG.exit().remove();\n    }\n\n    function bubbleX (d) {\n        var x = _chart.x()(_chart.keyAccessor()(d));\n        if (isNaN(x)) {\n            x = 0;\n        }\n        return x;\n    }\n\n    function bubbleY (d) {\n        var y = _chart.y()(_chart.valueAccessor()(d));\n        if (isNaN(y)) {\n            y = 0;\n        }\n        return y;\n    }\n\n    _chart.renderBrush = function () {\n        // override default x axis brush from parent chart\n    };\n\n    _chart.redrawBrush = function () {\n        // override default x axis brush from parent chart\n        _chart.fadeDeselectedArea();\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * Composite charts are a special kind of chart that render multiple charts on the same Coordinate\n * Grid. You can overlay (compose) different bar/line/area charts in a single composite chart to\n * achieve some quite flexible charting effects.\n * @class compositeChart\n * @memberof dc\n * @mixes dc.coordinateGridMixin\n * @example\n * // create a composite chart under #chart-container1 element using the default global chart group\n * var compositeChart1 = dc.compositeChart('#chart-container1');\n * // create a composite chart under #chart-container2 element using chart group A\n * var compositeChart2 = dc.compositeChart('#chart-container2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.compositeChart}\n */\ndc.compositeChart = function (parent, chartGroup) {\n\n    var SUB_CHART_CLASS = 'sub';\n    var DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING = 12;\n\n    var _chart = dc.coordinateGridMixin({});\n    var _children = [];\n\n    var _childOptions = {};\n\n    var _shareColors = false,\n        _shareTitle = true,\n        _alignYAxes = false;\n\n    var _rightYAxis = d3.svg.axis(),\n        _rightYAxisLabel = 0,\n        _rightYAxisLabelPadding = DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING,\n        _rightY,\n        _rightAxisGridLines = false;\n\n    _chart._mandatoryAttributes([]);\n    _chart.transitionDuration(500);\n    _chart.transitionDelay(0);\n\n    dc.override(_chart, '_generateG', function () {\n        var g = this.__generateG();\n\n        for (var i = 0; i < _children.length; ++i) {\n            var child = _children[i];\n\n            generateChildG(child, i);\n\n            if (!child.dimension()) {\n                child.dimension(_chart.dimension());\n            }\n            if (!child.group()) {\n                child.group(_chart.group());\n            }\n\n            child.chartGroup(_chart.chartGroup());\n            child.svg(_chart.svg());\n            child.xUnits(_chart.xUnits());\n            child.transitionDuration(_chart.transitionDuration(), _chart.transitionDelay());\n            child.brushOn(_chart.brushOn());\n            child.renderTitle(_chart.renderTitle());\n            child.elasticX(_chart.elasticX());\n        }\n\n        return g;\n    });\n\n    _chart._brushing = function () {\n        var extent = _chart.extendBrush();\n        var brushIsEmpty = _chart.brushIsEmpty(extent);\n\n        for (var i = 0; i < _children.length; ++i) {\n            _children[i].replaceFilter(brushIsEmpty ? null : extent);\n        }\n    };\n\n    _chart._prepareYAxis = function () {\n        var left = (leftYAxisChildren().length !== 0);\n        var right = (rightYAxisChildren().length !== 0);\n        var ranges = calculateYAxisRanges(left, right);\n\n        if (left) { prepareLeftYAxis(ranges); }\n        if (right) { prepareRightYAxis(ranges); }\n\n        if (leftYAxisChildren().length > 0 && !_rightAxisGridLines) {\n            _chart._renderHorizontalGridLinesForAxis(_chart.g(), _chart.y(), _chart.yAxis());\n        } else if (rightYAxisChildren().length > 0) {\n            _chart._renderHorizontalGridLinesForAxis(_chart.g(), _rightY, _rightYAxis);\n        }\n    };\n\n    _chart.renderYAxis = function () {\n        if (leftYAxisChildren().length !== 0) {\n            _chart.renderYAxisAt('y', _chart.yAxis(), _chart.margins().left);\n            _chart.renderYAxisLabel('y', _chart.yAxisLabel(), -90);\n        }\n\n        if (rightYAxisChildren().length !== 0) {\n            _chart.renderYAxisAt('yr', _chart.rightYAxis(), _chart.width() - _chart.margins().right);\n            _chart.renderYAxisLabel('yr', _chart.rightYAxisLabel(), 90, _chart.width() - _rightYAxisLabelPadding);\n        }\n    };\n\n    function calculateYAxisRanges (left, right) {\n        var lyAxisMin, lyAxisMax, ryAxisMin, ryAxisMax;\n        var ranges;\n\n        if (left) {\n            lyAxisMin = yAxisMin();\n            lyAxisMax = yAxisMax();\n        }\n\n        if (right) {\n            ryAxisMin = rightYAxisMin();\n            ryAxisMax = rightYAxisMax();\n        }\n\n        if (_chart.alignYAxes() && left && right) {\n            ranges = alignYAxisRanges(lyAxisMin, lyAxisMax, ryAxisMin, ryAxisMax);\n        }\n\n        return ranges || {\n            lyAxisMin: lyAxisMin,\n            lyAxisMax: lyAxisMax,\n            ryAxisMin: ryAxisMin,\n            ryAxisMax: ryAxisMax\n        };\n    }\n\n    function alignYAxisRanges (lyAxisMin, lyAxisMax, ryAxisMin, ryAxisMax) {\n        // since the two series will share a zero, each Y is just a multiple\n        // of the other. and the ratio should be the ratio of the ranges of the\n        // input data, so that they come out the same height. so we just min/max\n\n        // note: both ranges already include zero due to the stack mixin (#667)\n        // if #667 changes, we can reconsider whether we want data height or\n        // height from zero to be equal. and it will be possible for the axes\n        // to be aligned but not visible.\n        var extentRatio = (ryAxisMax - ryAxisMin) / (lyAxisMax - lyAxisMin);\n\n        return {\n            lyAxisMin: Math.min(lyAxisMin, ryAxisMin / extentRatio),\n            lyAxisMax: Math.max(lyAxisMax, ryAxisMax / extentRatio),\n            ryAxisMin: Math.min(ryAxisMin, lyAxisMin * extentRatio),\n            ryAxisMax: Math.max(ryAxisMax, lyAxisMax * extentRatio)\n        };\n    }\n\n    function prepareRightYAxis (ranges) {\n        var needDomain = _chart.rightY() === undefined || _chart.elasticY(),\n            needRange = needDomain || _chart.resizing();\n        if (_chart.rightY() === undefined) {\n            _chart.rightY(d3.scale.linear());\n        }\n        if (needDomain) {\n            _chart.rightY().domain([ranges.ryAxisMin, ranges.ryAxisMax]);\n        }\n        if (needRange) {\n            _chart.rightY().rangeRound([_chart.yAxisHeight(), 0]);\n        }\n\n        _chart.rightY().range([_chart.yAxisHeight(), 0]);\n        _chart.rightYAxis(_chart.rightYAxis().scale(_chart.rightY()));\n\n        _chart.rightYAxis().orient('right');\n    }\n\n    function prepareLeftYAxis (ranges) {\n        var needDomain = _chart.y() === undefined || _chart.elasticY(),\n            needRange = needDomain || _chart.resizing();\n        if (_chart.y() === undefined) {\n            _chart.y(d3.scale.linear());\n        }\n        if (needDomain) {\n            _chart.y().domain([ranges.lyAxisMin, ranges.lyAxisMax]);\n        }\n        if (needRange) {\n            _chart.y().rangeRound([_chart.yAxisHeight(), 0]);\n        }\n\n        _chart.y().range([_chart.yAxisHeight(), 0]);\n        _chart.yAxis(_chart.yAxis().scale(_chart.y()));\n\n        _chart.yAxis().orient('left');\n    }\n\n    function generateChildG (child, i) {\n        child._generateG(_chart.g());\n        child.g().attr('class', SUB_CHART_CLASS + ' _' + i);\n    }\n\n    _chart.plotData = function () {\n        for (var i = 0; i < _children.length; ++i) {\n            var child = _children[i];\n\n            if (!child.g()) {\n                generateChildG(child, i);\n            }\n\n            if (_shareColors) {\n                child.colors(_chart.colors());\n            }\n\n            child.x(_chart.x());\n\n            child.xAxis(_chart.xAxis());\n\n            if (child.useRightYAxis()) {\n                child.y(_chart.rightY());\n                child.yAxis(_chart.rightYAxis());\n            } else {\n                child.y(_chart.y());\n                child.yAxis(_chart.yAxis());\n            }\n\n            child.plotData();\n\n            child._activateRenderlets();\n        }\n    };\n\n    /**\n     * Get or set whether to draw gridlines from the right y axis.  Drawing from the left y axis is the\n     * default behavior. This option is only respected when subcharts with both left and right y-axes\n     * are present.\n     * @method useRightAxisGridLines\n     * @memberof dc.compositeChart\n     * @instance\n     * @param {Boolean} [useRightAxisGridLines=false]\n     * @returns {Boolean|dc.compositeChart}\n     */\n    _chart.useRightAxisGridLines = function (useRightAxisGridLines) {\n        if (!arguments) {\n            return _rightAxisGridLines;\n        }\n\n        _rightAxisGridLines = useRightAxisGridLines;\n        return _chart;\n    };\n\n    /**\n     * Get or set chart-specific options for all child charts. This is equivalent to calling\n     * {@link dc.baseMixin#options .options} on each child chart.\n     * @method childOptions\n     * @memberof dc.compositeChart\n     * @instance\n     * @param {Object} [childOptions]\n     * @returns {Object|dc.compositeChart}\n     */\n    _chart.childOptions = function (childOptions) {\n        if (!arguments.length) {\n            return _childOptions;\n        }\n        _childOptions = childOptions;\n        _children.forEach(function (child) {\n            child.options(_childOptions);\n        });\n        return _chart;\n    };\n\n    _chart.fadeDeselectedArea = function () {\n        for (var i = 0; i < _children.length; ++i) {\n            var child = _children[i];\n            child.brush(_chart.brush());\n            child.fadeDeselectedArea();\n        }\n    };\n\n    /**\n     * Set or get the right y axis label.\n     * @method rightYAxisLabel\n     * @memberof dc.compositeChart\n     * @instance\n     * @param {String} [rightYAxisLabel]\n     * @param {Number} [padding]\n     * @returns {String|dc.compositeChart}\n     */\n    _chart.rightYAxisLabel = function (rightYAxisLabel, padding) {\n        if (!arguments.length) {\n            return _rightYAxisLabel;\n        }\n        _rightYAxisLabel = rightYAxisLabel;\n        _chart.margins().right -= _rightYAxisLabelPadding;\n        _rightYAxisLabelPadding = (padding === undefined) ? DEFAULT_RIGHT_Y_AXIS_LABEL_PADDING : padding;\n        _chart.margins().right += _rightYAxisLabelPadding;\n        return _chart;\n    };\n\n    /**\n     * Combine the given charts into one single composite coordinate grid chart.\n     * @method compose\n     * @memberof dc.compositeChart\n     * @instance\n     * @example\n     * moveChart.compose([\n     *     // when creating sub-chart you need to pass in the parent chart\n     *     dc.lineChart(moveChart)\n     *         .group(indexAvgByMonthGroup) // if group is missing then parent's group will be used\n     *         .valueAccessor(function (d){return d.value.avg;})\n     *         // most of the normal functions will continue to work in a composed chart\n     *         .renderArea(true)\n     *         .stack(monthlyMoveGroup, function (d){return d.value;})\n     *         .title(function (d){\n     *             var value = d.value.avg?d.value.avg:d.value;\n     *             if(isNaN(value)) value = 0;\n     *             return dateFormat(d.key) + '\\n' + numberFormat(value);\n     *         }),\n     *     dc.barChart(moveChart)\n     *         .group(volumeByMonthGroup)\n     *         .centerBar(true)\n     * ]);\n     * @param {Array<Chart>} [subChartArray]\n     * @returns {dc.compositeChart}\n     */\n    _chart.compose = function (subChartArray) {\n        _children = subChartArray;\n        _children.forEach(function (child) {\n            child.height(_chart.height());\n            child.width(_chart.width());\n            child.margins(_chart.margins());\n\n            if (_shareTitle) {\n                child.title(_chart.title());\n            }\n\n            child.options(_childOptions);\n        });\n        return _chart;\n    };\n\n    /**\n     * Returns the child charts which are composed into the composite chart.\n     * @method children\n     * @memberof dc.compositeChart\n     * @instance\n     * @returns {Array<dc.baseMixin>}\n     */\n    _chart.children = function () {\n        return _children;\n    };\n\n    /**\n     * Get or set color sharing for the chart. If set, the {@link dc.colorMixin#colors .colors()} value from this chart\n     * will be shared with composed children. Additionally if the child chart implements\n     * Stackable and has not set a custom .colorAccessor, then it will generate a color\n     * specific to its order in the composition.\n     * @method shareColors\n     * @memberof dc.compositeChart\n     * @instance\n     * @param {Boolean} [shareColors=false]\n     * @returns {Boolean|dc.compositeChart}\n     */\n    _chart.shareColors = function (shareColors) {\n        if (!arguments.length) {\n            return _shareColors;\n        }\n        _shareColors = shareColors;\n        return _chart;\n    };\n\n    /**\n     * Get or set title sharing for the chart. If set, the {@link dc.baseMixin#title .title()} value from\n     * this chart will be shared with composed children.\n     * @method shareTitle\n     * @memberof dc.compositeChart\n     * @instance\n     * @param {Boolean} [shareTitle=true]\n     * @returns {Boolean|dc.compositeChart}\n     */\n    _chart.shareTitle = function (shareTitle) {\n        if (!arguments.length) {\n            return _shareTitle;\n        }\n        _shareTitle = shareTitle;\n        return _chart;\n    };\n\n    /**\n     * Get or set the y scale for the right axis. The right y scale is typically automatically\n     * generated by the chart implementation.\n     * @method rightY\n     * @memberof dc.compositeChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Scales.md d3.scale}\n     * @param {d3.scale} [yScale]\n     * @returns {d3.scale|dc.compositeChart}\n     */\n    _chart.rightY = function (yScale) {\n        if (!arguments.length) {\n            return _rightY;\n        }\n        _rightY = yScale;\n        _chart.rescale();\n        return _chart;\n    };\n\n    /**\n     * Get or set alignment between left and right y axes. A line connecting '0' on both y axis\n     * will be parallel to x axis. This only has effect when {@link #dc.coordinateGridMixin+elasticY elasticY} is true.\n     * @method alignYAxes\n     * @memberof dc.compositeChart\n     * @instance\n     * @param {Boolean} [alignYAxes=false]\n     * @returns {Chart}\n     */\n    _chart.alignYAxes = function (alignYAxes) {\n        if (!arguments.length) {\n            return _alignYAxes;\n        }\n        _alignYAxes = alignYAxes;\n        _chart.rescale();\n        return _chart;\n    };\n\n    function leftYAxisChildren () {\n        return _children.filter(function (child) {\n            return !child.useRightYAxis();\n        });\n    }\n\n    function rightYAxisChildren () {\n        return _children.filter(function (child) {\n            return child.useRightYAxis();\n        });\n    }\n\n    function getYAxisMin (charts) {\n        return charts.map(function (c) {\n            return c.yAxisMin();\n        });\n    }\n\n    delete _chart.yAxisMin;\n    function yAxisMin () {\n        return d3.min(getYAxisMin(leftYAxisChildren()));\n    }\n\n    function rightYAxisMin () {\n        return d3.min(getYAxisMin(rightYAxisChildren()));\n    }\n\n    function getYAxisMax (charts) {\n        return charts.map(function (c) {\n            return c.yAxisMax();\n        });\n    }\n\n    delete _chart.yAxisMax;\n    function yAxisMax () {\n        return dc.utils.add(d3.max(getYAxisMax(leftYAxisChildren())), _chart.yAxisPadding());\n    }\n\n    function rightYAxisMax () {\n        return dc.utils.add(d3.max(getYAxisMax(rightYAxisChildren())), _chart.yAxisPadding());\n    }\n\n    function getAllXAxisMinFromChildCharts () {\n        return _children.map(function (c) {\n            return c.xAxisMin();\n        });\n    }\n\n    dc.override(_chart, 'xAxisMin', function () {\n        return dc.utils.subtract(d3.min(getAllXAxisMinFromChildCharts()), _chart.xAxisPadding());\n    });\n\n    function getAllXAxisMaxFromChildCharts () {\n        return _children.map(function (c) {\n            return c.xAxisMax();\n        });\n    }\n\n    dc.override(_chart, 'xAxisMax', function () {\n        return dc.utils.add(d3.max(getAllXAxisMaxFromChildCharts()), _chart.xAxisPadding());\n    });\n\n    _chart.legendables = function () {\n        return _children.reduce(function (items, child) {\n            if (_shareColors) {\n                child.colors(_chart.colors());\n            }\n            items.push.apply(items, child.legendables());\n            return items;\n        }, []);\n    };\n\n    _chart.legendHighlight = function (d) {\n        for (var j = 0; j < _children.length; ++j) {\n            var child = _children[j];\n            child.legendHighlight(d);\n        }\n    };\n\n    _chart.legendReset = function (d) {\n        for (var j = 0; j < _children.length; ++j) {\n            var child = _children[j];\n            child.legendReset(d);\n        }\n    };\n\n    _chart.legendToggle = function () {\n        console.log('composite should not be getting legendToggle itself');\n    };\n\n    /**\n     * Set or get the right y axis used by the composite chart. This function is most useful when y\n     * axis customization is required. The y axis in dc.js is an instance of a [d3 axis\n     * object](https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis) therefore it supports any valid\n     * d3 axis manipulation.\n     *\n     * **Caution**: The y axis is usually generated internally by dc; resetting it may cause\n     * unexpected results.\n     * @method rightYAxis\n     * @memberof dc.compositeChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis d3.svg.axis}\n     * @example\n     * // customize y axis tick format\n     * chart.rightYAxis().tickFormat(function (v) {return v + '%';});\n     * // customize y axis tick values\n     * chart.rightYAxis().tickValues([0, 100, 200, 300]);\n     * @param {d3.svg.axis} [rightYAxis]\n     * @returns {d3.svg.axis|dc.compositeChart}\n     */\n    _chart.rightYAxis = function (rightYAxis) {\n        if (!arguments.length) {\n            return _rightYAxis;\n        }\n        _rightYAxis = rightYAxis;\n        return _chart;\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * A series chart is a chart that shows multiple series of data overlaid on one chart, where the\n * series is specified in the data. It is a specialization of Composite Chart and inherits all\n * composite features other than recomposing the chart.\n *\n * Examples:\n * - {@link http://dc-js.github.io/dc.js/examples/series.html Series Chart}\n * @class seriesChart\n * @memberof dc\n * @mixes dc.compositeChart\n * @example\n * // create a series chart under #chart-container1 element using the default global chart group\n * var seriesChart1 = dc.seriesChart(\"#chart-container1\");\n * // create a series chart under #chart-container2 element using chart group A\n * var seriesChart2 = dc.seriesChart(\"#chart-container2\", \"chartGroupA\");\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.seriesChart}\n */\ndc.seriesChart = function (parent, chartGroup) {\n    var _chart = dc.compositeChart(parent, chartGroup);\n\n    function keySort (a, b) {\n        return d3.ascending(_chart.keyAccessor()(a), _chart.keyAccessor()(b));\n    }\n\n    var _charts = {};\n    var _chartFunction = dc.lineChart;\n    var _seriesAccessor;\n    var _seriesSort = d3.ascending;\n    var _valueSort = keySort;\n\n    _chart._mandatoryAttributes().push('seriesAccessor', 'chart');\n    _chart.shareColors(true);\n\n    _chart._preprocessData = function () {\n        var keep = [];\n        var childrenChanged;\n        var nester = d3.nest().key(_seriesAccessor);\n        if (_seriesSort) {\n            nester.sortKeys(_seriesSort);\n        }\n        if (_valueSort) {\n            nester.sortValues(_valueSort);\n        }\n        var nesting = nester.entries(_chart.data());\n        var children =\n            nesting.map(function (sub, i) {\n                var subChart = _charts[sub.key] || _chartFunction.call(_chart, _chart, chartGroup, sub.key, i);\n                if (!_charts[sub.key]) {\n                    childrenChanged = true;\n                }\n                _charts[sub.key] = subChart;\n                keep.push(sub.key);\n                return subChart\n                    .dimension(_chart.dimension())\n                    .group({all: d3.functor(sub.values)}, sub.key)\n                    .keyAccessor(_chart.keyAccessor())\n                    .valueAccessor(_chart.valueAccessor())\n                    .brushOn(_chart.brushOn());\n            });\n        // this works around the fact compositeChart doesn't really\n        // have a removal interface\n        Object.keys(_charts)\n            .filter(function (c) {return keep.indexOf(c) === -1;})\n            .forEach(function (c) {\n                clearChart(c);\n                childrenChanged = true;\n            });\n        _chart._compose(children);\n        if (childrenChanged && _chart.legend()) {\n            _chart.legend().render();\n        }\n    };\n\n    function clearChart (c) {\n        if (_charts[c].g()) {\n            _charts[c].g().remove();\n        }\n        delete _charts[c];\n    }\n\n    function resetChildren () {\n        Object.keys(_charts).map(clearChart);\n        _charts = {};\n    }\n\n    /**\n     * Get or set the chart function, which generates the child charts.\n     * @method chart\n     * @memberof dc.seriesChart\n     * @instance\n     * @example\n     * // put interpolation on the line charts used for the series\n     * chart.chart(function(c) { return dc.lineChart(c).interpolate('basis'); })\n     * // do a scatter series chart\n     * chart.chart(dc.scatterPlot)\n     * @param {Function} [chartFunction=dc.lineChart]\n     * @returns {Function|dc.seriesChart}\n     */\n    _chart.chart = function (chartFunction) {\n        if (!arguments.length) {\n            return _chartFunction;\n        }\n        _chartFunction = chartFunction;\n        resetChildren();\n        return _chart;\n    };\n\n    /**\n     * **mandatory**\n     *\n     * Get or set accessor function for the displayed series. Given a datum, this function\n     * should return the series that datum belongs to.\n     * @method seriesAccessor\n     * @memberof dc.seriesChart\n     * @instance\n     * @example\n     * // simple series accessor\n     * chart.seriesAccessor(function(d) { return \"Expt: \" + d.key[0]; })\n     * @param {Function} [accessor]\n     * @returns {Function|dc.seriesChart}\n     */\n    _chart.seriesAccessor = function (accessor) {\n        if (!arguments.length) {\n            return _seriesAccessor;\n        }\n        _seriesAccessor = accessor;\n        resetChildren();\n        return _chart;\n    };\n\n    /**\n     * Get or set a function to sort the list of series by, given series values.\n     * @method seriesSort\n     * @memberof dc.seriesChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_ascending d3.ascending}\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_descending d3.descending}\n     * @example\n     * chart.seriesSort(d3.descending);\n     * @param {Function} [sortFunction=d3.ascending]\n     * @returns {Function|dc.seriesChart}\n     */\n    _chart.seriesSort = function (sortFunction) {\n        if (!arguments.length) {\n            return _seriesSort;\n        }\n        _seriesSort = sortFunction;\n        resetChildren();\n        return _chart;\n    };\n\n    /**\n     * Get or set a function to sort each series values by. By default this is the key accessor which,\n     * for example, will ensure a lineChart series connects its points in increasing key/x order,\n     * rather than haphazardly.\n     * @method valueSort\n     * @memberof dc.seriesChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_ascending d3.ascending}\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md#d3_descending d3.descending}\n     * @example\n     * // Default value sort\n     * _chart.valueSort(function keySort (a, b) {\n     *     return d3.ascending(_chart.keyAccessor()(a), _chart.keyAccessor()(b));\n     * });\n     * @param {Function} [sortFunction]\n     * @returns {Function|dc.seriesChart}\n     */\n    _chart.valueSort = function (sortFunction) {\n        if (!arguments.length) {\n            return _valueSort;\n        }\n        _valueSort = sortFunction;\n        resetChildren();\n        return _chart;\n    };\n\n    // make compose private\n    _chart._compose = _chart.compose;\n    delete _chart.compose;\n\n    return _chart;\n};\n\n/**\n * The geo choropleth chart is designed as an easy way to create a crossfilter driven choropleth map\n * from GeoJson data. This chart implementation was inspired by\n * {@link http://bl.ocks.org/4060606 the great d3 choropleth example}.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/vc/index.html US Venture Capital Landscape 2011}\n * @class geoChoroplethChart\n * @memberof dc\n * @mixes dc.colorMixin\n * @mixes dc.baseMixin\n * @example\n * // create a choropleth chart under '#us-chart' element using the default global chart group\n * var chart1 = dc.geoChoroplethChart('#us-chart');\n * // create a choropleth chart under '#us-chart2' element using chart group A\n * var chart2 = dc.compositeChart('#us-chart2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.geoChoroplethChart}\n */\ndc.geoChoroplethChart = function (parent, chartGroup) {\n    var _chart = dc.colorMixin(dc.baseMixin({}));\n\n    _chart.colorAccessor(function (d) {\n        return d || 0;\n    });\n\n    var _geoPath = d3.geo.path();\n    var _projectionFlag;\n\n    var _geoJsons = [];\n\n    _chart._doRender = function () {\n        _chart.resetSvg();\n        for (var layerIndex = 0; layerIndex < _geoJsons.length; ++layerIndex) {\n            var states = _chart.svg().append('g')\n                .attr('class', 'layer' + layerIndex);\n\n            var regionG = states.selectAll('g.' + geoJson(layerIndex).name)\n                .data(geoJson(layerIndex).data)\n                .enter()\n                .append('g')\n                .attr('class', geoJson(layerIndex).name);\n\n            regionG\n                .append('path')\n                .attr('fill', 'white')\n                .attr('d', _geoPath);\n\n            regionG.append('title');\n\n            plotData(layerIndex);\n        }\n        _projectionFlag = false;\n    };\n\n    function plotData (layerIndex) {\n        var data = generateLayeredData();\n\n        if (isDataLayer(layerIndex)) {\n            var regionG = renderRegionG(layerIndex);\n\n            renderPaths(regionG, layerIndex, data);\n\n            renderTitle(regionG, layerIndex, data);\n        }\n    }\n\n    function generateLayeredData () {\n        var data = {};\n        var groupAll = _chart.data();\n        for (var i = 0; i < groupAll.length; ++i) {\n            data[_chart.keyAccessor()(groupAll[i])] = _chart.valueAccessor()(groupAll[i]);\n        }\n        return data;\n    }\n\n    function isDataLayer (layerIndex) {\n        return geoJson(layerIndex).keyAccessor;\n    }\n\n    function renderRegionG (layerIndex) {\n        var regionG = _chart.svg()\n            .selectAll(layerSelector(layerIndex))\n            .classed('selected', function (d) {\n                return isSelected(layerIndex, d);\n            })\n            .classed('deselected', function (d) {\n                return isDeselected(layerIndex, d);\n            })\n            .attr('class', function (d) {\n                var layerNameClass = geoJson(layerIndex).name;\n                var regionClass = dc.utils.nameToId(geoJson(layerIndex).keyAccessor(d));\n                var baseClasses = layerNameClass + ' ' + regionClass;\n                if (isSelected(layerIndex, d)) {\n                    baseClasses += ' selected';\n                }\n                if (isDeselected(layerIndex, d)) {\n                    baseClasses += ' deselected';\n                }\n                return baseClasses;\n            });\n        return regionG;\n    }\n\n    function layerSelector (layerIndex) {\n        return 'g.layer' + layerIndex + ' g.' + geoJson(layerIndex).name;\n    }\n\n    function isSelected (layerIndex, d) {\n        return _chart.hasFilter() && _chart.hasFilter(getKey(layerIndex, d));\n    }\n\n    function isDeselected (layerIndex, d) {\n        return _chart.hasFilter() && !_chart.hasFilter(getKey(layerIndex, d));\n    }\n\n    function getKey (layerIndex, d) {\n        return geoJson(layerIndex).keyAccessor(d);\n    }\n\n    function geoJson (index) {\n        return _geoJsons[index];\n    }\n\n    function renderPaths (regionG, layerIndex, data) {\n        var paths = regionG\n            .select('path')\n            .attr('fill', function () {\n                var currentFill = d3.select(this).attr('fill');\n                if (currentFill) {\n                    return currentFill;\n                }\n                return 'none';\n            })\n            .on('click', function (d) {\n                return _chart.onClick(d, layerIndex);\n            });\n\n        dc.transition(paths, _chart.transitionDuration(), _chart.transitionDelay()).attr('fill', function (d, i) {\n            return _chart.getColor(data[geoJson(layerIndex).keyAccessor(d)], i);\n        });\n    }\n\n    _chart.onClick = function (d, layerIndex) {\n        var selectedRegion = geoJson(layerIndex).keyAccessor(d);\n        dc.events.trigger(function () {\n            _chart.filter(selectedRegion);\n            _chart.redrawGroup();\n        });\n    };\n\n    function renderTitle (regionG, layerIndex, data) {\n        if (_chart.renderTitle()) {\n            regionG.selectAll('title').text(function (d) {\n                var key = getKey(layerIndex, d);\n                var value = data[key];\n                return _chart.title()({key: key, value: value});\n            });\n        }\n    }\n\n    _chart._doRedraw = function () {\n        for (var layerIndex = 0; layerIndex < _geoJsons.length; ++layerIndex) {\n            plotData(layerIndex);\n            if (_projectionFlag) {\n                _chart.svg().selectAll('g.' + geoJson(layerIndex).name + ' path').attr('d', _geoPath);\n            }\n        }\n        _projectionFlag = false;\n    };\n\n    /**\n     * **mandatory**\n     *\n     * Use this function to insert a new GeoJson map layer. This function can be invoked multiple times\n     * if you have multiple GeoJson data layers to render on top of each other. If you overlay multiple\n     * layers with the same name the new overlay will override the existing one.\n     * @method overlayGeoJson\n     * @memberof dc.geoChoroplethChart\n     * @instance\n     * @see {@link http://geojson.org/ GeoJSON}\n     * @see {@link https://github.com/topojson/topojson/wiki TopoJSON}\n     * @see {@link https://github.com/topojson/topojson-1.x-api-reference/blob/master/API-Reference.md#wiki-feature topojson.feature}\n     * @example\n     * // insert a layer for rendering US states\n     * chart.overlayGeoJson(statesJson.features, 'state', function(d) {\n     *      return d.properties.name;\n     * });\n     * @param {geoJson} json - a geojson feed\n     * @param {String} name - name of the layer\n     * @param {Function} keyAccessor - accessor function used to extract 'key' from the GeoJson data. The key extracted by\n     * this function should match the keys returned by the crossfilter groups.\n     * @returns {dc.geoChoroplethChart}\n     */\n    _chart.overlayGeoJson = function (json, name, keyAccessor) {\n        for (var i = 0; i < _geoJsons.length; ++i) {\n            if (_geoJsons[i].name === name) {\n                _geoJsons[i].data = json;\n                _geoJsons[i].keyAccessor = keyAccessor;\n                return _chart;\n            }\n        }\n        _geoJsons.push({name: name, data: json, keyAccessor: keyAccessor});\n        return _chart;\n    };\n\n    /**\n     * Set custom geo projection function. See the available\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Geo-Projections.md d3 geo projection functions}.\n     * @method projection\n     * @memberof dc.geoChoroplethChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Geo-Projections.md d3.geo.projection}\n     * @see {@link https://github.com/d3/d3-geo-projection Extended d3.geo.projection}\n     * @param {d3.projection} [projection=d3.geo.albersUsa()]\n     * @returns {dc.geoChoroplethChart}\n     */\n    _chart.projection = function (projection) {\n        _geoPath.projection(projection);\n        _projectionFlag = true;\n        return _chart;\n    };\n\n    /**\n     * Returns all GeoJson layers currently registered with this chart. The returned array is a\n     * reference to this chart's internal data structure, so any modification to this array will also\n     * modify this chart's internal registration.\n     * @method geoJsons\n     * @memberof dc.geoChoroplethChart\n     * @instance\n     * @returns {Array<{name:String, data: Object, accessor: Function}>}\n     */\n    _chart.geoJsons = function () {\n        return _geoJsons;\n    };\n\n    /**\n     * Returns the {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Geo-Paths.md#path d3.geo.path} object used to\n     * render the projection and features.  Can be useful for figuring out the bounding box of the\n     * feature set and thus a way to calculate scale and translation for the projection.\n     * @method geoPath\n     * @memberof dc.geoChoroplethChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Geo-Paths.md#path d3.geo.path}\n     * @returns {d3.geo.path}\n     */\n    _chart.geoPath = function () {\n        return _geoPath;\n    };\n\n    /**\n     * Remove a GeoJson layer from this chart by name\n     * @method removeGeoJson\n     * @memberof dc.geoChoroplethChart\n     * @instance\n     * @param {String} name\n     * @returns {dc.geoChoroplethChart}\n     */\n    _chart.removeGeoJson = function (name) {\n        var geoJsons = [];\n\n        for (var i = 0; i < _geoJsons.length; ++i) {\n            var layer = _geoJsons[i];\n            if (layer.name !== name) {\n                geoJsons.push(layer);\n            }\n        }\n\n        _geoJsons = geoJsons;\n\n        return _chart;\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * The bubble overlay chart is quite different from the typical bubble chart. With the bubble overlay\n * chart you can arbitrarily place bubbles on an existing svg or bitmap image, thus changing the\n * typical x and y positioning while retaining the capability to visualize data using bubble radius\n * and coloring.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n * @class bubbleOverlay\n * @memberof dc\n * @mixes dc.bubbleMixin\n * @mixes dc.baseMixin\n * @example\n * // create a bubble overlay chart on top of the '#chart-container1 svg' element using the default global chart group\n * var bubbleChart1 = dc.bubbleOverlayChart('#chart-container1').svg(d3.select('#chart-container1 svg'));\n * // create a bubble overlay chart on top of the '#chart-container2 svg' element using chart group A\n * var bubbleChart2 = dc.compositeChart('#chart-container2', 'chartGroupA').svg(d3.select('#chart-container2 svg'));\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.bubbleOverlay}\n */\ndc.bubbleOverlay = function (parent, chartGroup) {\n    var BUBBLE_OVERLAY_CLASS = 'bubble-overlay';\n    var BUBBLE_NODE_CLASS = 'node';\n    var BUBBLE_CLASS = 'bubble';\n\n    /**\n     * **mandatory**\n     *\n     * Set the underlying svg image element. Unlike other dc charts this chart will not generate a svg\n     * element; therefore the bubble overlay chart will not work if this function is not invoked. If the\n     * underlying image is a bitmap, then an empty svg will need to be created on top of the image.\n     * @method svg\n     * @memberof dc.bubbleOverlay\n     * @instance\n     * @example\n     * // set up underlying svg element\n     * chart.svg(d3.select('#chart svg'));\n     * @param {SVGElement|d3.selection} [imageElement]\n     * @returns {dc.bubbleOverlay}\n     */\n    var _chart = dc.bubbleMixin(dc.baseMixin({}));\n    var _g;\n    var _points = [];\n\n    _chart.transitionDuration(750);\n\n    _chart.transitionDelay(0);\n\n    _chart.radiusValueAccessor(function (d) {\n        return d.value;\n    });\n\n    /**\n     * **mandatory**\n     *\n     * Set up a data point on the overlay. The name of a data point should match a specific 'key' among\n     * data groups generated using keyAccessor.  If a match is found (point name <-> data group key)\n     * then a bubble will be generated at the position specified by the function. x and y\n     * value specified here are relative to the underlying svg.\n     * @method point\n     * @memberof dc.bubbleOverlay\n     * @instance\n     * @param {String} name\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {dc.bubbleOverlay}\n     */\n    _chart.point = function (name, x, y) {\n        _points.push({name: name, x: x, y: y});\n        return _chart;\n    };\n\n    _chart._doRender = function () {\n        _g = initOverlayG();\n\n        _chart.r().range([_chart.MIN_RADIUS, _chart.width() * _chart.maxBubbleRelativeSize()]);\n\n        initializeBubbles();\n\n        _chart.fadeDeselectedArea();\n\n        return _chart;\n    };\n\n    function initOverlayG () {\n        _g = _chart.select('g.' + BUBBLE_OVERLAY_CLASS);\n        if (_g.empty()) {\n            _g = _chart.svg().append('g').attr('class', BUBBLE_OVERLAY_CLASS);\n        }\n        return _g;\n    }\n\n    function initializeBubbles () {\n        var data = mapData();\n\n        _points.forEach(function (point) {\n            var nodeG = getNodeG(point, data);\n\n            var circle = nodeG.select('circle.' + BUBBLE_CLASS);\n\n            if (circle.empty()) {\n                circle = nodeG.append('circle')\n                    .attr('class', BUBBLE_CLASS)\n                    .attr('r', 0)\n                    .attr('fill', _chart.getColor)\n                    .on('click', _chart.onClick);\n            }\n\n            dc.transition(circle, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('r', function (d) {\n                    return _chart.bubbleR(d);\n                });\n\n            _chart._doRenderLabel(nodeG);\n\n            _chart._doRenderTitles(nodeG);\n        });\n    }\n\n    function mapData () {\n        var data = {};\n        _chart.data().forEach(function (datum) {\n            data[_chart.keyAccessor()(datum)] = datum;\n        });\n        return data;\n    }\n\n    function getNodeG (point, data) {\n        var bubbleNodeClass = BUBBLE_NODE_CLASS + ' ' + dc.utils.nameToId(point.name);\n\n        var nodeG = _g.select('g.' + dc.utils.nameToId(point.name));\n\n        if (nodeG.empty()) {\n            nodeG = _g.append('g')\n                .attr('class', bubbleNodeClass)\n                .attr('transform', 'translate(' + point.x + ',' + point.y + ')');\n        }\n\n        nodeG.datum(data[point.name]);\n\n        return nodeG;\n    }\n\n    _chart._doRedraw = function () {\n        updateBubbles();\n\n        _chart.fadeDeselectedArea();\n\n        return _chart;\n    };\n\n    function updateBubbles () {\n        var data = mapData();\n\n        _points.forEach(function (point) {\n            var nodeG = getNodeG(point, data);\n\n            var circle = nodeG.select('circle.' + BUBBLE_CLASS);\n\n            dc.transition(circle, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('r', function (d) {\n                    return _chart.bubbleR(d);\n                })\n                .attr('fill', _chart.getColor);\n\n            _chart.doUpdateLabels(nodeG);\n\n            _chart.doUpdateTitles(nodeG);\n        });\n    }\n\n    _chart.debug = function (flag) {\n        if (flag) {\n            var debugG = _chart.select('g.' + dc.constants.DEBUG_GROUP_CLASS);\n\n            if (debugG.empty()) {\n                debugG = _chart.svg()\n                    .append('g')\n                    .attr('class', dc.constants.DEBUG_GROUP_CLASS);\n            }\n\n            var debugText = debugG.append('text')\n                .attr('x', 10)\n                .attr('y', 20);\n\n            debugG\n                .append('rect')\n                .attr('width', _chart.width())\n                .attr('height', _chart.height())\n                .on('mousemove', function () {\n                    var position = d3.mouse(debugG.node());\n                    var msg = position[0] + ', ' + position[1];\n                    debugText.text(msg);\n                });\n        } else {\n            _chart.selectAll('.debug').remove();\n        }\n\n        return _chart;\n    };\n\n    _chart.anchor(parent, chartGroup);\n\n    return _chart;\n};\n\n/**\n * Concrete row chart implementation.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * @class rowChart\n * @memberof dc\n * @mixes dc.capMixin\n * @mixes dc.marginMixin\n * @mixes dc.colorMixin\n * @mixes dc.baseMixin\n * @example\n * // create a row chart under #chart-container1 element using the default global chart group\n * var chart1 = dc.rowChart('#chart-container1');\n * // create a row chart under #chart-container2 element using chart group A\n * var chart2 = dc.rowChart('#chart-container2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.rowChart}\n */\ndc.rowChart = function (parent, chartGroup) {\n\n    var _g;\n\n    var _labelOffsetX = 10;\n    var _labelOffsetY = 15;\n    var _hasLabelOffsetY = false;\n    var _dyOffset = '0.35em';  // this helps center labels https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#svg_text\n    var _titleLabelOffsetX = 2;\n\n    var _gap = 5;\n\n    var _fixedBarHeight = false;\n    var _rowCssClass = 'row';\n    var _titleRowCssClass = 'titlerow';\n    var _renderTitleLabel = false;\n\n    var _chart = dc.capMixin(dc.marginMixin(dc.colorMixin(dc.baseMixin({}))));\n\n    var _x;\n\n    var _elasticX;\n\n    var _xAxis = d3.svg.axis().orient('bottom');\n\n    var _rowData;\n\n    _chart.rowsCap = _chart.cap;\n\n    function calculateAxisScale () {\n        if (!_x || _elasticX) {\n            var extent = d3.extent(_rowData, _chart.cappedValueAccessor);\n            if (extent[0] > 0) {\n                extent[0] = 0;\n            }\n            if (extent[1] < 0) {\n                extent[1] = 0;\n            }\n            _x = d3.scale.linear().domain(extent)\n                .range([0, _chart.effectiveWidth()]);\n        }\n        _xAxis.scale(_x);\n    }\n\n    function drawAxis () {\n        var axisG = _g.select('g.axis');\n\n        calculateAxisScale();\n\n        if (axisG.empty()) {\n            axisG = _g.append('g').attr('class', 'axis');\n        }\n        axisG.attr('transform', 'translate(0, ' + _chart.effectiveHeight() + ')');\n\n        dc.transition(axisG, _chart.transitionDuration(), _chart.transitionDelay())\n            .call(_xAxis);\n    }\n\n    _chart._doRender = function () {\n        _chart.resetSvg();\n\n        _g = _chart.svg()\n            .append('g')\n            .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart.margins().top + ')');\n\n        drawChart();\n\n        return _chart;\n    };\n\n    _chart.title(function (d) {\n        return _chart.cappedKeyAccessor(d) + ': ' + _chart.cappedValueAccessor(d);\n    });\n\n    _chart.label(_chart.cappedKeyAccessor);\n\n    /**\n     * Gets or sets the x scale. The x scale can be any d3\n     * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Quantitative-Scales.md quantitive scale}.\n     * @method x\n     * @memberof dc.rowChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Quantitative-Scales.md quantitive scale}\n     * @param {d3.scale} [scale]\n     * @returns {d3.scale|dc.rowChart}\n     */\n    _chart.x = function (scale) {\n        if (!arguments.length) {\n            return _x;\n        }\n        _x = scale;\n        return _chart;\n    };\n\n    function drawGridLines () {\n        _g.selectAll('g.tick')\n            .select('line.grid-line')\n            .remove();\n\n        _g.selectAll('g.tick')\n            .append('line')\n            .attr('class', 'grid-line')\n            .attr('x1', 0)\n            .attr('y1', 0)\n            .attr('x2', 0)\n            .attr('y2', function () {\n                return -_chart.effectiveHeight();\n            });\n    }\n\n    function drawChart () {\n        _rowData = _chart.data();\n\n        drawAxis();\n        drawGridLines();\n\n        var rows = _g.selectAll('g.' + _rowCssClass)\n            .data(_rowData);\n\n        createElements(rows);\n        removeElements(rows);\n        updateElements(rows);\n    }\n\n    function createElements (rows) {\n        var rowEnter = rows.enter()\n            .append('g')\n            .attr('class', function (d, i) {\n                return _rowCssClass + ' _' + i;\n            });\n\n        rowEnter.append('rect').attr('width', 0);\n\n        createLabels(rowEnter);\n    }\n\n    function removeElements (rows) {\n        rows.exit().remove();\n    }\n\n    function rootValue () {\n        var root = _x(0);\n        return (root === -Infinity || root !== root) ? _x(1) : root;\n    }\n\n    function updateElements (rows) {\n        var n = _rowData.length;\n\n        var height;\n        if (!_fixedBarHeight) {\n            height = (_chart.effectiveHeight() - (n + 1) * _gap) / n;\n        } else {\n            height = _fixedBarHeight;\n        }\n\n        // vertically align label in center unless they override the value via property setter\n        if (!_hasLabelOffsetY) {\n            _labelOffsetY = height / 2;\n        }\n\n        var rect = rows.attr('transform', function (d, i) {\n                return 'translate(0,' + ((i + 1) * _gap + i * height) + ')';\n            }).select('rect')\n            .attr('height', height)\n            .attr('fill', _chart.getColor)\n            .on('click', onClick)\n            .classed('deselected', function (d) {\n                return (_chart.hasFilter()) ? !isSelectedRow(d) : false;\n            })\n            .classed('selected', function (d) {\n                return (_chart.hasFilter()) ? isSelectedRow(d) : false;\n            });\n\n        dc.transition(rect, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('width', function (d) {\n                return Math.abs(rootValue() - _x(_chart.valueAccessor()(d)));\n            })\n            .attr('transform', translateX);\n\n        createTitles(rows);\n        updateLabels(rows);\n    }\n\n    function createTitles (rows) {\n        if (_chart.renderTitle()) {\n            rows.select('title').remove();\n            rows.append('title').text(_chart.title());\n        }\n    }\n\n    function createLabels (rowEnter) {\n        if (_chart.renderLabel()) {\n            rowEnter.append('text')\n                .on('click', onClick);\n        }\n        if (_chart.renderTitleLabel()) {\n            rowEnter.append('text')\n                .attr('class', _titleRowCssClass)\n                .on('click', onClick);\n        }\n    }\n\n    function updateLabels (rows) {\n        if (_chart.renderLabel()) {\n            var lab = rows.select('text')\n                .attr('x', _labelOffsetX)\n                .attr('y', _labelOffsetY)\n                .attr('dy', _dyOffset)\n                .on('click', onClick)\n                .attr('class', function (d, i) {\n                    return _rowCssClass + ' _' + i;\n                })\n                .text(function (d) {\n                    return _chart.label()(d);\n                });\n            dc.transition(lab, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('transform', translateX);\n        }\n        if (_chart.renderTitleLabel()) {\n            var titlelab = rows.select('.' + _titleRowCssClass)\n                    .attr('x', _chart.effectiveWidth() - _titleLabelOffsetX)\n                    .attr('y', _labelOffsetY)\n                    .attr('dy', _dyOffset)\n                    .attr('text-anchor', 'end')\n                    .on('click', onClick)\n                    .attr('class', function (d, i) {\n                        return _titleRowCssClass + ' _' + i ;\n                    })\n                    .text(function (d) {\n                        return _chart.title()(d);\n                    });\n            dc.transition(titlelab, _chart.transitionDuration(), _chart.transitionDelay())\n                .attr('transform', translateX);\n        }\n    }\n\n    /**\n     * Turn on/off Title label rendering (values) using SVG style of text-anchor 'end'.\n     * @method renderTitleLabel\n     * @memberof dc.rowChart\n     * @instance\n     * @param {Boolean} [renderTitleLabel=false]\n     * @returns {Boolean|dc.rowChart}\n     */\n    _chart.renderTitleLabel = function (renderTitleLabel) {\n        if (!arguments.length) {\n            return _renderTitleLabel;\n        }\n        _renderTitleLabel = renderTitleLabel;\n        return _chart;\n    };\n\n    function onClick (d) {\n        _chart.onClick(d);\n    }\n\n    function translateX (d) {\n        var x = _x(_chart.cappedValueAccessor(d)),\n            x0 = rootValue(),\n            s = x > x0 ? x0 : x;\n        return 'translate(' + s + ',0)';\n    }\n\n    _chart._doRedraw = function () {\n        drawChart();\n        return _chart;\n    };\n\n    /**\n     * Get the x axis for the row chart instance.  Note: not settable for row charts.\n     * See the {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis d3 axis object}\n     * documention for more information.\n     * @method xAxis\n     * @memberof dc.rowChart\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Axes.md#axis d3.svg.axis}\n     * @example\n     * // customize x axis tick format\n     * chart.xAxis().tickFormat(function (v) {return v + '%';});\n     * // customize x axis tick values\n     * chart.xAxis().tickValues([0, 100, 200, 300]);\n     * @returns {d3.svg.axis}\n     */\n    _chart.xAxis = function () {\n        return _xAxis;\n    };\n\n    /**\n     * Get or set the fixed bar height. Default is [false] which will auto-scale bars.\n     * For example, if you want to fix the height for a specific number of bars (useful in TopN charts)\n     * you could fix height as follows (where count = total number of bars in your TopN and gap is\n     * your vertical gap space).\n     * @method fixedBarHeight\n     * @memberof dc.rowChart\n     * @instance\n     * @example\n     * chart.fixedBarHeight( chartheight - (count + 1) * gap / count);\n     * @param {Boolean|Number} [fixedBarHeight=false]\n     * @returns {Boolean|Number|dc.rowChart}\n     */\n    _chart.fixedBarHeight = function (fixedBarHeight) {\n        if (!arguments.length) {\n            return _fixedBarHeight;\n        }\n        _fixedBarHeight = fixedBarHeight;\n        return _chart;\n    };\n\n    /**\n     * Get or set the vertical gap space between rows on a particular row chart instance.\n     * @method gap\n     * @memberof dc.rowChart\n     * @instance\n     * @param {Number} [gap=5]\n     * @returns {Number|dc.rowChart}\n     */\n    _chart.gap = function (gap) {\n        if (!arguments.length) {\n            return _gap;\n        }\n        _gap = gap;\n        return _chart;\n    };\n\n    /**\n     * Get or set the elasticity on x axis. If this attribute is set to true, then the x axis will rescle to auto-fit the\n     * data range when filtered.\n     * @method elasticX\n     * @memberof dc.rowChart\n     * @instance\n     * @param {Boolean} [elasticX]\n     * @returns {Boolean|dc.rowChart}\n     */\n    _chart.elasticX = function (elasticX) {\n        if (!arguments.length) {\n            return _elasticX;\n        }\n        _elasticX = elasticX;\n        return _chart;\n    };\n\n    /**\n     * Get or set the x offset (horizontal space to the top left corner of a row) for labels on a particular row chart.\n     * @method labelOffsetX\n     * @memberof dc.rowChart\n     * @instance\n     * @param {Number} [labelOffsetX=10]\n     * @returns {Number|dc.rowChart}\n     */\n    _chart.labelOffsetX = function (labelOffsetX) {\n        if (!arguments.length) {\n            return _labelOffsetX;\n        }\n        _labelOffsetX = labelOffsetX;\n        return _chart;\n    };\n\n    /**\n     * Get or set the y offset (vertical space to the top left corner of a row) for labels on a particular row chart.\n     * @method labelOffsetY\n     * @memberof dc.rowChart\n     * @instance\n     * @param {Number} [labelOffsety=15]\n     * @returns {Number|dc.rowChart}\n     */\n    _chart.labelOffsetY = function (labelOffsety) {\n        if (!arguments.length) {\n            return _labelOffsetY;\n        }\n        _labelOffsetY = labelOffsety;\n        _hasLabelOffsetY = true;\n        return _chart;\n    };\n\n    /**\n     * Get of set the x offset (horizontal space between right edge of row and right edge or text.\n     * @method titleLabelOffsetX\n     * @memberof dc.rowChart\n     * @instance\n     * @param {Number} [titleLabelOffsetX=2]\n     * @returns {Number|dc.rowChart}\n     */\n    _chart.titleLabelOffsetX = function (titleLabelOffsetX) {\n        if (!arguments.length) {\n            return _titleLabelOffsetX;\n        }\n        _titleLabelOffsetX = titleLabelOffsetX;\n        return _chart;\n    };\n\n    function isSelectedRow (d) {\n        return _chart.hasFilter(_chart.cappedKeyAccessor(d));\n    }\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * Legend is a attachable widget that can be added to other dc charts to render horizontal legend\n * labels.\n *\n * Examples:\n * - {@link http://dc-js.github.com/dc.js/ Nasdaq 100 Index}\n * - {@link http://dc-js.github.com/dc.js/crime/index.html Canadian City Crime Stats}\n * @class legend\n * @memberof dc\n * @example\n * chart.legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))\n * @returns {dc.legend}\n */\ndc.legend = function () {\n    var LABEL_GAP = 2;\n\n    var _legend = {},\n        _parent,\n        _x = 0,\n        _y = 0,\n        _itemHeight = 12,\n        _gap = 5,\n        _horizontal = false,\n        _legendWidth = 560,\n        _itemWidth = 70,\n        _autoItemWidth = false,\n        _legendText = dc.pluck('name'),\n        _maxItems;\n\n    var _g;\n\n    _legend.parent = function (p) {\n        if (!arguments.length) {\n            return _parent;\n        }\n        _parent = p;\n        return _legend;\n    };\n\n    _legend.render = function () {\n        _parent.svg().select('g.dc-legend').remove();\n        _g = _parent.svg().append('g')\n            .attr('class', 'dc-legend')\n            .attr('transform', 'translate(' + _x + ',' + _y + ')');\n        var legendables = _parent.legendables();\n\n        if (_maxItems !== undefined) {\n            legendables = legendables.slice(0, _maxItems);\n        }\n\n        var itemEnter = _g.selectAll('g.dc-legend-item')\n            .data(legendables)\n            .enter()\n            .append('g')\n            .attr('class', 'dc-legend-item')\n            .on('mouseover', function (d) {\n                _parent.legendHighlight(d);\n            })\n            .on('mouseout', function (d) {\n                _parent.legendReset(d);\n            })\n            .on('click', function (d) {\n                d.chart.legendToggle(d);\n            });\n\n        _g.selectAll('g.dc-legend-item')\n            .classed('fadeout', function (d) {\n                return d.chart.isLegendableHidden(d);\n            });\n\n        if (legendables.some(dc.pluck('dashstyle'))) {\n            itemEnter\n                .append('line')\n                .attr('x1', 0)\n                .attr('y1', _itemHeight / 2)\n                .attr('x2', _itemHeight)\n                .attr('y2', _itemHeight / 2)\n                .attr('stroke-width', 2)\n                .attr('stroke-dasharray', dc.pluck('dashstyle'))\n                .attr('stroke', dc.pluck('color'));\n        } else {\n            itemEnter\n                .append('rect')\n                .attr('width', _itemHeight)\n                .attr('height', _itemHeight)\n                .attr('fill', function (d) {return d ? d.color : 'blue';});\n        }\n\n        itemEnter.append('text')\n                .text(_legendText)\n                .attr('x', _itemHeight + LABEL_GAP)\n                .attr('y', function () {\n                    return _itemHeight / 2 + (this.clientHeight ? this.clientHeight : 13) / 2 - 2;\n                });\n\n        var _cumulativeLegendTextWidth = 0;\n        var row = 0;\n        itemEnter.attr('transform', function (d, i) {\n            if (_horizontal) {\n                var itemWidth   = _autoItemWidth === true ? this.getBBox().width + _gap : _itemWidth;\n                if ((_cumulativeLegendTextWidth + itemWidth) > _legendWidth && _cumulativeLegendTextWidth > 0) {\n                    ++row;\n                    _cumulativeLegendTextWidth = 0;\n                }\n                var translateBy = 'translate(' + _cumulativeLegendTextWidth + ',' + row * legendItemHeight() + ')';\n                _cumulativeLegendTextWidth += itemWidth;\n                return translateBy;\n            } else {\n                return 'translate(0,' + i * legendItemHeight() + ')';\n            }\n        });\n    };\n\n    function legendItemHeight () {\n        return _gap + _itemHeight;\n    }\n\n    /**\n     * Set or get x coordinate for legend widget.\n     * @method x\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [x=0]\n     * @returns {Number|dc.legend}\n     */\n    _legend.x = function (x) {\n        if (!arguments.length) {\n            return _x;\n        }\n        _x = x;\n        return _legend;\n    };\n\n    /**\n     * Set or get y coordinate for legend widget.\n     * @method y\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [y=0]\n     * @returns {Number|dc.legend}\n     */\n    _legend.y = function (y) {\n        if (!arguments.length) {\n            return _y;\n        }\n        _y = y;\n        return _legend;\n    };\n\n    /**\n     * Set or get gap between legend items.\n     * @method gap\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [gap=5]\n     * @returns {Number|dc.legend}\n     */\n    _legend.gap = function (gap) {\n        if (!arguments.length) {\n            return _gap;\n        }\n        _gap = gap;\n        return _legend;\n    };\n\n    /**\n     * Set or get legend item height.\n     * @method itemHeight\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [itemHeight=12]\n     * @returns {Number|dc.legend}\n     */\n    _legend.itemHeight = function (itemHeight) {\n        if (!arguments.length) {\n            return _itemHeight;\n        }\n        _itemHeight = itemHeight;\n        return _legend;\n    };\n\n    /**\n     * Position legend horizontally instead of vertically.\n     * @method horizontal\n     * @memberof dc.legend\n     * @instance\n     * @param  {Boolean} [horizontal=false]\n     * @returns {Boolean|dc.legend}\n     */\n    _legend.horizontal = function (horizontal) {\n        if (!arguments.length) {\n            return _horizontal;\n        }\n        _horizontal = horizontal;\n        return _legend;\n    };\n\n    /**\n     * Maximum width for horizontal legend.\n     * @method legendWidth\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [legendWidth=500]\n     * @returns {Number|dc.legend}\n     */\n    _legend.legendWidth = function (legendWidth) {\n        if (!arguments.length) {\n            return _legendWidth;\n        }\n        _legendWidth = legendWidth;\n        return _legend;\n    };\n\n    /**\n     * Legend item width for horizontal legend.\n     * @method itemWidth\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [itemWidth=70]\n     * @returns {Number|dc.legend}\n     */\n    _legend.itemWidth = function (itemWidth) {\n        if (!arguments.length) {\n            return _itemWidth;\n        }\n        _itemWidth = itemWidth;\n        return _legend;\n    };\n\n    /**\n     * Turn automatic width for legend items on or off. If true, {@link dc.legend#itemWidth itemWidth} is ignored.\n     * This setting takes into account the {@link dc.legend#gap gap}.\n     * @method autoItemWidth\n     * @memberof dc.legend\n     * @instance\n     * @param  {Boolean} [autoItemWidth=false]\n     * @returns {Boolean|dc.legend}\n     */\n    _legend.autoItemWidth = function (autoItemWidth) {\n        if (!arguments.length) {\n            return _autoItemWidth;\n        }\n        _autoItemWidth = autoItemWidth;\n        return _legend;\n    };\n\n    /**\n     * Set or get the legend text function. The legend widget uses this function to render the legend\n     * text for each item. If no function is specified the legend widget will display the names\n     * associated with each group.\n     * @method legendText\n     * @memberof dc.legend\n     * @instance\n     * @param  {Function} [legendText]\n     * @returns {Function|dc.legend}\n     * @example\n     * // default legendText\n     * legend.legendText(dc.pluck('name'))\n     *\n     * // create numbered legend items\n     * chart.legend(dc.legend().legendText(function(d, i) { return i + '. ' + d.name; }))\n     *\n     * // create legend displaying group counts\n     * chart.legend(dc.legend().legendText(function(d) { return d.name + ': ' d.data; }))\n     **/\n    _legend.legendText = function (legendText) {\n        if (!arguments.length) {\n            return _legendText;\n        }\n        _legendText = legendText;\n        return _legend;\n    };\n\n    /**\n     * Maximum number of legend items to display\n     * @method maxItems\n     * @memberof dc.legend\n     * @instance\n     * @param  {Number} [maxItems]\n     * @return {dc.legend}\n     */\n    _legend.maxItems = function (maxItems) {\n        if (!arguments.length) {\n            return _maxItems;\n        }\n        _maxItems = dc.utils.isNumber(maxItems) ? maxItems : undefined;\n        return _legend;\n    };\n\n    return _legend;\n};\n\n/**\n * A scatter plot chart\n *\n * Examples:\n * - {@link http://dc-js.github.io/dc.js/examples/scatter.html Scatter Chart}\n * - {@link http://dc-js.github.io/dc.js/examples/multi-scatter.html Multi-Scatter Chart}\n * @class scatterPlot\n * @memberof dc\n * @mixes dc.coordinateGridMixin\n * @example\n * // create a scatter plot under #chart-container1 element using the default global chart group\n * var chart1 = dc.scatterPlot('#chart-container1');\n * // create a scatter plot under #chart-container2 element using chart group A\n * var chart2 = dc.scatterPlot('#chart-container2', 'chartGroupA');\n * // create a sub-chart under a composite parent chart\n * var chart3 = dc.scatterPlot(compositeChart);\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.scatterPlot}\n */\ndc.scatterPlot = function (parent, chartGroup) {\n    var _chart = dc.coordinateGridMixin({});\n    var _symbol = d3.svg.symbol();\n\n    var _existenceAccessor = function (d) { return d.value; };\n\n    var originalKeyAccessor = _chart.keyAccessor();\n    _chart.keyAccessor(function (d) { return originalKeyAccessor(d)[0]; });\n    _chart.valueAccessor(function (d) { return originalKeyAccessor(d)[1]; });\n    _chart.colorAccessor(function () { return _chart._groupName; });\n\n    _chart.title(function (d) {\n        // this basically just counteracts the setting of its own key/value accessors\n        // see https://github.com/dc-js/dc.js/issues/702\n        return _chart.keyAccessor()(d) + ',' + _chart.valueAccessor()(d) + ': ' +\n            _chart.existenceAccessor()(d);\n    });\n\n    var _locator = function (d) {\n        return 'translate(' + _chart.x()(_chart.keyAccessor()(d)) + ',' +\n                              _chart.y()(_chart.valueAccessor()(d)) + ')';\n    };\n\n    var _highlightedSize = 7;\n    var _symbolSize = 5;\n    var _excludedSize = 3;\n    var _excludedColor = null;\n    var _excludedOpacity = 1.0;\n    var _emptySize = 0;\n    var _emptyOpacity = 0;\n    var _nonemptyOpacity = 1;\n    var _emptyColor = null;\n    var _filtered = [];\n\n    _symbol.size(function (d, i) {\n        if (!_existenceAccessor(d)) {\n            return Math.pow(_emptySize, 2);\n        } else if (_filtered[i]) {\n            return Math.pow(_symbolSize, 2);\n        } else {\n            return Math.pow(_excludedSize, 2);\n        }\n    });\n\n    dc.override(_chart, '_filter', function (filter) {\n        if (!arguments.length) {\n            return _chart.__filter();\n        }\n\n        return _chart.__filter(dc.filters.RangedTwoDimensionalFilter(filter));\n    });\n\n    _chart.plotData = function () {\n        var symbols = _chart.chartBodyG().selectAll('path.symbol')\n            .data(_chart.data());\n\n        symbols\n            .enter()\n        .append('path')\n            .attr('class', 'symbol')\n            .attr('opacity', 0)\n            .attr('fill', _chart.getColor)\n            .attr('transform', _locator);\n\n        symbols.call(renderTitles, _chart.data());\n\n        symbols.each(function (d, i) {\n            _filtered[i] = !_chart.filter() || _chart.filter().isFiltered([d.key[0], d.key[1]]);\n        });\n\n        dc.transition(symbols, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('opacity', function (d, i) {\n                if (!_existenceAccessor(d)) {\n                    return _emptyOpacity;\n                } else if (_filtered[i]) {\n                    return _nonemptyOpacity;\n                } else {\n                    return _chart.excludedOpacity();\n                }\n            })\n            .attr('fill', function (d, i) {\n                if (_emptyColor && !_existenceAccessor(d)) {\n                    return _emptyColor;\n                } else if (_chart.excludedColor() && !_filtered[i]) {\n                    return _chart.excludedColor();\n                } else {\n                    return _chart.getColor(d);\n                }\n            })\n            .attr('transform', _locator)\n            .attr('d', _symbol);\n\n        dc.transition(symbols.exit(), _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('opacity', 0).remove();\n    };\n\n    function renderTitles (symbol, d) {\n        if (_chart.renderTitle()) {\n            symbol.selectAll('title').remove();\n            symbol.append('title').text(function (d) {\n                return _chart.title()(d);\n            });\n        }\n    }\n\n    /**\n     * Get or set the existence accessor.  If a point exists, it is drawn with\n     * {@link dc.scatterPlot#symbolSize symbolSize} radius and\n     * opacity 1; if it does not exist, it is drawn with\n     * {@link dc.scatterPlot#emptySize emptySize} radius and opacity 0. By default,\n     * the existence accessor checks if the reduced value is truthy.\n     * @method existenceAccessor\n     * @memberof dc.scatterPlot\n     * @instance\n     * @see {@link dc.scatterPlot#symbolSize symbolSize}\n     * @see {@link dc.scatterPlot#emptySize emptySize}\n     * @example\n     * // default accessor\n     * chart.existenceAccessor(function (d) { return d.value; });\n     * @param {Function} [accessor]\n     * @returns {Function|dc.scatterPlot}\n     */\n    _chart.existenceAccessor = function (accessor) {\n        if (!arguments.length) {\n            return _existenceAccessor;\n        }\n        _existenceAccessor = accessor;\n        return this;\n    };\n\n    /**\n     * Get or set the symbol type used for each point. By default the symbol is a circle.\n     * Type can be a constant or an accessor.\n     * @method symbol\n     * @memberof dc.scatterPlot\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#symbol_type d3.svg.symbol.type}\n     * @example\n     * // Circle type\n     * chart.symbol('circle');\n     * // Square type\n     * chart.symbol('square');\n     * @param {String|Function} [type='circle']\n     * @returns {String|Function|dc.scatterPlot}\n     */\n    _chart.symbol = function (type) {\n        if (!arguments.length) {\n            return _symbol.type();\n        }\n        _symbol.type(type);\n        return _chart;\n    };\n\n    /**\n     * Set or get radius for symbols.\n     * @method symbolSize\n     * @memberof dc.scatterPlot\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#symbol_size d3.svg.symbol.size}\n     * @param {Number} [symbolSize=3]\n     * @returns {Number|dc.scatterPlot}\n     */\n    _chart.symbolSize = function (symbolSize) {\n        if (!arguments.length) {\n            return _symbolSize;\n        }\n        _symbolSize = symbolSize;\n        return _chart;\n    };\n\n    /**\n     * Set or get radius for highlighted symbols.\n     * @method highlightedSize\n     * @memberof dc.scatterPlot\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#symbol_size d3.svg.symbol.size}\n     * @param {Number} [highlightedSize=5]\n     * @returns {Number|dc.scatterPlot}\n     */\n    _chart.highlightedSize = function (highlightedSize) {\n        if (!arguments.length) {\n            return _highlightedSize;\n        }\n        _highlightedSize = highlightedSize;\n        return _chart;\n    };\n\n    /**\n     * Set or get size for symbols excluded from this chart's filter. If null, no\n     * special size is applied for symbols based on their filter status.\n     * @method excludedSize\n     * @memberof dc.scatterPlot\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#symbol_size d3.svg.symbol.size}\n     * @param {Number} [excludedSize=null]\n     * @returns {Number|dc.scatterPlot}\n     */\n    _chart.excludedSize = function (excludedSize) {\n        if (!arguments.length) {\n            return _excludedSize;\n        }\n        _excludedSize = excludedSize;\n        return _chart;\n    };\n\n    /**\n     * Set or get color for symbols excluded from this chart's filter. If null, no\n     * special color is applied for symbols based on their filter status.\n     * @method excludedColor\n     * @memberof dc.scatterPlot\n     * @instance\n     * @param {Number} [excludedColor=null]\n     * @returns {Number|dc.scatterPlot}\n     */\n    _chart.excludedColor = function (excludedColor) {\n        if (!arguments.length) {\n            return _excludedColor;\n        }\n        _excludedColor = excludedColor;\n        return _chart;\n    };\n\n    /**\n     * Set or get opacity for symbols excluded from this chart's filter.\n     * @method excludedOpacity\n     * @memberof dc.scatterPlot\n     * @instance\n     * @param {Number} [excludedOpacity=1.0]\n     * @returns {Number|dc.scatterPlot}\n     */\n    _chart.excludedOpacity = function (excludedOpacity) {\n        if (!arguments.length) {\n            return _excludedOpacity;\n        }\n        _excludedOpacity = excludedOpacity;\n        return _chart;\n    };\n\n    /**\n     * Set or get radius for symbols when the group is empty.\n     * @method emptySize\n     * @memberof dc.scatterPlot\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#symbol_size d3.svg.symbol.size}\n     * @param {Number} [emptySize=0]\n     * @returns {Number|dc.scatterPlot}\n     */\n    _chart.hiddenSize = _chart.emptySize = function (emptySize) {\n        if (!arguments.length) {\n            return _emptySize;\n        }\n        _emptySize = emptySize;\n        return _chart;\n    };\n\n    /**\n     * Set or get color for symbols when the group is empty. If null, just use the\n     * {@link dc.colorMixin#colors colorMixin.colors} color scale zero value.\n     * @name emptyColor\n     * @memberof dc.scatterPlot\n     * @instance\n     * @param {String} [emptyColor=null]\n     * @return {String}\n     * @return {dc.scatterPlot}/\n     */\n    _chart.emptyColor = function (emptyColor) {\n        if (!arguments.length) {\n            return _emptyColor;\n        }\n        _emptyColor = emptyColor;\n        return _chart;\n    };\n\n    /**\n     * Set or get opacity for symbols when the group is empty.\n     * @name emptyOpacity\n     * @memberof dc.scatterPlot\n     * @instance\n     * @param {Number} [emptyOpacity=0]\n     * @return {Number}\n     * @return {dc.scatterPlot}\n     */\n    _chart.emptyOpacity = function (emptyOpacity) {\n        if (!arguments.length) {\n            return _emptyOpacity;\n        }\n        _emptyOpacity = emptyOpacity;\n        return _chart;\n    };\n\n    /**\n     * Set or get opacity for symbols when the group is not empty.\n     * @name nonemptyOpacity\n     * @memberof dc.scatterPlot\n     * @instance\n     * @param {Number} [nonemptyOpacity=1]\n     * @return {Number}\n     * @return {dc.scatterPlot}\n     */\n    _chart.nonemptyOpacity = function (nonemptyOpacity) {\n        if (!arguments.length) {\n            return _emptyOpacity;\n        }\n        _nonemptyOpacity = nonemptyOpacity;\n        return _chart;\n    };\n\n    _chart.legendables = function () {\n        return [{chart: _chart, name: _chart._groupName, color: _chart.getColor()}];\n    };\n\n    _chart.legendHighlight = function (d) {\n        resizeSymbolsWhere(function (symbol) {\n            return symbol.attr('fill') === d.color;\n        }, _highlightedSize);\n        _chart.selectAll('.chart-body path.symbol').filter(function () {\n            return d3.select(this).attr('fill') !== d.color;\n        }).classed('fadeout', true);\n    };\n\n    _chart.legendReset = function (d) {\n        resizeSymbolsWhere(function (symbol) {\n            return symbol.attr('fill') === d.color;\n        }, _symbolSize);\n        _chart.selectAll('.chart-body path.symbol').filter(function () {\n            return d3.select(this).attr('fill') !== d.color;\n        }).classed('fadeout', false);\n    };\n\n    function resizeSymbolsWhere (condition, size) {\n        var symbols = _chart.selectAll('.chart-body path.symbol').filter(function () {\n            return condition(d3.select(this));\n        });\n        var oldSize = _symbol.size();\n        _symbol.size(Math.pow(size, 2));\n        dc.transition(symbols, _chart.transitionDuration(), _chart.transitionDelay()).attr('d', _symbol);\n        _symbol.size(oldSize);\n    }\n\n    _chart.setHandlePaths = function () {\n        // no handle paths for poly-brushes\n    };\n\n    _chart.extendBrush = function () {\n        var extent = _chart.brush().extent();\n        if (_chart.round()) {\n            extent[0] = extent[0].map(_chart.round());\n            extent[1] = extent[1].map(_chart.round());\n\n            _chart.g().select('.brush')\n                .call(_chart.brush().extent(extent));\n        }\n        return extent;\n    };\n\n    _chart.brushIsEmpty = function (extent) {\n        return _chart.brush().empty() || !extent || extent[0][0] >= extent[1][0] || extent[0][1] >= extent[1][1];\n    };\n\n    _chart._brushing = function () {\n        var extent = _chart.extendBrush();\n\n        _chart.redrawBrush(_chart.g());\n\n        if (_chart.brushIsEmpty(extent)) {\n            dc.events.trigger(function () {\n                _chart.filter(null);\n                _chart.redrawGroup();\n            });\n\n        } else {\n            var ranged2DFilter = dc.filters.RangedTwoDimensionalFilter(extent);\n            dc.events.trigger(function () {\n                _chart.filter(null);\n                _chart.filter(ranged2DFilter);\n                _chart.redrawGroup();\n            }, dc.constants.EVENT_DELAY);\n\n        }\n    };\n\n    _chart.setBrushY = function (gBrush) {\n        gBrush.call(_chart.brush().y(_chart.y()));\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * A display of a single numeric value.\n * Unlike other charts, you do not need to set a dimension. Instead a group object must be provided and\n * a valueAccessor that returns a single value.\n * @class numberDisplay\n * @memberof dc\n * @mixes dc.baseMixin\n * @example\n * // create a number display under #chart-container1 element using the default global chart group\n * var display1 = dc.numberDisplay('#chart-container1');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.numberDisplay}\n */\ndc.numberDisplay = function (parent, chartGroup) {\n    var SPAN_CLASS = 'number-display';\n    var _formatNumber = d3.format('.2s');\n    var _chart = dc.baseMixin({});\n    var _html = {one: '', some: '', none: ''};\n    var _lastValue;\n\n    // dimension not required\n    _chart._mandatoryAttributes(['group']);\n\n    /**\n     * Gets or sets an optional object specifying HTML templates to use depending on the number\n     * displayed.  The text `%number` will be replaced with the current value.\n     * - one: HTML template to use if the number is 1\n     * - zero: HTML template to use if the number is 0\n     * - some: HTML template to use otherwise\n     * @method html\n     * @memberof dc.numberDisplay\n     * @instance\n     * @example\n     * numberWidget.html({\n     *      one:'%number record',\n     *      some:'%number records',\n     *      none:'no records'})\n     * @param {{one:String, some:String, none:String}} [html={one: '', some: '', none: ''}]\n     * @returns {{one:String, some:String, none:String}|dc.numberDisplay}\n     */\n    _chart.html = function (html) {\n        if (!arguments.length) {\n            return _html;\n        }\n        if (html.none) {\n            _html.none = html.none;//if none available\n        } else if (html.one) {\n            _html.none = html.one;//if none not available use one\n        } else if (html.some) {\n            _html.none = html.some;//if none and one not available use some\n        }\n        if (html.one) {\n            _html.one = html.one;//if one available\n        } else if (html.some) {\n            _html.one = html.some;//if one not available use some\n        }\n        if (html.some) {\n            _html.some = html.some;//if some available\n        } else if (html.one) {\n            _html.some = html.one;//if some not available use one\n        }\n        return _chart;\n    };\n\n    /**\n     * Calculate and return the underlying value of the display.\n     * @method value\n     * @memberof dc.numberDisplay\n     * @instance\n     * @returns {Number}\n     */\n    _chart.value = function () {\n        return _chart.data();\n    };\n\n    _chart.data(function (group) {\n        var valObj = group.value ? group.value() : group.top(1)[0];\n        return _chart.valueAccessor()(valObj);\n    });\n\n    _chart.transitionDuration(250); // good default\n    _chart.transitionDelay(0);\n\n    _chart._doRender = function () {\n        var newValue = _chart.value(),\n            span = _chart.selectAll('.' + SPAN_CLASS);\n\n        if (span.empty()) {\n            span = span.data([0])\n                .enter()\n                .append('span')\n                .attr('class', SPAN_CLASS);\n        }\n\n        span.transition()\n            .duration(_chart.transitionDuration())\n            .delay(_chart.transitionDelay())\n            .ease('quad-out-in')\n            .tween('text', function () {\n                // [XA] don't try and interpolate from Infinity, else this breaks.\n                var interpStart = isFinite(_lastValue) ? _lastValue : 0;\n                var interp = d3.interpolateNumber(interpStart || 0, newValue);\n                _lastValue = newValue;\n                return function (t) {\n                    var html = null, num = _chart.formatNumber()(interp(t));\n                    if (newValue === 0 && (_html.none !== '')) {\n                        html = _html.none;\n                    } else if (newValue === 1 && (_html.one !== '')) {\n                        html = _html.one;\n                    } else if (_html.some !== '') {\n                        html = _html.some;\n                    }\n                    this.innerHTML = html ? html.replace('%number', num) : num;\n                };\n            });\n    };\n\n    _chart._doRedraw = function () {\n        return _chart._doRender();\n    };\n\n    /**\n     * Get or set a function to format the value for the display.\n     * @method formatNumber\n     * @memberof dc.numberDisplay\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md d3.format}\n     * @param {Function} [formatter=d3.format('.2s')]\n     * @returns {Function|dc.numberDisplay}\n     */\n    _chart.formatNumber = function (formatter) {\n        if (!arguments.length) {\n            return _formatNumber;\n        }\n        _formatNumber = formatter;\n        return _chart;\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n/**\n * A heat map is matrix that represents the values of two dimensions of data using colors.\n * @class heatMap\n * @memberof dc\n * @mixes dc.colorMixin\n * @mixes dc.marginMixin\n * @mixes dc.baseMixin\n * @example\n * // create a heat map under #chart-container1 element using the default global chart group\n * var heatMap1 = dc.heatMap('#chart-container1');\n * // create a heat map under #chart-container2 element using chart group A\n * var heatMap2 = dc.heatMap('#chart-container2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.heatMap}\n */\ndc.heatMap = function (parent, chartGroup) {\n\n    var DEFAULT_BORDER_RADIUS = 6.75;\n\n    var _chartBody;\n\n    var _cols;\n    var _rows;\n    var _xBorderRadius = DEFAULT_BORDER_RADIUS;\n    var _yBorderRadius = DEFAULT_BORDER_RADIUS;\n\n    var _chart = dc.colorMixin(dc.marginMixin(dc.baseMixin({})));\n    _chart._mandatoryAttributes(['group']);\n    _chart.title(_chart.colorAccessor());\n\n    var _colsLabel = function (d) {\n        return d;\n    };\n    var _rowsLabel = function (d) {\n        return d;\n    };\n\n    /**\n     * Set or get the column label function. The chart class uses this function to render\n     * column labels on the X axis. It is passed the column name.\n     * @method colsLabel\n     * @memberof dc.heatMap\n     * @instance\n     * @example\n     * // the default label function just returns the name\n     * chart.colsLabel(function(d) { return d; });\n     * @param  {Function} [labelFunction=function(d) { return d; }]\n     * @returns {Function|dc.heatMap}\n     */\n    _chart.colsLabel = function (labelFunction) {\n        if (!arguments.length) {\n            return _colsLabel;\n        }\n        _colsLabel = labelFunction;\n        return _chart;\n    };\n\n    /**\n     * Set or get the row label function. The chart class uses this function to render\n     * row labels on the Y axis. It is passed the row name.\n     * @method rowsLabel\n     * @memberof dc.heatMap\n     * @instance\n     * @example\n     * // the default label function just returns the name\n     * chart.rowsLabel(function(d) { return d; });\n     * @param  {Function} [labelFunction=function(d) { return d; }]\n     * @returns {Function|dc.heatMap}\n     */\n    _chart.rowsLabel = function (labelFunction) {\n        if (!arguments.length) {\n            return _rowsLabel;\n        }\n        _rowsLabel = labelFunction;\n        return _chart;\n    };\n\n    var _xAxisOnClick = function (d) { filterAxis(0, d); };\n    var _yAxisOnClick = function (d) { filterAxis(1, d); };\n    var _boxOnClick = function (d) {\n        var filter = d.key;\n        dc.events.trigger(function () {\n            _chart.filter(filter);\n            _chart.redrawGroup();\n        });\n    };\n\n    function filterAxis (axis, value) {\n        var cellsOnAxis = _chart.selectAll('.box-group').filter(function (d) {\n            return d.key[axis] === value;\n        });\n        var unfilteredCellsOnAxis = cellsOnAxis.filter(function (d) {\n            return !_chart.hasFilter(d.key);\n        });\n        dc.events.trigger(function () {\n            var selection = unfilteredCellsOnAxis.empty() ? cellsOnAxis : unfilteredCellsOnAxis;\n            var filters = selection.data().map(function (kv) {\n                return dc.filters.TwoDimensionalFilter(kv.key);\n            });\n            _chart._filter([filters]);\n            _chart.redrawGroup();\n        });\n    }\n\n    dc.override(_chart, 'filter', function (filter) {\n        if (!arguments.length) {\n            return _chart._filter();\n        }\n\n        return _chart._filter(dc.filters.TwoDimensionalFilter(filter));\n    });\n\n    function uniq (d, i, a) {\n        return !i || a[i - 1] !== d;\n    }\n\n    /**\n     * Gets or sets the values used to create the rows of the heatmap, as an array. By default, all\n     * the values will be fetched from the data using the value accessor, and they will be sorted in\n     * ascending order.\n     * @method rows\n     * @memberof dc.heatMap\n     * @instance\n     * @param  {Array<String|Number>} [rows]\n     * @returns {Array<String|Number>|dc.heatMap}\n     */\n    _chart.rows = function (rows) {\n        if (arguments.length) {\n            _rows = rows;\n            return _chart;\n        }\n        if (_rows) {\n            return _rows;\n        }\n        var rowValues = _chart.data().map(_chart.valueAccessor());\n        rowValues.sort(d3.ascending);\n        return d3.scale.ordinal().domain(rowValues.filter(uniq));\n    };\n\n    /**\n     * Gets or sets the keys used to create the columns of the heatmap, as an array. By default, all\n     * the values will be fetched from the data using the key accessor, and they will be sorted in\n     * ascending order.\n     * @method cols\n     * @memberof dc.heatMap\n     * @instance\n     * @param  {Array<String|Number>} [cols]\n     * @returns {Array<String|Number>|dc.heatMap}\n     */\n    _chart.cols = function (cols) {\n        if (arguments.length) {\n            _cols = cols;\n            return _chart;\n        }\n        if (_cols) {\n            return _cols;\n        }\n        var colValues = _chart.data().map(_chart.keyAccessor());\n        colValues.sort(d3.ascending);\n        return d3.scale.ordinal().domain(colValues.filter(uniq));\n    };\n\n    _chart._doRender = function () {\n        _chart.resetSvg();\n\n        _chartBody = _chart.svg()\n            .append('g')\n            .attr('class', 'heatmap')\n            .attr('transform', 'translate(' + _chart.margins().left + ',' + _chart.margins().top + ')');\n\n        return _chart._doRedraw();\n    };\n\n    _chart._doRedraw = function () {\n        var rows = _chart.rows(),\n            cols = _chart.cols(),\n            rowCount = rows.domain().length,\n            colCount = cols.domain().length,\n            boxWidth = Math.floor(_chart.effectiveWidth() / colCount),\n            boxHeight = Math.floor(_chart.effectiveHeight() / rowCount);\n\n        cols.rangeRoundBands([0, _chart.effectiveWidth()]);\n        rows.rangeRoundBands([_chart.effectiveHeight(), 0]);\n\n        var boxes = _chartBody.selectAll('g.box-group').data(_chart.data(), function (d, i) {\n            return _chart.keyAccessor()(d, i) + '\\0' + _chart.valueAccessor()(d, i);\n        });\n        var gEnter = boxes.enter().append('g')\n            .attr('class', 'box-group');\n\n        gEnter.append('rect')\n            .attr('class', 'heat-box')\n            .attr('fill', 'white')\n            .on('click', _chart.boxOnClick());\n\n        if (_chart.renderTitle()) {\n            gEnter.append('title');\n            boxes.select('title').text(_chart.title());\n        }\n\n        dc.transition(boxes.select('rect'), _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('x', function (d, i) { return cols(_chart.keyAccessor()(d, i)); })\n            .attr('y', function (d, i) { return rows(_chart.valueAccessor()(d, i)); })\n            .attr('rx', _xBorderRadius)\n            .attr('ry', _yBorderRadius)\n            .attr('fill', _chart.getColor)\n            .attr('width', boxWidth)\n            .attr('height', boxHeight);\n\n        boxes.exit().remove();\n\n        var gCols = _chartBody.select('g.cols');\n        if (gCols.empty()) {\n            gCols = _chartBody.append('g').attr('class', 'cols axis');\n        }\n        var gColsText = gCols.selectAll('text').data(cols.domain());\n        gColsText.enter().append('text')\n              .attr('x', function (d) { return cols(d) + boxWidth / 2; })\n              .style('text-anchor', 'middle')\n              .attr('y', _chart.effectiveHeight())\n              .attr('dy', 12)\n              .on('click', _chart.xAxisOnClick())\n              .text(_chart.colsLabel());\n        dc.transition(gColsText, _chart.transitionDuration(), _chart.transitionDelay())\n               .text(_chart.colsLabel())\n               .attr('x', function (d) { return cols(d) + boxWidth / 2; })\n               .attr('y', _chart.effectiveHeight());\n        gColsText.exit().remove();\n        var gRows = _chartBody.select('g.rows');\n        if (gRows.empty()) {\n            gRows = _chartBody.append('g').attr('class', 'rows axis');\n        }\n        var gRowsText = gRows.selectAll('text').data(rows.domain());\n        gRowsText.enter().append('text')\n              .attr('dy', 6)\n              .style('text-anchor', 'end')\n              .attr('x', 0)\n              .attr('dx', -2)\n              .on('click', _chart.yAxisOnClick())\n              .text(_chart.rowsLabel());\n        dc.transition(gRowsText, _chart.transitionDuration(), _chart.transitionDelay())\n              .text(_chart.rowsLabel())\n              .attr('y', function (d) { return rows(d) + boxHeight / 2; });\n        gRowsText.exit().remove();\n\n        if (_chart.hasFilter()) {\n            _chart.selectAll('g.box-group').each(function (d) {\n                if (_chart.isSelectedNode(d)) {\n                    _chart.highlightSelected(this);\n                } else {\n                    _chart.fadeDeselected(this);\n                }\n            });\n        } else {\n            _chart.selectAll('g.box-group').each(function () {\n                _chart.resetHighlight(this);\n            });\n        }\n        return _chart;\n    };\n\n    /**\n     * Gets or sets the handler that fires when an individual cell is clicked in the heatmap.\n     * By default, filtering of the cell will be toggled.\n     * @method boxOnClick\n     * @memberof dc.heatMap\n     * @instance\n     * @example\n     * // default box on click handler\n     * chart.boxOnClick(function (d) {\n     *     var filter = d.key;\n     *     dc.events.trigger(function () {\n     *         _chart.filter(filter);\n     *         _chart.redrawGroup();\n     *     });\n     * });\n     * @param  {Function} [handler]\n     * @returns {Function|dc.heatMap}\n     */\n    _chart.boxOnClick = function (handler) {\n        if (!arguments.length) {\n            return _boxOnClick;\n        }\n        _boxOnClick = handler;\n        return _chart;\n    };\n\n    /**\n     * Gets or sets the handler that fires when a column tick is clicked in the x axis.\n     * By default, if any cells in the column are unselected, the whole column will be selected,\n     * otherwise the whole column will be unselected.\n     * @method xAxisOnClick\n     * @memberof dc.heatMap\n     * @instance\n     * @param  {Function} [handler]\n     * @returns {Function|dc.heatMap}\n     */\n    _chart.xAxisOnClick = function (handler) {\n        if (!arguments.length) {\n            return _xAxisOnClick;\n        }\n        _xAxisOnClick = handler;\n        return _chart;\n    };\n\n    /**\n     * Gets or sets the handler that fires when a row tick is clicked in the y axis.\n     * By default, if any cells in the row are unselected, the whole row will be selected,\n     * otherwise the whole row will be unselected.\n     * @method yAxisOnClick\n     * @memberof dc.heatMap\n     * @instance\n     * @param  {Function} [handler]\n     * @returns {Function|dc.heatMap}\n     */\n    _chart.yAxisOnClick = function (handler) {\n        if (!arguments.length) {\n            return _yAxisOnClick;\n        }\n        _yAxisOnClick = handler;\n        return _chart;\n    };\n\n    /**\n     * Gets or sets the X border radius.  Set to 0 to get full rectangles.\n     * @method xBorderRadius\n     * @memberof dc.heatMap\n     * @instance\n     * @param  {Number} [xBorderRadius=6.75]\n     * @returns {Number|dc.heatMap}\n     */\n    _chart.xBorderRadius = function (xBorderRadius) {\n        if (!arguments.length) {\n            return _xBorderRadius;\n        }\n        _xBorderRadius = xBorderRadius;\n        return _chart;\n    };\n\n    /**\n     * Gets or sets the Y border radius.  Set to 0 to get full rectangles.\n     * @method yBorderRadius\n     * @memberof dc.heatMap\n     * @instance\n     * @param  {Number} [yBorderRadius=6.75]\n     * @returns {Number|dc.heatMap}\n     */\n    _chart.yBorderRadius = function (yBorderRadius) {\n        if (!arguments.length) {\n            return _yBorderRadius;\n        }\n        _yBorderRadius = yBorderRadius;\n        return _chart;\n    };\n\n    _chart.isSelectedNode = function (d) {\n        return _chart.hasFilter(d.key);\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n// https://github.com/d3/d3-plugins/blob/master/box/box.js\n(function () {\n\n    // Inspired by http://informationandvisualization.de/blog/box-plot\n    d3.box = function () {\n        var width = 1,\n            height = 1,\n            duration = 0,\n            delay = 0,\n            domain = null,\n            value = Number,\n            whiskers = boxWhiskers,\n            quartiles = boxQuartiles,\n            tickFormat = null;\n\n        // For each small multiple…\n        function box (g) {\n            g.each(function (d, i) {\n                d = d.map(value).sort(d3.ascending);\n                var g = d3.select(this),\n                    n = d.length,\n                    min = d[0],\n                    max = d[n - 1];\n\n                // Compute quartiles. Must return exactly 3 elements.\n                var quartileData = d.quartiles = quartiles(d);\n\n                // Compute whiskers. Must return exactly 2 elements, or null.\n                var whiskerIndices = whiskers && whiskers.call(this, d, i),\n                    whiskerData = whiskerIndices && whiskerIndices.map(function (i) { return d[i]; });\n\n                // Compute outliers. If no whiskers are specified, all data are 'outliers'.\n                // We compute the outliers as indices, so that we can join across transitions!\n                var outlierIndices = whiskerIndices ?\n                    d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n)) : d3.range(n);\n\n                // Compute the new x-scale.\n                var x1 = d3.scale.linear()\n                    .domain(domain && domain.call(this, d, i) || [min, max])\n                    .range([height, 0]);\n\n                // Retrieve the old x-scale, if this is an update.\n                var x0 = this.__chart__ || d3.scale.linear()\n                    .domain([0, Infinity])\n                    .range(x1.range());\n\n                // Stash the new scale.\n                this.__chart__ = x1;\n\n                // Note: the box, median, and box tick elements are fixed in number,\n                // so we only have to handle enter and update. In contrast, the outliers\n                // and other elements are variable, so we need to exit them! Variable\n                // elements also fade in and out.\n\n                // Update center line: the vertical line spanning the whiskers.\n                var center = g.selectAll('line.center')\n                    .data(whiskerData ? [whiskerData] : []);\n\n                center.enter().insert('line', 'rect')\n                    .attr('class', 'center')\n                    .attr('x1', width / 2)\n                    .attr('y1', function (d) { return x0(d[0]); })\n                    .attr('x2', width / 2)\n                    .attr('y2', function (d) { return x0(d[1]); })\n                    .style('opacity', 1e-6)\n                    .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .style('opacity', 1)\n                    .attr('y1', function (d) { return x1(d[0]); })\n                    .attr('y2', function (d) { return x1(d[1]); });\n\n                center.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .style('opacity', 1)\n                    .attr('x1', width / 2)\n                    .attr('x2', width / 2)\n                    .attr('y1', function (d) { return x1(d[0]); })\n                    .attr('y2', function (d) { return x1(d[1]); });\n\n                center.exit().transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .style('opacity', 1e-6)\n                    .attr('y1', function (d) { return x1(d[0]); })\n                    .attr('y2', function (d) { return x1(d[1]); })\n                    .remove();\n\n                // Update innerquartile box.\n                var box = g.selectAll('rect.box')\n                    .data([quartileData]);\n\n                box.enter().append('rect')\n                    .attr('class', 'box')\n                    .attr('x', 0)\n                    .attr('y', function (d) { return x0(d[2]); })\n                    .attr('width', width)\n                    .attr('height', function (d) { return x0(d[0]) - x0(d[2]); })\n                  .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y', function (d) { return x1(d[2]); })\n                    .attr('height', function (d) { return x1(d[0]) - x1(d[2]); });\n\n                box.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('width', width)\n                    .attr('y', function (d) { return x1(d[2]); })\n                    .attr('height', function (d) { return x1(d[0]) - x1(d[2]); });\n\n                // Update median line.\n                var medianLine = g.selectAll('line.median')\n                    .data([quartileData[1]]);\n\n                medianLine.enter().append('line')\n                    .attr('class', 'median')\n                    .attr('x1', 0)\n                    .attr('y1', x0)\n                    .attr('x2', width)\n                    .attr('y2', x0)\n                    .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y1', x1)\n                    .attr('y2', x1);\n\n                medianLine.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('x1', 0)\n                    .attr('x2', width)\n                    .attr('y1', x1)\n                    .attr('y2', x1);\n\n                // Update whiskers.\n                var whisker = g.selectAll('line.whisker')\n                    .data(whiskerData || []);\n\n                whisker.enter().insert('line', 'circle, text')\n                    .attr('class', 'whisker')\n                    .attr('x1', 0)\n                    .attr('y1', x0)\n                    .attr('x2', width)\n                    .attr('y2', x0)\n                    .style('opacity', 1e-6)\n                  .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y1', x1)\n                    .attr('y2', x1)\n                    .style('opacity', 1);\n\n                whisker.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('x1', 0)\n                    .attr('x2', width)\n                    .attr('y1', x1)\n                    .attr('y2', x1)\n                    .style('opacity', 1);\n\n                whisker.exit().transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y1', x1)\n                    .attr('y2', x1)\n                    .style('opacity', 1e-6)\n                    .remove();\n\n                // Update outliers.\n                var outlier = g.selectAll('circle.outlier')\n                    .data(outlierIndices, Number);\n\n                outlier.enter().insert('circle', 'text')\n                    .attr('class', 'outlier')\n                    .attr('r', 5)\n                    .attr('cx', width / 2)\n                    .attr('cy', function (i) { return x0(d[i]); })\n                    .style('opacity', 1e-6)\n                    .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('cy', function (i) { return x1(d[i]); })\n                    .style('opacity', 1);\n\n                outlier.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('cx', width / 2)\n                    .attr('cy', function (i) { return x1(d[i]); })\n                    .style('opacity', 1);\n\n                outlier.exit().transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('cy', function (i) { return x1(d[i]); })\n                    .style('opacity', 1e-6)\n                    .remove();\n\n                // Compute the tick format.\n                var format = tickFormat || x1.tickFormat(8);\n\n                // Update box ticks.\n                var boxTick = g.selectAll('text.box')\n                    .data(quartileData);\n\n                boxTick.enter().append('text')\n                    .attr('class', 'box')\n                    .attr('dy', '.3em')\n                    .attr('dx', function (d, i) { return i & 1 ? 6 : -6; })\n                    .attr('x', function (d, i) { return i & 1 ? width : 0; })\n                    .attr('y', x0)\n                    .attr('text-anchor', function (d, i) { return i & 1 ? 'start' : 'end'; })\n                    .text(format)\n                    .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y', x1);\n\n                boxTick.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .text(format)\n                    .attr('x', function (d, i) { return i & 1 ? width : 0; })\n                    .attr('y', x1);\n\n                // Update whisker ticks. These are handled separately from the box\n                // ticks because they may or may not exist, and we want don't want\n                // to join box ticks pre-transition with whisker ticks post-.\n                var whiskerTick = g.selectAll('text.whisker')\n                    .data(whiskerData || []);\n\n                whiskerTick.enter().append('text')\n                    .attr('class', 'whisker')\n                    .attr('dy', '.3em')\n                    .attr('dx', 6)\n                    .attr('x', width)\n                    .attr('y', x0)\n                    .text(format)\n                    .style('opacity', 1e-6)\n                    .transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y', x1)\n                    .style('opacity', 1);\n\n                whiskerTick.transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .text(format)\n                    .attr('x', width)\n                    .attr('y', x1)\n                    .style('opacity', 1);\n\n                whiskerTick.exit().transition()\n                    .duration(duration)\n                    .delay(delay)\n                    .attr('y', x1)\n                    .style('opacity', 1e-6)\n                    .remove();\n            });\n            d3.timer.flush();\n        }\n\n        box.width = function (x) {\n            if (!arguments.length) {\n                return width;\n            }\n            width = x;\n            return box;\n        };\n\n        box.height = function (x) {\n            if (!arguments.length) {\n                return height;\n            }\n            height = x;\n            return box;\n        };\n\n        box.tickFormat = function (x) {\n            if (!arguments.length) {\n                return tickFormat;\n            }\n            tickFormat = x;\n            return box;\n        };\n\n        box.duration = function (x) {\n            if (!arguments.length) {\n                return duration;\n            }\n            duration = x;\n            return box;\n        };\n\n        box.domain = function (x) {\n            if (!arguments.length) {\n                return domain;\n            }\n            domain = x === null ? x : d3.functor(x);\n            return box;\n        };\n\n        box.value = function (x) {\n            if (!arguments.length) {\n                return value;\n            }\n            value = x;\n            return box;\n        };\n\n        box.whiskers = function (x) {\n            if (!arguments.length) {\n                return whiskers;\n            }\n            whiskers = x;\n            return box;\n        };\n\n        box.quartiles = function (x) {\n            if (!arguments.length) {\n                return quartiles;\n            }\n            quartiles = x;\n            return box;\n        };\n\n        return box;\n    };\n\n    function boxWhiskers (d) {\n        return [0, d.length - 1];\n    }\n\n    function boxQuartiles (d) {\n        return [\n            d3.quantile(d, 0.25),\n            d3.quantile(d, 0.5),\n            d3.quantile(d, 0.75)\n        ];\n    }\n\n})();\n\n\n/**\n * A box plot is a chart that depicts numerical data via their quartile ranges.\n *\n * Examples:\n * - {@link http://dc-js.github.io/dc.js/examples/box-plot-time.html Box plot time example}\n * - {@link http://dc-js.github.io/dc.js/examples/box-plot.html Box plot example}\n * @class boxPlot\n * @memberof dc\n * @mixes dc.coordinateGridMixin\n * @example\n * // create a box plot under #chart-container1 element using the default global chart group\n * var boxPlot1 = dc.boxPlot('#chart-container1');\n * // create a box plot under #chart-container2 element using chart group A\n * var boxPlot2 = dc.boxPlot('#chart-container2', 'chartGroupA');\n * @param {String|node|d3.selection} parent - Any valid\n * {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Selections.md#selecting-elements d3 single selector} specifying\n * a dom block element such as a div; or a dom element or d3 selection.\n * @param {String} [chartGroup] - The name of the chart group this chart instance should be placed in.\n * Interaction with a chart will only trigger events and redraws within the chart's group.\n * @returns {dc.boxPlot}\n */\ndc.boxPlot = function (parent, chartGroup) {\n    var _chart = dc.coordinateGridMixin({});\n\n    // Returns a function to compute the interquartile range.\n    function DEFAULT_WHISKERS_IQR (k) {\n        return function (d) {\n            var q1 = d.quartiles[0],\n                q3 = d.quartiles[2],\n                iqr = (q3 - q1) * k,\n                i = -1,\n                j = d.length;\n            do { ++i; } while (d[i] < q1 - iqr);\n            do { --j; } while (d[j] > q3 + iqr);\n            return [i, j];\n        };\n    }\n\n    var _whiskerIqrFactor = 1.5;\n    var _whiskersIqr = DEFAULT_WHISKERS_IQR;\n    var _whiskers = _whiskersIqr(_whiskerIqrFactor);\n\n    var _box = d3.box();\n    var _tickFormat = null;\n\n    var _boxWidth = function (innerChartWidth, xUnits) {\n        if (_chart.isOrdinal()) {\n            return _chart.x().rangeBand();\n        } else {\n            return innerChartWidth / (1 + _chart.boxPadding()) / xUnits;\n        }\n    };\n\n    // default padding to handle min/max whisker text\n    _chart.yAxisPadding(12);\n\n    // default to ordinal\n    _chart.x(d3.scale.ordinal());\n    _chart.xUnits(dc.units.ordinal);\n\n    // valueAccessor should return an array of values that can be coerced into numbers\n    // or if data is overloaded for a static array of arrays, it should be `Number`.\n    // Empty arrays are not included.\n    _chart.data(function (group) {\n        return group.all().map(function (d) {\n            d.map = function (accessor) { return accessor.call(d, d); };\n            return d;\n        }).filter(function (d) {\n            var values = _chart.valueAccessor()(d);\n            return values.length !== 0;\n        });\n    });\n\n    /**\n     * Get or set the spacing between boxes as a fraction of box size. Valid values are within 0-1.\n     * See the {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md#ordinal_rangeBands d3 docs}\n     * for a visual description of how the padding is applied.\n     * @method boxPadding\n     * @memberof dc.boxPlot\n     * @instance\n     * @see {@link https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md#ordinal_rangeBands d3.scale.ordinal.rangeBands}\n     * @param {Number} [padding=0.8]\n     * @returns {Number|dc.boxPlot}\n     */\n    _chart.boxPadding = _chart._rangeBandPadding;\n    _chart.boxPadding(0.8);\n\n    /**\n     * Get or set the outer padding on an ordinal box chart. This setting has no effect on non-ordinal charts\n     * or on charts with a custom {@link dc.boxPlot#boxWidth .boxWidth}. Will pad the width by\n     * `padding * barWidth` on each side of the chart.\n     * @method outerPadding\n     * @memberof dc.boxPlot\n     * @instance\n     * @param {Number} [padding=0.5]\n     * @returns {Number|dc.boxPlot}\n     */\n    _chart.outerPadding = _chart._outerRangeBandPadding;\n    _chart.outerPadding(0.5);\n\n    /**\n     * Get or set the numerical width of the boxplot box. The width may also be a function taking as\n     * parameters the chart width excluding the right and left margins, as well as the number of x\n     * units.\n     * @example\n     * // Using numerical parameter\n     * chart.boxWidth(10);\n     * // Using function\n     * chart.boxWidth((innerChartWidth, xUnits) { ... });\n     * @method boxWidth\n     * @memberof dc.boxPlot\n     * @instance\n     * @param {Number|Function} [boxWidth=0.5]\n     * @returns {Number|Function|dc.boxPlot}\n     */\n    _chart.boxWidth = function (boxWidth) {\n        if (!arguments.length) {\n            return _boxWidth;\n        }\n        _boxWidth = d3.functor(boxWidth);\n        return _chart;\n    };\n\n    var boxTransform = function (d, i) {\n        var xOffset = _chart.x()(_chart.keyAccessor()(d, i));\n        return 'translate(' + xOffset + ', 0)';\n    };\n\n    _chart._preprocessData = function () {\n        if (_chart.elasticX()) {\n            _chart.x().domain([]);\n        }\n    };\n\n    _chart.plotData = function () {\n        var _calculatedBoxWidth = _boxWidth(_chart.effectiveWidth(), _chart.xUnitCount());\n\n        _box.whiskers(_whiskers)\n            .width(_calculatedBoxWidth)\n            .height(_chart.effectiveHeight())\n            .value(_chart.valueAccessor())\n            .domain(_chart.y().domain())\n            .duration(_chart.transitionDuration())\n            .tickFormat(_tickFormat);\n\n        var boxesG = _chart.chartBodyG().selectAll('g.box').data(_chart.data(), _chart.keyAccessor());\n\n        renderBoxes(boxesG);\n        updateBoxes(boxesG);\n        removeBoxes(boxesG);\n\n        _chart.fadeDeselectedArea();\n    };\n\n    function renderBoxes (boxesG) {\n        var boxesGEnter = boxesG.enter().append('g');\n\n        boxesGEnter\n            .attr('class', 'box')\n            .attr('transform', boxTransform)\n            .call(_box)\n            .on('click', function (d) {\n                _chart.filter(_chart.keyAccessor()(d));\n                _chart.redrawGroup();\n            });\n    }\n\n    function updateBoxes (boxesG) {\n        dc.transition(boxesG, _chart.transitionDuration(), _chart.transitionDelay())\n            .attr('transform', boxTransform)\n            .call(_box)\n            .each(function () {\n                d3.select(this).select('rect.box').attr('fill', _chart.getColor);\n            });\n    }\n\n    function removeBoxes (boxesG) {\n        boxesG.exit().remove().call(_box);\n    }\n\n    _chart.fadeDeselectedArea = function () {\n        if (_chart.hasFilter()) {\n            if (_chart.isOrdinal()) {\n                _chart.g().selectAll('g.box').each(function (d) {\n                    if (_chart.isSelectedNode(d)) {\n                        _chart.highlightSelected(this);\n                    } else {\n                        _chart.fadeDeselected(this);\n                    }\n                });\n            } else {\n                var extent = _chart.brush().extent();\n                var start = extent[0];\n                var end = extent[1];\n                var keyAccessor = _chart.keyAccessor();\n                _chart.g().selectAll('g.box').each(function (d) {\n                    var key = keyAccessor(d);\n                    if (key < start || key >= end) {\n                        _chart.fadeDeselected(this);\n                    } else {\n                        _chart.highlightSelected(this);\n                    }\n                });\n            }\n        } else {\n            _chart.g().selectAll('g.box').each(function () {\n                _chart.resetHighlight(this);\n            });\n        }\n    };\n\n    _chart.isSelectedNode = function (d) {\n        return _chart.hasFilter(_chart.keyAccessor()(d));\n    };\n\n    _chart.yAxisMin = function () {\n        var min = d3.min(_chart.data(), function (e) {\n            return d3.min(_chart.valueAccessor()(e));\n        });\n        return dc.utils.subtract(min, _chart.yAxisPadding());\n    };\n\n    _chart.yAxisMax = function () {\n        var max = d3.max(_chart.data(), function (e) {\n            return d3.max(_chart.valueAccessor()(e));\n        });\n        return dc.utils.add(max, _chart.yAxisPadding());\n    };\n\n    /**\n     * Set the numerical format of the boxplot median, whiskers and quartile labels. Defaults to\n     * integer formatting.\n     * @example\n     * // format ticks to 2 decimal places\n     * chart.tickFormat(d3.format('.2f'));\n     * @method tickFormat\n     * @memberof dc.boxPlot\n     * @instance\n     * @param {Function} [tickFormat]\n     * @returns {Number|Function|dc.boxPlot}\n     */\n    _chart.tickFormat = function (tickFormat) {\n        if (!arguments.length) {\n            return _tickFormat;\n        }\n        _tickFormat = tickFormat;\n        return _chart;\n    };\n\n    return _chart.anchor(parent, chartGroup);\n};\n\n// Renamed functions\n\ndc.abstractBubbleChart = dc.bubbleMixin;\ndc.baseChart = dc.baseMixin;\ndc.capped = dc.capMixin;\ndc.colorChart = dc.colorMixin;\ndc.coordinateGridChart = dc.coordinateGridMixin;\ndc.marginable = dc.marginMixin;\ndc.stackableChart = dc.stackMixin;\n\n// Expose d3 and crossfilter, so that clients in browserify\n// case can obtain them if they need them.\ndc.d3 = d3;\ndc.crossfilter = crossfilter;\n\nreturn dc;}\n    if(typeof define === \"function\" && define.amd) {\n        define([\"d3\", \"crossfilter\"], _dc);\n    } else if(typeof module === \"object\" && module.exports) {\n        var _d3 = require('d3');\n        var _crossfilter = require('crossfilter2');\n        // When using npm + browserify, 'crossfilter' is a function,\n        // since package.json specifies index.js as main function, and it\n        // does special handling. When using bower + browserify,\n        // there's no main in bower.json (in fact, there's no bower.json),\n        // so we need to fix it.\n        if (typeof _crossfilter !== \"function\") {\n            _crossfilter = _crossfilter.crossfilter;\n        }\n        module.exports = _dc(_d3, _crossfilter);\n    } else {\n        this.dc = _dc(d3, crossfilter);\n    }\n}\n)();\n\n//# sourceMappingURL=dc.js.map"]}